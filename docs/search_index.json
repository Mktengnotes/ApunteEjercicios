[["index.html", "Apunte Problemas Resueltos Prologo", " Apunte Problemas Resueltos Marcel Goic 2025-09-05 Prologo Dentro del contexto de Marketing, estamos interesados ene estudiar el comportamiento de las personas, de modo de comprenderlo y finalmente, tomar decisiones estratégicas en función de los aprendizajes adquiridos. En esta línea, se pueden definir dos tipos de enfoques a utilizar, los cuales dependen de los supuestos que tomemos acerca del comportamiento de los agentes (tomadores de decisiones): Modelos Probabilísticos: En este, se asume que los agentes se comportan en base a decisiones aleatorias. Usualmente se utiliza cuando se tiene información reducida y/o agregada respecto al comportamiento de los agentes de estudio. Enfoque Estructural: En este, se asume que los agentes se comportan de manera racional, lo cual se traduce a que toman decisiones con el objetivo de maximizar sus utilidades (no necesariamente monetarias) "],["formulas-utiles.html", "Capítulo 1 Formulas utiles", " Capítulo 1 Formulas utiles Distribución Poisson: \\[f(x|\\lambda) = \\frac{\\lambda^x e^{-\\lambda}}{x!} \\qquad \\mathbb{E}(X) = \\lambda \\qquad \\mathbb{V}ar(X) = \\lambda\\] Distribución Beta: \\[f(x|\\alpha,\\beta) = \\frac{x^{\\alpha - 1}(1-x)^{\\beta-1}}{B(\\alpha,\\beta)} \\qquad \\mathbb{E}(X) = \\frac{\\alpha}{\\alpha + \\beta} \\qquad \\mathbb{V}ar(X) = \\frac{\\alpha \\beta}{(\\alpha + \\beta)^2 (\\alpha + \\beta + 1)} \\] Distribución Gamma: \\[f(x|r, \\alpha) = \\frac{\\alpha^r x^{r-1} e^{-\\alpha x}}{\\Gamma(r)} \\qquad \\mathbb{E}(X) = \\frac{r}{\\alpha} \\qquad \\mathbb{V}ar(X) = \\frac{r}{\\alpha^2}\\] Distribución Binomial Negativa: \\[f(x|r, \\alpha,t) = \\frac{\\Gamma(r+x)}{\\Gamma(r)x!} (\\frac{\\alpha}{\\alpha + 1})^r (\\frac{1}{\\alpha + 1})^x \\qquad \\mathbb{E}(X) = \\frac{r}{\\alpha} \\qquad \\mathbb{V}ar(X) = \\frac{r}{\\alpha} + \\frac{r}{\\alpha^2}\\] Distribución Beta Binomial: \\[f(x|\\alpha, \\beta,m) = \\binom{m}{x} \\frac{B(\\alpha + x, \\beta + m - x)}{B(\\alpha,\\beta)} \\qquad \\mathbb{E}(X) = \\frac{m\\alpha}{\\alpha+\\beta}\\qquad \\mathbb{V}ar(X) = \\frac{m\\alpha\\beta(m+\\alpha+\\beta)}{(\\alpha+\\beta)^2(\\alpha + \\beta + 1)}\\] Función Gamma: \\[\\Gamma(z) = \\int_{0}^\\infty t^{z-1} e^{-t} dt \\qquad \\Gamma(z+1) = z\\Gamma(z) \\] Función Beta: \\[B(\\alpha,\\beta) = \\int_{0}^\\infty t^{\\alpha-1} (1-t)^{\\beta-1} dt\\qquad B(\\alpha,\\beta) = \\frac{\\Gamma(\\alpha)\\Gamma(\\beta)}{\\Gamma(\\alpha + \\beta)} \\] Tasa de Riesgo: \\[h(t) = \\frac{f(t)}{1-F(t)} \\qquad F(t) = 1- exp(-\\int_{0}^{t} h(u)du) \\] Métricas de ajuste \\[\\begin{array}{cc} MAE = \\frac{1}{n}\\sum_{i=1}^{n} |y_i - \\hat{y_i}| &amp; MAPE = \\sum_{i=1}^{n} |\\frac{y_i - \\hat{y_i}}{y_i}| \\\\ \\chi ^2 =\\sum_{i=1}^{n} \\frac{(y_i - \\hat{y_i})^2}{\\hat{y_i}} &amp; R^2 = 1 - \\frac{\\sum_{i}^{n} (y_i - \\hat{y_i})^2}{\\sum_{i=1}^{n}(y_i - \\bar{y_i})^2} \\\\ AIC = -2LL(\\hat{\\theta} + 2k) &amp; BIC = -2LL(\\hat{\\theta} + k ln(n) \\end{array}\\] "],["modelos-de-regresión.html", "Capítulo 2 Modelos de Regresión 2.1 Introducción 2.2 Metodología 2.3 Problemas Teóricos 2.4 Problemas Aplicados", " Capítulo 2 Modelos de Regresión 2.1 Introducción En este capítulo se abarcarán problemas relacionados a modelos de regresión; es decir, aquellos modelos donde la variable dependiente \\(y\\) se escribe como: \\[ y = f(\\textbf{X})= \\beta^´X + \\varepsilon \\] donde \\(\\textbf{X}\\) corresponde a las variables explicativas, \\(\\beta^´\\) son los parámetros que buscamos para estudiar la influencia de las vairables explicativas en la variable dependiente; o mejor dicho, la influencia de las variaciones en las variables explicativas en las variaciones de la variable depndiente, y \\(\\varepsilon\\) es el error aleatorio. Los modelos de regresión tienen la ventaja de ser fáciles de implementar e interpretar, pero se debe tener cuidado al momento de construir, evaluar e interpretar estos modelos. A partir de los datos que uno observa, existen infinitos modelos de regresión para explicar una variable \\(y\\). Un buen modelo encuentra el balance entre su complejidad y poder explicativo. 2.2 Metodología Como mencionabámos anteriormente, para poder crear y utilizar los modelos de regresión que nos permite responder de la manera más informada las preguntas de Definir el nivel de agregación de las variables apropiado para el problema en cuestión, ya sea una agregación temporal (datos diarios, semanales, mensuales, anuales) o lógicos (agregación por producto, categoría, marca, tienda), como también definir los índices de los parámetros del modelo Elegir las variables explicativas a considerar para el modelo, realizar las transformaciones según lo solicitado por el problema de gestión. Decidir si se incluirán interacciones entre las variables explicativas, como también si posee un efecto fijo (como también definir los índices de estos efectos). Evaluar los modelos a partir de distintas métricas, ya sean genéricas (\\(R^2\\), \\(MAE\\), \\(MAPE\\), \\(RMS\\)) o de verosimilitud (\\(\\text{Likelihood Ratio}\\), \\(AIC\\), \\(BIC\\)), escogiendo aquél que, a partir de las métricas mencionadas, tengan una buena calibración y una alta capacidad de predicción. Interpretar los coeficientes más significativas de un modelo, para responder la pregunta de gestión original. 2.3 Problemas Teóricos 2.3.1 E1: Signo esperado y Significancia Al evaluar la inclusión de una variable en base a su signo esperado y significancia estadística, ¿cuál de los siguientes casos NO es una buena recomendación para un modelo de pronóstico? Si el parámetro tiene el signo esperado y no es significativo: mantener. Si el parámetro no tiene el signo esperado y no es significativo: eliminar. Si el parámetro no tiene el signo esperado y es significativo: tratar de hacer ajustes al modelo o juntar más datos y variables. El parámetro tiene el signo esperado y es significativo: mantener. Ninguna de las anteriores. 2.3.2 E2: Regresión Lineal vs de Poisson ¿Qué diferencia un modelo de regresión simple de un modelo de regresión de Poisson? (Puede seleccionar más de una opción). La especificación de la distribución del término de error. Los métodos disponibles para estimar el modelo. La naturaleza de la variable dependiente. La posibilidad de realizar t-tests. 2.3.3 E3: Selección automática de variables Cuál de las siguientes afirmaciones caracterizan adecuadamente a la selección automática de variables para un modelo de regresión lineal (Puede seleccionar más de una opción): Vienen predefinidas en planillas de cálculo. Son siempre peores que selección manual. Sólo pueden aplicarse sobre el subconjunto de variables continuas. No consideran todos los modelos posibles. 2.3.4 E4: Regresión Log-Nivel y Log-Log Dado el modelo \\(ln(y)=\\beta_{0}+\\beta_{1}x_{1}+b_{2}ln(x_{2})\\), se puede asegurar que: Un aumento de una unidad en \\(x_{1}\\) causa un aumento de \\(\\beta_{0}\\) unidades en \\(y\\). Un aumento de una unidad en \\(x_{2}\\) causa un aumento de \\(\\beta_{2}\\)% unidades en \\(y\\). Un aumento de un 1% en \\(x_{2}\\) causa un aumento de \\(\\beta_{2}\\) unidades en \\(y\\). Un aumento de un 1% en \\(x_{2}\\) causa un aumento de \\(\\beta_{2}\\)% unidades en \\(y\\). Ninguna de las anteriores. 2.3.5 E5: Capturar efectos ¿Cuál de las siguientes especificaciones NO permite capturar que las diferencias en el comportamiento \\(y\\) se van incrementando a medida que aumenta la edad de los sujetos? \\(y=\\beta_{0}+\\sum_{i}\\beta_{i}Dummy_{i},\\quad i=\\{\\text{niños, jóvenes, adultos, ancianos}\\}\\) \\(y=\\beta_{0}+\\beta_{1}ln(edad)\\) \\(y=\\beta_{0}+\\beta_{1}edad+\\beta_{2}edad^{2}\\) \\(y=\\beta_{0}+\\beta_{1}\\exp(edad)\\) Ninguna de las anteriores. 2.3.6 E6: Coeficientes y Parámetros Se tiene el siguiente modelo lineal de venta de productos \\[Q_{ist}=\\theta_{s}+\\mu_{is}P_{ist}+\\gamma t+\\epsilon_{ist}\\] Donde \\(Q_{ist}\\) es la cantidad vendida del producto \\(i\\) en la tienda \\(s\\) en el año \\(t\\) y \\(P_{ist}\\) el precio. El set de datos contiene registros para 5 productos y 5 tiendas entre 1960 y 2015. A partir de esto, se puede afirmar que (puede elegir más de una opción): Transformar \\(\\gamma t\\) en \\(\\gamma_{t}\\) no influye en el modelo ya que son equivalentes. Transformar los coeficientes \\(\\mu_{is}\\) a \\(\\mu_{i}+\\mu_{s}\\) implica calcular menos parámetros. El modelo no permite capturar comportamiento cíclico de la demanda. Los parámetros \\(\\theta_{s}\\) y \\(\\mu_{is}\\) no pueden estimarse simultáneamente. 2.3.7 E7: ¿Qué es un modelo de Regresión? ¿Cuál(es) es(son) la utilidad de un modelo de regresión? Permite medir correlación entre variables. Permite medir la magnitud de una relación causal. Permite determinar causalidad entre variables. Dependiendo de la especificación puede determinar causalidad o correlación, pero no ambas simultáneamente. 2.3.8 Solución problemas teóricos E1: Signo esperado y Significancia Respuesta correcta: e. { Ninguna de las anteriores. Por ejemplo: no tiene signo esperado y no es significativo: Mantener} E2: Regresión Lineal vs de Poisson Respuestas correctas: i., ii. y iii. { La especificación de la distribución del término de error; Los métodos disponibles para estimar el modelo; La naturaleza de la variable dependiente } E3: Selección automática de variables Respuesta correcta: iv. { No consideran todos los modelos posibles } E4: Regresión Log-Nivel y Log-Log Respuesta correcta: e. { Ninguna de las anteriores. Un 1% de aumento en \\(x_2\\) causa un cambio en \\(\\beta_2/100\\) en y.} E5: Capturar efectos Respuesta correcta: b. { \\(y=\\beta_{0}+\\beta_{1}\\ln(edad)\\) } E6: Coeficientes y Parámetros Respuestas correctas: ii. y iii. { Transformar los coeficientes \\(\\mu_{is}\\) a \\(\\mu_{i}+\\mu_{s}\\) implica calcular menos parámetros; El modelo no permite capturar comportamiento cíclico de la demanda } E7: ¿Qué es un modelo de Regresión? Respuestas correctas: i. y ii. { Permite medir correlación entre variables; Permite medir la magnitud de una relación causal } 2.4 Problemas Aplicados 2.4.1 Problema 1 Un reconocido grupo empresarial que manefactura productos de aseo y limpieza de diversa índole le pide a usted evaluar el impacto de la pandemia en sus ventas a partir del registro obtenido por distintas tiendas distribuidas a lo largo del país. El foco del análisis se en la variable \\(q_{ist}\\), la cual corresponde al número de unidades vendidas del producto \\(i\\) en la tienda \\(s\\) en el día \\(t\\). Junto a las ventas se cuenta con un vector de características \\(z_{t}\\) que describe cada día \\(t\\), entre ellas \\(FDS_t\\) que indica si es un fin de semana y \\(FER_t\\) que indica si el día fue feriado. También, se tiene el vector \\(x_{ist}\\) con características que varían según producto, tienda y día, entre ellas \\(PRECIO_{ist}\\) (precio del producto), \\(QUAR_{st}\\) (si la comunda donde se encuentra la tienda estaba en caurentena o no). Formule un modelo de regresión lineal que capture los siguientes factores: Existe un efecto fijo por producto y por tienda, es decir, la linea base de las ventas es distinto para cada producto dependiendo de la tienda. Si un producto no se vende en una tienda en un día dado es probable que aya un quiebre de stock y si un día hay quiebre, es probable que el día siguiente el producto siga quebrado. El conjunto \\(\\mathcal{PN}\\) registra todos los productos de la firma que son de primera necesidad. Las cuarentenass no tienen efecto en os productos de primera necesidad. El efecto de las cuarentenas puede ser distinto para las ventas de un día de semana con respecto a un fin de semana. El nivel de progresión de las infecciones (\\(InfMV_{st}\\)) afecta el nivel de ventas. El nivel de progresión de las infecciones afecta el nivel de ventas a través de cuñanto han variado las infecciones con respecto a una semana. Por ejemplo, si hoy hay 100 casos nuevos y hace una semana había solo 800, entonces ese aumento de 200 casos capturarían una fracción relevante de la relación entre la progresión de la pandemia y als ventas de los productos de la firma. Considere los siguientes dos modelos, los cuales contienen variables mencionadas anteriormente, junto con otras que no vale la pena nombrar: M1 M2 … … … Quar -0.06 (0.02) -0.07 (0.01) FER 0.11 (0.03) 0.12 (0.02) FDS 0.14 (0.02) 0.13 (0.02) Quar x FER 0.07 (0.02) 0.06 (0.03) Quar x FDS 0.06 (0.03) 0.08 (0.01) Npar 23 27 R**2 0.63 0.69 Adj. R**2 0.62 0.61 RMSE train 0.34 0.33 RMSE test 0.34 0.38 \\[ \\textbf{Tabla 1: } \\text{Fragmento de parámetros y métricas de ajuste para dos modelos alternativos. Para los parámetros se }\\\\ \\text{reporta el estimador de mínimos cuadrados y en paréntesis el error estándar. En la tabla, tanto } R^2 \\text{ como } Adj. R^2 \\\\ \\text{ han sido calculados sobre la base de entrenamiento.} \\] Además de incluir el valor de los coeficientes, se entrega para cada modelo 4 métricas de ajuste. ¿Cuál de los dos modelos recomendaría usar para ver el efecto de las cuarentenas en las ventas? Inspeccionando los resultados del modelo de regresión lineal que consideró en la parte anterior, ¿cómo describiría el rol que han jugado las cuarentenas en las ventas de la firma? Solución Agregamos progresivamente un término adicional a la regresión: \\[ q_{ist} = \\alpha_{is} \\\\ + \\beta_1 \\cdot \\textbf{1}_{[q_{ist-1}= 0]} \\\\ + \\beta_2 \\cdot QUAR_{st} \\times \\textbf{1}_{[i \\notin \\mathcal{PN}]} \\\\ + \\beta_3 \\cdot QUAR_{st} \\times FDS_t \\\\ + \\beta_4 \\cdot InfMV_{st} \\\\ + \\beta_5 \\cdot (InfMV_{st} - InfMV_{st-7}) \\] \\(\\textbf{Observación:}\\) El modelo anterior puede permitir algunas variantes. Por ejemplo, aunque la condición (a) indique que existe un factor fijo por tienda y producto, una variante (no tan correcta) es considerar por separador los factores. Esto es, en vez de tomar \\(\\alpha_{is}\\) se elige \\((\\alpha_{i}+\\alpha_{s})\\). También, al considerar la condición (c) al momento de abordar el factor en (d), se puede decir que el efecto de las cuarentenas en los fines de semana no afecta a los productos de primera necesidad (como lo dice la condición (c)). De este modo, este factor se puede considerar como \\(\\beta_3 \\cdot QUAR_{st} \\times FDS_t \\times \\textbf{1}_{[i \\notin \\mathcal{PN}]}\\). El modelo 1 es mejor que el modelo 2 en casi todas las métricas relevantes, excepto en la métrica de \\(R^2\\). Esto se explica porque tiene más parámetros y queda corregido al mirar el coeficiente Adj. \\(R^2\\). Para el modelo preferido (1) todos los coeficientes asociados a las cuarentenas y sus interacciones son significativos y por lo tanto mirar los estimadores nos dan una razonable primera aproximación. Acá vemos que las cuarentenas tienen un efecto negativo siginificativo en reducir las ventas. Sin embargo, este efecto solo se da en los días de semana. Tanto para feriados como fines de semana el efecto se va a cero los fines de semana y (marginalmente) positivo para feriados. 2.4.2 Problema 2 Un cine pequeño quiere impulsar la venta de entradas para este verano. Para atraer de manera eficiente a los clientes deciden ser selectivos en las películas que tendrán en cartelera. Para ello, desean determinar las características de las películas que provocan un mayor ingreso. El equipo de ventas dispone de un panel de datos con el historial de las 3,800 funciones del año de las 1,250 películas presentadas con los siguientes datos: Variable Descripción Media IdFunción Identificador de la función Fecha Fecha de la función Hora Hora de la función Película Nombre de la película a proyectar Duración Duración de la película presentada [en Minutos] 103.32 Tipo Tipo de película presentada {Acción, Comedia, Romance, Drama, Terror} Edad Restricción de edad de la película {TE, TE+7, MA+14, MA+18} Estudio Estudio que produjo la película {Dis, WB, Para, Uni} Presupuesto Presupuesto de la película [en CLP] 160,200,000 Ingreso Ingreso recibido por las entradas vendidas en la función [en CLP] 714,500 \\[ \\textbf{Tabla 2: } \\text{Resumen de ventas para cada función.} \\] Para tener una mejor idea de cómo se ven los datos, se pueden observar estos 6 registros: IdFunción_i Fecha_i Hora_i Película_i Duración_i Tipo_i Edad_i Estudio_i Presupuesto_i Ingreso_i 14156 23/07/2022 19:00 Odín 4 105 Acción TE+7 Dis 354,970,000 948,640 14157 23/07/2022 22:00 Chillido 5 132 Terror MA+18 Para 135,600,000 804,300 14158 24/07/2022 11:00 Odín 4 105 Acción TE+7 Dis 354,970,000 893,000 14159 24/07/2022 15:30 Desafiar Barreras 158 Romance MA+14 WB 94,500,000 569,200 14160 24/07/2022 20:15 Odín 4 105 Acción TE+7 Dis 354,970,000 832,150 14161 25/07/2022 11:00 Desafiar Barreras 158 Romance MA+14 WB 94,500,000 452,900 \\[ \\textbf{Tabla 3: } \\text{Ejemplo de 6 registro en Tabla de Ventas.} \\] Nótese que una película puede tener varias funciones y que, debido a la naturaleza de las variables, el rango de valores y el tipo de variables son distintos. Debido a esto, elija un nivel de agregación y transforme las variables de forma que puedan modelar el éxito total en ventas para cada película. El equipo escogió como variable dependiente el logaritmo de la suma de los ingresos de las funciones para cada película y generó dos modelos distintos, entregando los siguientes resultados: Modelo 1 Modelo 2 Coeficiente p-valor Coeficiente p-valor Intercepto -15.2 0.704 3.1 0.161 Duración -1.04 0.452 -0.23 0.004 log(Presupuesto) 0.62 0.005 1.15 0.001 Edad.TE 4.5 0.058 Edad.TE+7 6.71 0.02 Edad.MA+14 5.16 0.017 Edad.MA+18 4.04 0.009 Tipo.Acción 4.05 0.52 Tipo.Comedia 1.63 0.017 Tipo.Romance 2.11 0.11 Tipo.Drama -1.52 0.025 Tipo.Terror 6.72 0.001 Estudio.Dis 5.12 0.004 Estudio.WB 4.09 0.24 Estudio.Uni 3.14 0.104 Estudio.Para -0.63 0.186 LL -644 -650 AIC 1,304 1,295 BIC 1,366 1,350 \\[ \\textbf{Tabla 3: } \\text{Parámetros y métricas de ajuste para dos modelos alternativos.} \\] A partir de los datos entregados elija cuál modelos es mejor para predecir el número de entradas vendidas para una película y entregue 3 argumentos de porqué lo considera mejor. Interprete los coeficientes de cada modelo. Según cada modelo,¿qué tipo de películas debería presentar el cine para tener mayores ingresos? Suponga que en su base de datos posee también la variable independiente \\(NFun\\) que representa el número de funciones que recibió la película en el cine. Proponga un modelo de regresión lineal que considere siguientes condiciones: Se debe considerar el efecto marginal por parte de las variables Presupuesto, Duración, Edad, Tipo, Estudio y \\(NFun\\). Existe un efecto en las ventas que depende simultaneamente del estudio y el Tipo de película (Por ejemplo, el estudio WB puede tener más exito con películas de terror, mientras que Dis lo puede tener con aquellas de acción). El éxito de la películas apropiadas para niños (Edad \\(\\in\\) {TE, TE+7}) depende de su duración. Solución Nótese que una película puede tener varias funciones y que, debido a la naturaleza de las variables, el rango de valores y el tipo de variables son distintos. Debido a esto, elija un nivel de agregación y transforme las variables de forma que puedan modelar el éxito total en ventas para cada película. Para evaluar el ingreso total en ventas obtenido por una película se deben considerar los ingresos a nível película. De modo que se define el ingreso para la película \\(j\\) como la suma del éxito de todas sus funciones \\(i\\): \\[ Ingreso_{j} = \\sum_i Ingreso_i \\cdot \\textbf{1}_{[Nombre_i = j]} \\] Cabe notar que las características de la película (\\(Presupuesto_i ,Duración_i ,Tipo_i ,Edad_i ,Estudio_i\\)) se mantienen para cada función \\(i\\) de la película \\(j\\) de modo que \\(Presupuesto_j = Presupuesto_i\\) para toda función de la película \\(j\\) (lo mismo para las demás carácteristicas). De este modo, tenemos un vector de características por película (\\(Presupuesto_j ,Duración_j ,Tipo_j ,Edad_j ,Estudio_j\\)) Finalmente, notemos que los valores de \\(Ingreso_j\\) y \\(Presupuesto_j\\) son muy elevados en comparación con la variable \\(Duración_j\\). Similarmente, el rango no se compara con el valor de las variables dummy generadas por las categorías \\(Tipo_j\\),\\(Edad_j\\) y \\(Estudio_j\\). Debido a esto, decidimos estudiar el comportamiento del logaritmo de estos montos: \\(\\log(Ingreso)\\) y \\(\\log(Presupuesto_j)\\). Para ser más claros, la tabla con las transformaciones apropiadas tendría los 6 registros mostrados anteriormente de la siguiente manera: Película_j Duración_j Tipo_j Edad_j Estudio_j log.Presupuesto_j. log.Ingreso_j. Odín 4 105 Acción TE+7 Dis 8.55 6.43 Chillido 5 132 Terror MA+18 Para 8.13 5.91 Desafiar Barreras 158 Romance MA+14 WB 7.97 6.01 A partir de los datos entregados elija cuál modelos es mejor para predecir el número de entradas vendidas para una película y entregue 3 argumentos de porqué lo considera mejor. El modelo que explica de manera más efectiva el comportamiento es el modelo 2. Se pueden considerara varias razones para esto, algunas de estas razones son: A pesar del modelo 1 tener una mejor log-verosimilitud, el BIC del modelo 2 es mejor que el modelo 1. La cantidad de parámetros del modelo 1 es mayor (11 vs 8), por lo que podríamos argumentar que preferimos el modelo 2 por su parsimonia (argumento se refuerza mirando la métrica BIC). Una gran parte de los coeficientes del modelo 1 son no significativos a un 5% de confianza, mientras que los coeficientes del modelo 2 tienden a ser &lt;5% La significancia de las variables que ambos modelos comparten poseen un p-valor menor en el modelo 2, de modo que sus intervalos de confianza deberían ser más acotados. Lo anterior, a pesar de algunas variables no ser significativas al 5%, es un hecho positivo respecto al modelo 2. Pensando en la interpretación, el modelo 1 posee algunos comportamientos discutibles: esperaríamos, por ejemplo, que la duración tenga un efecto negativo y significativo en los ingresos. Sin embargo, el modelo la considera no significativa. Los valores de intercepto en el modelo 1 está demasiado desviado en magnitud respecto al resto de coeficientes. Lo anterior podría dar indicios de incluso algún error en cuánto al escalamiento de las variables al momento de calibrar el modelo. Interprete los coeficientes de cada modelo. Según cada modelo,¿qué tipo de películas debería presentar el cine para tener mayores ingresos? Primero observamos aquellos coeficientes con mayor significancia estadística. Para eso consideramos aquellos cuyo p-valor sea menor a 0.01. Para el modelo 1 se tienen las variables \\(\\log(Presupuesto)\\), \\(Edad.MA+18\\) y \\(Estudio.Dis\\). De acuerdo al signo de los coeficientes podemos concluir que las películas que generan un mayor ingreso son aquellas con un mayor presupuesto, para mayores de 18 años producidas por Dis. En cambio, para el modelo 2, las variables a considerar son \\(Duración\\), \\(\\log(Presupuesto)\\) y \\(Tipo.Terror\\). Por el signo de los coeficientes, se deben proyectar películas de terror cortas con un alto presupuesto. Observación: En el modelo 1, sería deseable considerar la variable \\(Duración\\). Sin embargo, su p-valor alto refleja que no es una variable significativa en este modelo. Suponga que en su base de datos posee también la variable independiente \\(NFun\\) que representa el número de funciones que recibió la película en el cine. Proponga un modelo de regresión lineal que considere siguientes condiciones: Se debe considerar el efecto marginal por parte de las variables Presupuesto, Duración, Edad, Tipo, Estudio y \\(NFun\\). Existe un efecto en las ventas que depende simultaneamente del estudio y el Tipo de película (Por ejemplo, el estudio WB puede tener más exito con películas de terror, mientras que Dis lo puede tener con aquellas de acción). El éxito de la películas apropiadas para niños (Edad \\(\\in\\) {TE, TE+7}) depende de su duración. La condición (a) muestra que se deben incluir las variables Presupuesto, Duración, Edad, Género, Estudio y Nfun en el modelo, con sus propios coeficientes. La condición (b) nos dice que se debe agregar además, las variables de estudio condicionada al género. Finalmente, la condición (c) dice que queremos conocer el impacto de la duración en las películas cuya variable Edad es TE y TE+7. Recordemos que, para variables categóricas, se deben generar variables \\(dummy\\) para cada categoría Sea \\(E = \\{ TE,TE+7,MA+14,MA+18 \\}\\), $T = {Acción, Comedia,Romance,Drama,Terror} $ y \\(S = \\{ Dis,WB,Uni,Para \\}\\). A partir de estos conjuntos, podemos definir las variables \\(dummy\\): \\(Edad_j,e = 1\\) si para la película \\(j\\), \\(Edad_j=e\\) para \\(e \\in E\\). \\(Tipo_j,t = 1\\) si para la película \\(j\\), \\(Tipo_j=t\\) para \\(t \\in T\\). \\(Tipo_j,s = 1\\) si para la película \\(j\\), \\(Estudio_j=s\\) para \\(s \\in S\\). De este modo, el modelo que cumple las condiciones mencionadas sería \\[ \\log(Ingreso_j) = \\beta_1 \\log(Presupuesto_j) + \\beta_2 Duración_j + \\sum_{e \\in E} \\beta_e Edad_{j,e} + \\sum_{t \\in T} \\beta_t Tipo_{j,t} + \\sum_{s \\in S} \\beta_s Estudio_{j,S} + \\beta_3 Nfun_j\\\\ + \\sum_{t \\in T} \\sum_{s \\in S} \\gamma_{t,s} Tipo_{j,t} \\times Estudio_{j,S} \\\\ + \\sum_{e \\in \\{TE,TE+7\\}} \\delta_e Edad_{j,e} \\times Duración_j \\] Se puede realizar una notación vectorial de los coeficientes para tener una notación más concisa, pero se debe tener en cuenta los índices de estos coeficientes, de modo que el largo del vector sea la cantidad de coeficientes a buscar. 2.4.3 Problema 3 Debido a la gran variedad de alternativas que tiene el consumidor para satisfacer sus necesidades, empresas de distintos sectores han buscado formas de fidelizar a sus clientes mediante programas de recompensas. Estos programas proponen premiar al consumidor con relación a su nivel de actividad, con el fin de que estos sean más leales a la firma. A continuación, nos proponemos estudiar el comportamiento de los consumidores que están inmersos en un programa de recompensas en el cual se acumulan puntos al comprar en alguna de las tiendas de la cadena, al comprar en alguna alianza comercial asociada, o utilizando la tarjeta del banco aliado a la cadena. Cuando el consumidor tiene una cantidad suficiente de puntos acumulados puede canjear algún producto que se ofrece en un catálogo, o puede hacer uso de sus puntos como medio de pago al momento de comprar cualquier producto disponible en tienda. Para modelar los comportamientos anteriores, se cuenta con información demográfica de cada consumidor que es actualmente parte del programa, y cada una de las transacciones que ha realizado desde su inicio, como se observa en las Tablas 1 y 2: Variable Descripción IDCliente Identificador del cliente Ingreso Ingreso del cliente AñoInicio Año en el que el cliente se une al programa TamañoHogar Número de personas que componen el hogar del cliente Género 1 si el cliente es hombre Edad Edad del cliente Categoría Silver, Gold o Premium \\[\\text{Tabla 1: Variables Demográficas}\\] Variable Descripción IDCliente Identificador del cliente Año Año de la observación Mes Mes de la observación Acreditación Cantidad de puntos acreditados por el cliente en el mes \\(t\\) Canje Cantidad de productos canjeados por el cliente en el mes \\(t\\) TipoAcreditación Tiendas Propias, Comercios Asociados o Tarjeta Bancaria TipoCanje Producto o Descuento Promoción 1 si hubo promo o descuentos adicionales en el mes \\(t\\) Mail 1 si se avisó estado de cuenta al cliente via mail en el mes \\(t\\) \\[\\text{Tabla 2: Variables Transaccionales}\\] Como primera aproximación, se propone modelar la acreditación (\\(A_{it}\\)) y canje (\\(C_{it}\\)) de cada cliente \\(i\\) en el mes \\(t\\) como: \\[\\begin{align} A_{it}&amp;=\\alpha+\\alpha_{i}+\\alpha_{t}+\\beta X_{it}+\\dots+\\epsilon_{it}\\\\ C_{it}&amp;=\\gamma+\\gamma_{i}+\\gamma_{t}+\\rho Z_{it}+\\dots+\\xi_{it} \\end{align}\\] Donde \\(X_{it}\\) y \\(Z_{it}\\) son covariables construidas a partir de la información disponible. ¿Cuál es la interpretación de los parámetros \\(\\alpha_{i}\\), \\(\\alpha_{t}\\), \\(\\gamma_{i}\\) y \\(\\gamma_{t}\\)? ¿Son los modelos anteriores identificables? En caso de ser su respuesta negativa, ¿cómo se corrige el problema? Suponga que se han identificado los modelos anteriores (de requerirlo, con las restricciones necesarias para alcanzar identificación). Derive una expresión que permita calcular el número esperado del saldo de punto de un cliente \\(i\\) en cualquier período de tiempo \\(t\\). Proponga especificaciones de los modelos de regresión que permitan capturar que: El impacto que tiene informar el estado de cuenta de los puntos depende del género. Los niveles de actividad (acreditación y canje) de un cliente varían significativamente de acuerdo a su categoría. El nivel de actividad (acreditación y canje) depende de la antiguedad de los clientes en el programa, pero aquellos que llevan más años tienden a tener un comportamiento similar. Suponga ahora que se han estimado tres especificaciones para entender el comportamiento de acreditación (\\(A_{it}\\)), donde \\(f\\) representa alguna transformación o función de la información disponible, y cuyos resultados se encuentra en la tabla siguiente: Variable Modelo 1 Modelo 2 Modelo 3 \\(\\alpha_{0}\\) \\(35.9\\) \\((12.8)\\) \\(37.1\\) \\((8.6)\\) \\(32.7\\) \\((11.5)\\) \\(f\\)(Ingreso) \\(12.7\\) \\((5.1)\\) \\(-\\) \\(10.7\\) \\((2.9)\\) \\(f\\)(Edad) \\(-1.5\\) \\((0.6)\\) \\(-1.2\\) \\((2.3)\\) \\(-0.6\\) \\((0.3)\\) \\(f\\)(Mail) \\(-\\) \\(-0.3\\) \\((0.2)\\) \\(-1.9\\) \\((5.1)\\) \\(f\\)(Promoción) \\(-\\) \\(15.1\\) \\((6.7)\\) \\(10.9\\) \\((4.2)\\) \\(f\\)(TiendasPropias) \\(-\\) \\(10.1\\) \\((3.7)\\) \\(8.9\\) \\((2.1)\\) \\(f\\)(ComerciosAsociados) \\(-\\) \\(3.6\\) \\((2.5)\\) \\(2.9\\) \\((2.3)\\) \\(R^{2}\\) Ajustado \\(0.34\\) \\(0.53\\) \\(0.55\\) MAPE \\(45.5\\%\\) \\(20.9\\%\\) \\(23.4\\%\\) \\[\\text{Tabla 3: Resultados Modelos Regresión}\\] ¿Qué variables ayudan a explicar el comportamiento de acreditación de los consumidores? ¿Cuál es el medio en que se acreditan o acumulan, en promedio, menos puntos? Justifique cuál de los modelos anteriores es mejor. Solución Los parámetros \\(\\alpha_{i}\\) y \\(\\gamma_{i}\\) representan el efecto fijo de cada consumidor, o el nivel promedio de actividad en creditación y canje, respectivamente, independiente de las demás covariables. Los parámetros \\(\\alpha_{t}\\) y \\(\\gamma_{t}\\) representan un efecto fijo temporal en los niveles de acreditación y canje, respectivamente, cuya interpretación dependerá de la definición de las variable que acompañe (si las covariables son meses representaría estacionalidad, mientras que si es fecha o año representaría alguna tendencia en los nvieles anteriores). Al estar las constantes \\(\\alpha\\) y \\(\\gamma\\), junto con los parámetros anteriores, se produce un problema de colinealidad y por lo tanto los parámetros no son identificables. Para corregirlo, se debe omitir \\(\\alpha\\) y \\(\\gamma\\), u omitir \\(\\alpha_{i}\\) y \\(\\gamma_{i}\\) para un individuo y especificar dummies desde \\(i=1\\) hasta \\(i=I-1\\). Sabemos que \\(\\mathbb{E}(Y|X)=X&#39;\\hat{\\beta}_{OLS}\\). Luego, el balance promedio se obtiene como: \\[\\mathbb{E}(\\sum_{\\tau=1}^{t}A_{\\tau}-\\sum_{\\tau=1}^{t}C_{\\tau}|X,Z)=\\sum_{\\tau=1}^{t}(\\alpha_{i}+\\alpha_{t}+X&#39;\\beta)-\\sum_{\\tau=1}^{t}(\\gamma_{i}+\\gamma_{t}+Z&#39;\\rho) + \\epsilon_{i}\\] Se debe incorporar una interacción entre las variables de Mail y Género. Se debe transformar la variable categórica en dummies y omitir uno de los niveles para no tener variables colineales. Se debe construir la variable logaritmo de antigüedad como \\(ln(Año_{t}-AñoIngreso_{t})\\)\\[ X&#39;\\beta = \\beta_1 Mail_i Genero_i + \\beta_2 1_{[categoria_i = Gold]} + \\beta_3 1_{[categoria_i = Premium]} \\\\ + \\beta_4 ln(Año_t - AñoIngreso_t) + \\epsilon&#39;_i\\] Las variables que son significativas independiente del modelo en el que fueron estimadas, y que permiten explicar el comportamiento de interés, es decir, Ingreso, Promoción, y TiendasPropias. El parámetro asociado al medio TarjetaBancaria fue fijado en cero (para evitar problemas de colinealidad), y como el resto de los parámetros son positivos, es aquel en que menos puntos se acreditan. La respuesta dependerá del criterio de evaluación. Si se quiere evaluar en cuanto a la capacidad de ajuste, el mejor es aquel con mayor \\(R^{2}\\) Ajustado (M3), pero si se evalúa en cuanto a la capacidad de pronóstico, se prefiere aquel con menor MAPE (M2). 2.4.4 Problema 4 Las tecnologías tradicionales de búsqueda basadas en texto han sido durante mucho tiempo uno de los pilares del comercio electrónico, permitiendo a los usuarios ingresar palabras clave para encontrar productos. Sin embargo, en un entorno de comercio digital en rápida evolución, donde el comportamiento del consumidor se orienta hacia experiencias más interactivas y multimedia, están ganando terreno tecnologías de búsqueda más avanzadas. En particular, la búsqueda visual representa un avance innovador, que permite a los consumidores iniciar búsquedas utilizando imágenes en lugar de texto. Al cargar una imagen en la herramienta de búsqueda, los algoritmos más avanzados de aprendizaje profundo analizan sus características visuales para identificar y recuperar productos relevantes. Estos mecanismos sofisticados generan sugerencias amplias, que incluyen productos similares y ofertas relacionadas de otras marcas. Las plataformas líderes han sido fundamentales en el desarrollo y perfeccionamiento de la búsqueda visual. Pinterest fue pionera en esta tecnología en 2014, permitiendo a los usuarios seleccionar segmentos de una imagen para encontrar contenido visualmente similar. Otros actores relevantes, como Google (con Google Lens) y Bing (con Bing Visual Search), han desarrollado tecnologías similares. Grandes minoristas como Amazon y Aliexpress también han adoptado esta funcionalidad para mejorar la precisión del emparejamiento. La reducción en los costos tecnológicos han facilitado su acceso, permitiendo que proveedores emergentes como Impresee y Visidea ofrezcan soluciones de búsqueda visual fácilmente integrables en sitios de comercio electrónico. En este problema buscaremos comparar la búsqueda visual con la búsqueda tradicional basada en texto, en términos de comportamiento de clics y conversiones. El análisis empírico se basa en un conjunto de datos que abarca más de 2 millones de búsquedas realizadas por cerca de 50.000 usuarios. Complementamos esta base con etiquetas y métricas de similitud derivadas de avances recientes en visión computacional, lo que nos permite controlar por la complejidad de las imágenes y la similitud entre la imagen de entradas y los productos resultantes. Estadísticas preliminares indican que, en comparación con las búsquedas por texto, las búsquedas por imagen presentan una mayor tasa de clics (CTR), y que los clics se concentran más en los resultados mejor posicionados. Este patrón podría sugerir que quienes buscan por imagen estarían en etapas más avanzadas del proceso de compra, con menor necesidad de explorar alternativas. Sin embargo, al analizar las conversiones, el mayor CTR no parece traducirse en un aumento de ventas, de modo que las búsquedas por texto están asociadas con tasas de conversión más altas. Plantee un modelo de regresión para describir el número de clics del usuario i en el producto j en la instancia de búsqueda k, que permita entender las diferencias dependiendo de si la búsqueda se realiza usando imágenes o texto. Para eso considere que: El ranking o posición en el listado de búsqueda afecta en los clics de modo que los productos listados primero tienen muchos más clics que aquellos listados después. Notar que la tasa a la que se degradan los clics con el ranking es distinta dependiendo de que la búsqueda sea por imágenes o texto. La complejidad de la búsqueda importa en los clics generados. Para las búsquedas por texto, la complejidad se puede capturar a partir del largo del texto. Para las imágenes se puede medir por el tamaño de la imagen. Cada producto tiene una propensión a clics base distinta. Hay algunos productos populares que tienen a recibir más clics que otros menos populares, independientemente de los inputs de la búsqueda. A partir de sus resultados de regresión, ¿Cómo determinaría (explique con sus palabras) si el número total de clics generado por un producto en la quinta posición en una búsqueda por imágenes es mayor que los generados por el producto en la quinta posición de una búsqueda por texto? Considere que los modelos de regresión confirman que, aunque haya un efecto en clics, este no se traduce en más conversiones. A la luz de este resultado, parece interesante estudiar si las búsquedas de imágenes quizás generan búsquedas adicionales que generen más conversiones. Esto es, que las imágenes sean usadas en una etapa temprana del embudo de compras, ayudando a encontrar la categoría de productos, las que después se refinarían haciendo búsquedas tradicionales de texto. Formule un modelo de regresión que permita identificar si una búsqueda de imagen aumenta o no el número de búsquedas siguientes. Para esto, suponga que para cada instancia de búsqueda k del usuario i, se puede calcular \\(NNextSearch_{ik}\\), que cuenta el número total de búsquedas hechas por el mismo usuario, dentro de la misma categoría, durante el mismo día de la búsqueda k. Para su modelo de regresión considere que, junto con el tipo de búsqueda, debe controlar por: La categoría de productos, considerando que cada búsqueda se asocia principalmente a una única categoría, y cada categoría de productos tiene una mayor o menor propensión a ser buscadas. Por ejemplo, la categoría juguetes en general tiene más búsquedas que la categoría colchones. El número de resultados reportados en la búsqueda NumResult y el número de categorías distintas reportadas en la búsqueda NumProdCat. Considere que tanto NumResult como NumProdCat ya están calculados en la base de trabajo. El número de búsquedas diarias que en promedio hace el cliente AvgNumSearch (que puede suponer conocido). Suponga que, después de un par de iteraciones, se ha determinado que existen dos especificaciones de modelos lineales que funcionan relativamente bien, como indican los resultados de la Tabla 1. ¿Cómo interpreta los resultados de la variable NumResult en el contexto de esta aplicación? ¿Cómo interpreta el dramático aumento en el valor de \\(R^2_{adj}\\) entre las especificaciones (1) y (2)? Tabla 1: Resultados de modelos de regresión próximas búsquedas: Variable dependiente: ln(#SubsequentSearch+1) Coefficient (1) (2) IMAGE -4.595*** (0.012) -0.375*** (0.007) NumResult -0.081*** (0.000) -0.003*** (0.000) NumProdCategory 0.031*** (0.001) 0.00138** (0.000588) LogImageSize -0.075*** (0.018) 0.001 (0.010) NumImageObject 0.023* (0.011) -0.003 (0.007) NumImageLabel 0.055*** (0.017) 0.003 (0.010) KeywordLength -0.018*** (0.000) -0.001*** (0.000) AvgNumSearch 1.85E-6*** (6.86E-8) -1.03E-7** (3.28E-8) Fixed Effects (1) (2) User — Yes Product Category — Yes Fit Statistics (1) (2) Observations 1,715,495 1,715,495 Adj. R² 0.19 0.825 Solución Incluimos una variable con \\(Ranking_{ijk}\\) y su interacción con el tipo de búsqueda. Notar que hay dos tipos de búsqueda de carácter dummy. Para modelarlo, se debe incorporar un coeficiente para cada tipo (Imagen y texto). Hay que incluir el tamaño de la imagen \\(ImageSize_{ik}\\) y el largo del texto \\(TextLength_{ijk}\\). Hay que incluir un efecto fijo por producto \\(\\alpha_k\\). Así, si \\(C_{ijk}\\) es el númeroe de clics que recibe el producto j en la búsqueda k del cliente i, el modelo queda descrito como: \\[C_{ijk} = \\alpha_k + \\beta_1 Image_{ik} + \\beta_2 Rank_{ijk} + \\beta_3 Image_{ik} Rank_{ijk} \\\\ + \\beta_4 Image_{ik} ImageSize_{ik} + \\beta_5 (1-Image_{ik}) TextLength_{ik} + \\epsilon_{ijk}\\] Se puede utilizar un test F para evaluar que el grupo de variables de \\(Image\\), \\(Ranking\\) y \\((1-Image)\\) sean distintos en su conjunto. Si llamamos a \\(CAT_{ihk}\\) a las dummy que toman el valor 1 si la búsqueda k del usuario i está asociada a la categoría h, entonces el modelo de regresión puede escribirse como: \\[ NNextSearch_{ik} = (\\sum_h \\alpha_h CAT_{ihk}) + \\beta_1 Image_{ik} + \\beta_2 NumResult_{ik} + \\beta_3 NumProdCat_{ik} \\\\ + \\beta_4 AvgNumSearch_i + \\epsilon_{ik} \\] Los coeficientes son significativamente negativos en ambas especificaciones. En el contexto de la aplicación, esto sugiere que aquellas búsquedas que generan más resultados, están relacionadas a un menor número de búsquedas posteriores. La diferencia entre las especificaciones (1) y (2) es que la segunda tiene efectos fijos, tanto por usuario como por categoría de producto. Como esta segunda especificación tiene un \\(R^2_{adj}\\) mucho mayor, concluimos que la categoría y el usuario explican gran parte de la variabilidad en el número de búsquedas posteriores. 2.4.5 Problema 5 Una de las características más relevantes de los ambientes de negocio contemporáneos, es la disponibilidad de grandes cantidades de información respecto al comportamiento de clientes. Es así como día a día aparecen nuevas fuentes de información que las compañías están constantemente incorporando a sus plataformas de analítica avanzada. Whileus es un conglomerado que tiene la representación de varias marcas internacionales con un centenar de tiendas en el país y está interesado en investigar si los datos derivados del uso de dispositivos móviles pueden ayudar a entender el volumen de ventas de las distintas tiendas. Para eso ha firmado un acuerdo de colaboración con una importante compañía de telecomunicaciones que posee datos de tráfico, posición y uso de aplicaciones de varios de millones de clientes en todo el territorio nacional, que podría ser informativa respecto la demanda de las marcas de Whileus. El propósito del acuerdo es evaluar, en el plazo de un mes y a través de un prototipo a cargo de la empresa de telecomunicaciones, si la incorporación de estas nuevas variables permite generar aprendizajes valiosos para el estudio de la demanda de las tiendas de Whileus. En la primera semana del piloto y después de una reunión técnica entre los equipos de Whileus con la empresa de telecomunicaciones se acuerda extraer los datos de los data lakes de las respectivas compañías a nivel de zona censal. Esto se fundamenta porque la provisión de datos de movilidad de individuos específicos podría poner en entredicho el uso de información privada de los usuarios. Así, luego de consolidar las bases de datos, se han propuesto los siguientes modelos de regresión para describir el número de visitas a la tienda k desde la zona censal i en la semana t \\(q_{ikt}\\). \\[ q_{ikt} = \\alpha_i^1 + \\beta_t^1 + \\gamma^1 d_{ik} + \\theta^1 z_k + \\varepsilon_{ikt}^1 \\tag{1} \\] \\[ q_{ikt} = \\alpha_k^2 + \\beta_t^2 + \\gamma^2 d_{ik} + \\theta^2 w_i + \\varepsilon_{ikt}^2 \\tag{2} \\] En estas especificaciones, \\(d_{ik}\\) corresponde al logaritmo de la distancia entre la tienda k y el centroide de la zona censal i, mientras que \\(z_k\\) y \\(w_i\\) son un conjunto de características de la tienda k y la zona censal i respectivamente. Para esta primera iteración se ha considerado que \\(z_k\\) incluye la superficie de la tienda, un conjunto de variables binarias para denotar la marca y una última variable binaria para indicar si la tienda se encuentra dentro de un centro comercial o no. Para las variables de la zona censal, se ha considerado que \\(w_i\\) incluye el número de habitantes, la comuna en la que habita la zona censal, la fracción de usuarios que tienen instalada una app de las marcas y una variable binaria para indicar si la zona censal está a menos de 250 metros de alguna estación de metro. Comente las ventajas teóricas de cada una de las formulaciones. Si prefiere, puede responder la pregunta argumentando en qué escenarios prefería una formulación y en cuales preferiría la otra. En la Tabla 1 se despliegan los resultados de un primer ejercicio de regresión para los dos modelos anteriormente planteados. Por simplicidad, se ha considerado solo una muestra de tiendas y zonas censales. Como el modelo se ha estimado usando una técnica de descentrado, los efectos fijos no se reportan en la Tabla 1. ¿Cómo es posible que, usando los mismos datos, las ecuaciones 1 y 2 nos reporten distintos estimadores del efecto de la distancia en la demanda de cada zona censal por cada marca? ¿Qué información necesita para cnstruir un intervalo de confianza para el efecto que tiene la superficie de la tienda en su demanda? Si fuera posible, reporte el valor numérico de este intervalo de confianza usando los datos de la tabla. Si el objetivo del análisis sería tener el pronóstico más preciso de la demanda en cada tienda, ¿cómo elegiría entre estos dos modelos? ¿Cómo testearía si hay diferencias significativas en la demanda por marca? Tabla 1: Resultados modelos alternativos de regresión. Variable Ecuación 1 Ecuación 2 Log-Distancia -2.123 *** -2.817 *** Superficie 0.234 * Marca A 0.245 . Marca B 1.567 ** Marca C 0.453 . Mall 2.145 *** Nhabitantes 3.234 *** Fracusuarios 0.881 ** Providencia 1.233 ** Santiago 0.029 Macul -0.913 * La Florida -0.372 . Estación Central -1.409 * Metro 1.199 *** Ecuación 1 Ecuación 2 Fixed Effects Zona Censal Yes No Tienda No Yes N. Obs 34,207 34,207 R2 0.234 0.489 Adj. R2 0.233 0.482 *p-val &lt; 0.1, **p-val &lt;0.05, ***p-val &lt;0.01 Para evaluar la capacidad de los modelos para apoyar la gestión del negocio, el equipo de desarrollo quiere generar algunos pronósticos con la demanda para la próxima semana para cuatro tiendas seleccionadas. Para esto, necesita ajustar la propuesta inicial de modo que los efectos temporales sean controlados por una lista de variables temporales \\(z_t\\) que incluyen un pronóstico del clima, tendencia, estacionalidad mensual, la intensidad de la actividad promocional de la marca, así como la intensidad de la actividad promocional de otras marcas competidoras. Considerando que variables como el clima y la actividad promocional son inciertas, se ha generado un reporte con tres escenarios: uno pesimista, uno neutro y otro optimista. Mientras en el escenario neutro se considera que las variables independientes toman valores típicamente observados, los escenarios pesimistas y optimistas se evalúan en combinaciones más extremas que favorecen y desfavorecen la demanda respectivamente. Los pronósticos generados se despliegan en la Tabla 2. Tabla 2: Pronóstico de demanda para cuatro tiendas seleccionadas. Tienda Ecuación 1 Ecuación 2 Pesimista Neutro Optimista Pesimista Neutro Optimista Tienda A01 316,6 (11,8) 345,1 (7,2) 392,1 (12,1) 318,5 (12,2) 352,1 (6,7) 387,7 (10,9) Tienda A12 555,8 (12,2) 578,8 (8,1) 602,2 (11,8) 547,6 (11,0) 566,3 (9,1) 607,7 (11,6) Tienda B09 834,4 (14,3) 888,9 (9,2) 965,4 (13,3) 811,4 (15,9) 874,9 (8,9) 954,7 (13,8) Tienda B14 733,9 (13,6) 786,6 (8,4) 822,3 (12,8) 728,6 (11,5) 791,9 (8,7) 817,8 (12,6) En la tabla anterior, junto con los pronósticos se despliegan los errores estándar de pronóstico (sef). Explique por qué los sef son en general menores en los escenarios neutros. Habiendo revisado la primera ronda de resultados, el equipo de desarrollo se inclina por concentrarse en el modelo dado por la ecuación 1. Sin embargo, a partir de la retroalimentación de los gerentes de tienda, se reconoce que hay varios elementos adicionales que deben incorporarse. Formule un modelo de regresión lineal que expanda la ecuación (1) pero que considere los siguientes factores: Las tiendas en los centros comerciales suelen ser más grandes, por lo que es esperable que la superficie de la tienda tenga una influencia distinta dependiendo si la tienda está o no en un mall. Para zonas censales relativamente cercanas, la distancia es un buen indicador del costo de acceder. Sin embargo, si la distancia es mayor que \\(d*\\), entonces es mejor considerar el tiempo de viaje \\(v_{ik}\\). El efecto de la cercanía al metro es distinto si la tienda está en un mall o no. En la muestra hay marcas que son de destino u otras de conveniencia. Una marca de destino se caracteriza por clientes muy leales dispuestos a viajar con el propósito principal de visitar la tienda de esa marca. Por su parte, las marcas de conveniencia son visitadas principalmente por clientes que se encuentran con la tienda al paso. Considere que, en el modelo, el efecto del tiempo de viaje depende de si la marca es de destino o conveniencia. La variable \\(Fracusuarios_i\\) se define como la fracción de habitantes de la zona censal i que tiene instalada alguna app de cualquiera de las marcas de Whileus al momento de hacer el pronóstico. Los resultados de la Tabla 2 indican que, entre mayor es el número de usuarios de las aplicaciones móviles, mayor es la demanda de esa zona censal. Sin embargo, es esperable que esta variable sea endógena. Es decir, que no sea el uso de las aplicaciones las que empujan la demanda, sino que es la demanda la que impulsa el uso de las aplicaciones. Sugiera alguna modificación al modelo para aminorar la endogeneidad del uso de las aplicaciones. Solución La diferencia principal es que uno describe el efecto de características de las tiendas (Ecuación 1), mientras que la otra describe el efecto de las características de la zona censal (Ecuación 2). Preferiría (1) si el foco está en entender qué características de la tienda inciden en el tráfico, y preferiría (2) si el foco está en entender qué características de las zonas censales son las que generan más tráfico. Cada pregunta tiene respuestas bastante directas: Los estimadores dan cuenta del valor esperado de la variable dependiente condicional en la realización de las otras variables. Cada vez que cambiamos el conjunto de las variables sobre las que se condiciona, es esperable que cambien los estimadores. Necesitamos (una estimación de) los errores estándares. Como no están reportados en la tabla, no podemos calcular su valor numérico. Si el objetivo es pronóstico, habría que calibrar el modelo en una muestra de calibración y evaluarlo en una muestra retenida de validación. La evaluación típicamente consideraría métricas como MAE o MAPE. Por medio de una prueba F. Por ejemplo, si queremos evaluar si hay diferencia entre las marcas A y C, podemos testear la hipótesis lineal \\(\\beta_A - \\beta_C = 0\\). Los errores estándares de pronóstico dependen de las variables explicativas. Técnicamente el error de pronóstico considera tanto un error residual como uno de sampleo. Este último crece al alejarse de los valores típicos de sampleo. La ecuación 1, por extensión puede escribirse como: \\[ q_{ikt} = \\alpha_k^2 + \\beta_t^2 + \\gamma^2 d_{ik} + \\theta^{2&#39;}(\\text{Superficie}_k, B_k, C_k, Mall_k) + \\varepsilon_{ikt}^2 \\] Donde el 2 es un superíndice para indicar que provienen del segundo modelo, \\(B_k\\) y \\(C_k\\) son variables binarias que indican la marca de cada tienda (para que sea identificable, tenemos que eliminar una marca). Sobre este modelo debemos: Agregar \\(\\text{Superficie}_k \\cdot Mall_k\\) en la función que integra \\(\\theta^{2&#39;}\\). Reemplazar el término de la distancia por \\(\\gamma_1^2 d_{ik} 1_{[d_{ik}&lt;d^*]} + \\gamma_2^2 v_{ik} 1_{[d_{ik}&gt;d^*]}\\). Agregar \\(Metro_i \\cdot Mall_k\\). Agregar \\(v_{ik} \\cdot Conveniencia_k \\cdot 1_{[d_{ik}&gt;d^*]}\\) (donde \\(Conveniencia_k = 1\\) si marca es de conveniencia) y \\(v_{ik} \\cdot (1-Conveniencia_k) \\cdot 1_{[d_{ik} \\leq d*]}\\). Aunque hay otras ideas admisibles, el fraseo de la pregunta parece sugerir la solución más directa que es agregar la dinámica de adopción. Esto es, agregar un índice temporal a la variable \\(Fracusuarios_{it}\\) de modo de representar como varía en el tiempo. Así, podemos ver cómo cambia la demanda en periodos de mayor o menor uso de las aplicaciones. Observaciones: Un nivel mayor de sofisticación podría sugerir usar \\(Fracusuarios_{it-1}\\) y/o \\(Fracusuarios_{it-2}\\). La inclusión de rezagos presupone que la adopción antecede las compras. Esta especificación puede ayudar a aminorar los problemas de endogeneidad, pero no los soluciona del todo. Si hay un momento específico en que se lanza la app, o si hay algunas campañas específicas que solo se promocionan a través de las apps, podrían dar elementos adicionales para reducir la endogeneidad del constructo. "],["modelos-probabilísticos.html", "Capítulo 3 Modelos Probabilísticos 3.1 Introducción 3.2 Metodología 3.3 Problemas Teóricos 3.4 Problemas Aplicados", " Capítulo 3 Modelos Probabilísticos 3.1 Introducción En este capítulo se abarcarán problemas con un enfoque probabilístico, esto es, que se asume que los tomadores de decisiones se comportan de manera aleatoria. Esto permite abordar una gran cantidad de problemas asociados al Marketing, los cuales se pueden caracterizar en tres tipos de modelos básicos: Duración: La pregunta clave es ¿Cuándo? Son situaciones ligadas a la duración de una determinada conducta del cliente, como por ejemplo: tiempo de permanencia en una compañía, tiempo de adopción de un cierto producto innovador, entre otros. Puede ser con tiempo continuo, o discreto. Conteo: La pregunta clave es ¿Cuántos? Son situaciones ligadas al estudio de llegadas de clientes y contabilización de una determinada conducta, como por ejemplo: número de visitas a un portal web y la cantidad de productos comprados en una tienda de retail. Elección: La pregunta clave es ¿Cuál? Son situaciones asociadas a las decisiones de elección de un determinado cliente, como por ejemplo: clientes que eligen responder (o no) a una campaña publicitaria y la elección de cambiar (o no) de canal de televisión. Cada uno se estos modelos tiene muchas aplicaciones dentro de diversas situaciones en la vida real. Comportamientos más complejos pueden ser descritos usando combinaciones de los modelos básicos. No obstante, nos centraremos en la resolución de problemas utilizando alguno de estos tres. 3.2 Metodología Dicho enfoque posee una metodología de modelamiento sugerida, que comparten los modelos vistos a lo largo del curso. La metodología consiste en: Determinar el problema de decisión a estudiar y la información requerida. Identificar el comportamiento observable de interés a nivel individual. Típicamente, se denota con una \\(x\\). Seleccionar la distribución de probabilidad que caracterice el comportamiento individual. Se consideran los parámetros de esta distribución, como características latentes a nivel individual. Típicamente, se denota con \\(f(x|\\theta)\\). Escoger la distribución que caracterice cómo las características latentes están distribuidas en la población. Se le llama distribución mixta o heterogénea. Típicamente, se denota con \\(g(\\theta)\\) Derivar la distribución agregada, o distribución observable, del comportamiento de interés. \\[\\begin{array}{cc} f(x) = \\int f(x|\\theta) g(\\theta) d\\theta &amp; \\text{, para el caso continuo.}\\\\ p(x) = \\sum_{i} f(x|\\theta)Pr(\\theta = \\theta_{i}) &amp; \\text{ , para el caso discreto.} \\end{array}\\] Estimar los parámetros del modelo (de la distribución mixta), mediante el ajuste de la distribución agregada a los datos observados. Usar los resultados para tomar una decisión sobre el problema de marketing en cuestión. 3.3 Problemas Teóricos 3.3.1 E1: Tasa de respuesta Una compañía de venta de ropa por cat́alogo busca decidir a que segmento enviar los cat́alogo de la próxima colección. Para ello analiza la tasa de respuesta de una muestra de clientes de cada segmento (esto es el ratio entre número de clientes que compra y número de catálogos enviados). Al mirar el primer segmento observa que de los 18 clientes a quienes se les envió el catálogo, ninguno compró y por tanto decide no enviar catálogos a ningún cliente de ese segmento. Esta compañía: Muy probablemente esté subestimando la tasa de respuesta de ese segmento. Debiera redefinir los criterios de segmentación para hacer grupos más grandes y accionables. Ha definido una política que da cuenta de su aversión al riesgo. Debiera usar un modelo de duración en tiempo continuo con dependencia en la duración. Debiera incorporar variables explicativas en su modelo predictivo. 3.3.2 E2: Distribución Weibull En relación a la distribución Weibull: Es un caso particular de la Poisson. Es una generalización de la Poisson. Sólo tiene un parámetro \\(c\\). Es muy flexible y permite incluso generar distribuciones bimodales. Ninguna de las anteriores. 3.3.3 E3: Distribución Gamma y Heterogeneidad ¿Cuál de los siguientes factores motivan la utilización de una distribución Gamma para modelar la heterogeneidad de las tasas de adopción en un modelo de duración en tiempo continuo? (Puede elegir más de un factor). Consistencia con el dominio de la probabilidad de abandono en cada período. Para generar una fórmula recursiva de fácil implementación. Flexibilidad para acomodar distintas formas de la distribución. Para generar una fórmula cerrada que pueda ser calculada de manera computacionalmente eficiente. 3.3.4 E4: Modelos de Duración ¿Cuáles de los siguientes modelos NO describe la duración de la relación de los clientes con una firma? Beta-geométrica desplazada. Beta-geométrica NBD. Gamma-Weibull. Binomial Negativa. Ninguna de las anteriores. 3.3.5 E5: Modelo NBD Un modelo NBD describe la demanda de botellas de oporto en los últimos 6 meses. Si con este modelo se estima la demanda del próximo mes: Hay que hacer un modelo de regresión que considere la dinámica del problema. El cálculo no se puede hacer directamente, sin embargo podemos recalibrar el modelo considerando un horizonte de un mes. El histograma del número de botellas consumidas por cliente se moverá a la izquierda. La probabilidad de comprar \\(x\\) botellas resulta ser simplemente 1/6 veces las probabilidades calculadas para el primer semestre. Ninguna de las anteriores. 3.3.6 E6: Modelos de Conteo Un analista propone el uso de modelos de conteo para describir la intensidad de la participación de los usuarios de la red social Twitter. Los parámetros que describen el comportamiento de los usuarios han sido estimados usando datos de 4 días de actividad. El modelo ajusta extremadamente bien. Sin embargo, al usar las estimaciones para pronosticar la actividad del quinto día el modelo no ajusta bien. Al respecto se debiera concluir que: Se debe agregar la data para considerar la actividad agregada en todo el horizonte. Probablemente el comportamiento de los usuarios en el quinto día esté afectado por factores que no están presentes en los primeros cuatro días. Hay que calcular esperanzas condicionales. Los supuestos de comportamiento son errados y hay que desechar el modelo. Todas las anteriores. 3.3.7 E7: Tiempo discreto en Modelos de Duración En la práctica, siempre podemos discretizar el tiempo y por lo tanto no hay motivos para usar modelo de duración en tiempo continuo. Discuta respecto de la veracidad de esta afirmación. Para eventos con gran variabilidad de tiempos de ocurrencia, un modelo de tiempo discreto podría requerir un número muy grande de periodos para describir el apropiadamente comportamiento bajo estudio. Si el comportamiento tiene dependencia en la duración, dichas dependencias son fáciles de incluir en un modelo de tiempo continuo. 3.4 Problemas Aplicados Problema 1 Hippi es una empresa nacional dedicada a la fabricación de productos para alta montaña. La empresa cuenta con una base de datos que registra la compras que sus clientes en cada temporada y busca estudiar el numero de parkas que los clientes compraran en la temporada. Para esto, se ha formulado un modelo probabilístico donde el comportamiento de los clientes se describe como: Cada cliente compra un numero de parkas X que sigue una distribución geométrica. Esto es,condicional en el parámetro p de cada cliente, la función de probabilidad esta dada por: \\[Pr(X = x|p) = p(1-p)^x\\] - Los clientes son heterogéneos en su parámetro p el que esta distribuido en la población de acuerdo a una distribución Beta: \\[g(p|\\alpha,\\beta) = \\frac{1}{B(\\alpha,\\beta)} p^{\\alpha - 1}(1-p)^{\\beta-1}\\] Se puede mostrar que la distribución de el número de compras para un cliente en la población, y su respectiva esperanza están dadas por: \\[Pr(X=x) = \\frac{B(\\alpha + 1, \\beta + x)}{B(\\alpha,\\beta)} \\qquad \\mathbb{E}(X) = \\frac{\\alpha}{\\beta - 1}\\] Siguiendo la convención adoptada en el curso, llamamos a este modelo Beta-Geométrico. Muestre que la penetración de mercado (fracción de clientes que compró al menos una unidad) puede expresarse como \\(\\frac{\\beta}{\\alpha+\\beta}\\). Usando el método de los momentos, estime los parámetros del modelo. Para ello considere que la penetración de mercado es del 60 % y que el numero promedio de parkas que compra un cliente (incluyendo aquellos que no compraron) es igual a 2.5. Se desea extender el modelo para que además incluya un segmento de clientes que nunca compra. Para este segmento de clientes, \\(Pr(X = 0) = 1\\). Sea \\(\\pi\\) la proporción de estos clientes en la población, y \\((1-\\pi)\\) el segmento de clientes que se comporta de acuerdo al modelo Beta-Geométrico descrito anteriormente. Suponga que conoce \\(x_i\\), el numero de compras hechas por cada cliente i en la base de datos (i = 1, …, n). Deduzca la función de verosimilitud que utilizaría para estimar el modelo. Solución Muestre que la penetración de mercado (fracción de clientes que compró al menos una unidad) puede expresarse como \\(\\frac{\\beta}{\\alpha+\\beta}\\). Respuesta: La penetración p viene dada por: \\[\\begin{align*} p_0 &amp;= 1 - Pr(X = 0) \\\\ &amp;= 1 - \\frac{B(\\alpha + 1, \\beta)}{B(\\alpha,\\beta)}\\\\ &amp;= 1 - \\frac{\\Gamma(\\alpha +1)\\Gamma(\\beta)}{\\Gamma(\\alpha+ 1 +\\beta)} \\frac{\\Gamma(\\alpha + \\beta)}{\\Gamma(\\alpha) \\Gamma(\\beta)}\\\\ &amp;= 1 - \\frac{\\alpha\\Gamma(\\alpha) \\Gamma(\\beta)}{(\\alpha+\\beta) \\Gamma(\\alpha+\\beta)}\\frac{\\Gamma(\\alpha + \\beta)}{\\Gamma(\\alpha) \\Gamma(\\beta)}\\\\ &amp;= 1 - \\frac{\\alpha}{\\alpha + \\beta} = \\frac{\\beta}{\\alpha + \\beta} \\end{align*}\\] Usando el método de los momentos, estime los parámetros del modelo. Para ello considere que la penetración de mercado es del 60 % y que el numero promedio de parkas que compra un cliente (incluyendo aquellos que no compraron) es igual a 2.5. Respuesta: Resolvemos el siguiente sistema: \\[\\begin{eqnarray} 0,6 &amp;= \\frac{\\beta}{\\alpha + \\beta} \\\\ 2,5 &amp;= \\frac{\\alpha}{\\beta-1} \\end{eqnarray}\\] Resolviendo el sistema: \\[\\hat{\\alpha} = \\frac{10}{11} \\qquad \\hat{\\beta} = \\frac{15}{11}\\] Se desea extender el modelo para que además incluya un segmento de clientes que nunca compra. Para este segmento de clientes, \\(Pr(X = 0) = 1\\). Sea \\(\\pi\\) la proporción de estos clientes en la población, y \\((1 - \\pi)\\) el segmento de clientes que se comporta de acuerdo al modelo Beta-Geométrico descrito anteriormente. Suponga que conoce \\(x_i\\), el numero de compras hechas por cada cliente i en la base de datos (i = 1, …, n). Deduzca la función de verosimilitud que utilizaría para estimar el modelo. Sea \\(n_x\\) el número de clientes que compra x parkas. Entonces, la verosimilitud puede escribirse como: \\[L(\\alpha,\\beta,\\pi |x) = \\prod_{x=0}^{\\infty} Pr = (X=x|\\alpha,\\beta,\\pi)^{n_x}\\] donde, \\[\\begin{array}{cc} Pr(X=x|\\alpha,\\beta,\\pi) &amp; = \\pi Pr(X=x|\\text{ no adopta}) + (1 - \\pi) Pr (X = x |\\text{ puede adoptar})\\\\ &amp; = \\begin{cases} \\pi + (1-\\pi) \\frac{B(\\alpha+1,\\beta)}{B(\\alpha,\\beta)} &amp; x=0 \\\\ (1-\\pi)\\frac{B(\\alpha+1,\\beta+x)}{B(\\alpha,\\beta)} &amp; x&gt;0 \\end{cases} \\end{array}\\] Problema 2 La startup chilena “NotComida” es una exitosa empresa enfocada en el diseño y manufactura de productos alimenticios basados en plantas que funcionan como sucedáneos cercanos a otros productos de origen animal (leche, helado, carne). El área de Marketing está interesada en conocer el comportamiento de compra de sus clientes. Para esto, cuenta con un panel de datos que describe las instncias de compra durante los últimos 12 meses: Variable Descripción Media IdCliente Identificador de cliente Mes Mes {enero,febrero,…,diciembre} Año Año Catgoría Categoría de productos {Hamburguesas, Leche, Helados} Tienda Identificador de la tienda dónde se realizó la compra Edad Edad del panelista 31.3 Mujer 1 si la panelista se identifica como mujer 0.51 Ingreso Ingreso mensual declarado por el panelista [millones CLP] 0.56 Zona Oriente 1 si el panelista vive en la zona oriente de Santiago 0.11 NCompras Número de compras en esa categoría y mes 2.34 \\[ \\textbf{Tabla 1: } \\text{Descripción base de ventas NotComida.} \\] Proponga un modelo de regresión de Poisson en que lla tasa de compra depende de cada individuo, categoría, tienda y semana. Escriba la log-verosimilitud del problema considerando que \\(n_{icst}\\) es el número de unidades compradas por el cliente \\(i\\) en la categoría \\(c\\) en la tienda \\(s\\) el mes \\(t\\). Para esto, considere que: Existe un efecto fijo por categoría y uno por tienda. El género induce diferencias relevantes en las ventas y el efecto del género es distinto para la zona oriente de la capital. Existe una tendencia creciente en las ventas. Como el crecimiento es relativamente pequeño, puede modelarse con un efecto fijo a nivel de año. Aunque en el consumo es relativamente constante, a lo largo del año, hay dos categorías que presentan una estacionalidad relevante. Mientras los helados tienen un patrón marcadamente diferente en los meses de diciembre, enero y febrero, las hamburguesas declinan sus ventas en el mes de septiembre. Suponga que, para la categoría \\(c = Hamburguesas\\), existen dos clases latentes. Un segmento de alto consumo y otro de consumo ocasional. Para acomodar esta regularidad, se propone un modelo sencillo en que la tasa de compra de un cliente \\(i\\), independiente del mes, viene dado por: \\[log(\\lambda_i)= \\beta_{0i}+ \\beta_1 MUJER_i + \\beta_2 INGRESO_i\\] Donde \\(\\beta_{0i}\\) toma el valor \\(-1\\) con probabilidad \\(0.4\\) u el valor \\(0.5\\) con probabilidad \\(0.6\\). En otras palabras, el tamaño del segmento 1 de los clientes ocasionales representa al 40% de la población mientras que los clientes activos representan el 60% de la población. ¿Cuál es la probabilidad de que un cliente hombre, con un ingreso de MM$1 que no compra en un mes (\\(n_i=0\\)) pertenezca al segmento 1? Solución Proponga un modelo de regresión de Poisson en que lla tasa de compra depende de cada individuo, categoría, tienda y semana. Escriba la log-verosimilitud del problema considerando que \\(n_{icst}\\) es el número de unidades compradas por el cliente \\(i\\) en la categoría \\(c\\) en la tienda \\(s\\) el mes \\(t\\). Para esto, considere que: Existe un efecto fijo por categoría y uno por tienda. El género induce diferencias relevantes en las ventas y el efecto del género es distinto para la zona oriente de la capital. Existe una tendencia creciente en las ventas. Como el crecimiento es relativamente pequeño, puede modelarse con un efecto fijo a nivel de año. Aunque en el consumo es relativamente constante, a lo largo del año, hay dos categorías que presentan una estacionalidad relevante. Mientras los helados tienen un patrón marcadamente diferente en los meses de diciembre, enero y febrero, las hamburguesas declinan sus ventas en el mes de septiembre. Sea \\(N_{icst}\\) la variable aleatoria que define la cantidad que de productos que compra el cliente \\(i\\) en la categoría \\(c\\) en la tienda \\(s\\) el mes \\(t\\), y sea \\(\\lambda_{icst}\\) la tasa de compras asociada a la variable anterior. Al ser un modelo de regresión de Poisson, su distribución es: \\[ Pr(N_{icst}= n_{icst}) = \\frac{\\lambda_{icst}^{n_{icst}}e^{-\\lambda_{icst}} }{n_{icst}!} \\] Donde la tasa \\(\\lambda_{icst}\\) viene dada por una regresión lineal. El objetivo es especificar esta tasa. Según las consideraciones pedidas (en específico, las condiciones (c) y (d)), definimos: \\(\\delta_{ta}=1\\) si el mes \\(t\\) pertenece al año \\(a\\). \\(\\Delta_{ct}^1 =1\\) si \\(c=Helado\\) y \\(t \\in \\{ Diciembre, Enero,Febrero \\}\\). \\(\\Delta_{ct}^2 = 1\\) si \\(c=Hamburguesa\\) y \\(t=Septiembre\\). Entonces, la tasa de compra puede escribirse como \\[ \\log(\\lambda_{icst}) = \\alpha_c + \\alpha_s + \\beta_1 MUJER_i + \\beta_2 MUJER_i \\cdot ZORIENTE_s + \\sum_{a} \\gamma_a \\delta_{ta} + \\theta_1 \\Delta_{ct}^1 + \\theta_2 \\Delta_{ct}^2 \\] Con esto, la log-verosimilitud viene dada por:_ \\[ LL = \\sum_{i,c,s,t} \\ln(Pr(N_{icst}=n_{icst}))= \\sum_{i,c,s,t} \\ln \\left( \\frac{\\lambda_{icst}^{n_{icst}}e^{-\\lambda_{icst}} }{n_{icst}!}\\right) \\] 2. ¿Cuál es la probabilidad de que un cliente hombre, con un ingreso de MM$1 que no compra en un mes (\\(n_i=0\\)) pertenezca al segmento 1? Las tasas de compra de los dos segmentos vienen dadas por: \\[ log(\\lambda_{i1}) = -1 + \\beta_1 MUJER_i + \\beta_2 INGRESO_i = -1 + 0 + \\beta_2 \\Rightarrow \\lambda_{i1} = e^{\\beta_2 -1}\\\\ log(\\lambda_{i2}) = 0.5 + \\beta_1 MUJER_i + \\beta_2 INGRESO_i = 0.5 + 0 + \\beta_2 \\Rightarrow \\lambda_{i1} = e^{\\beta_2 +0.5} \\] Por lo tanto, aplicando la distribución de Poisson, la probabilidad de no comprar en cada segmento viene dados por: \\[ \\Pr(n_i = 0 | s_1) = {\\lambda}^0_{i1}e^{-\\lambda_{i1}} = \\exp(-e^{(\\beta_2 -1)}) \\\\ \\Pr(n_i = 0 | s_2) = {\\lambda}^0_{i2} e^{-\\lambda_{i2}} = \\exp(-e^{(\\beta_2 +0.5)}) \\] Entonces. aplicando la regla de Bayes: \\[ \\Pr(s_1|n_i = 0) = \\frac{\\Pr(n_i = 0 | s_1) \\Pr(s_1)}{\\Pr(n_i = 0 | s_1) \\Pr(s_1) + \\Pr(n_i = 0 | s_2) \\Pr(s_2)} \\] Donde \\(\\Pr(s_1) = 0.4\\) y \\(\\Pr(s_2)=0.6\\). Problema 3 Para revitalizar el interés de los usuarios, Pokémon Go está pensando introducir 7 nuevos personajes Pokémon en las comunas de Melipilla, Talagante, Pirque, Colina, Alhue, Paine, Lampa y Buin. Para estudiar el impacto en el atractivo del juego, los desarrolladores han estado realizando pruebas para ver el interés de los jugadores en estos nuevos personajes. Las pruebas se han desarrollado sobre una muestra de jugadores de acuerdo a los números desplegados en la siguietne tabla: Pokemon Melipilla Talagante Pirque Colina Alhue Paine Lampa Buin Total Wigglytuff 5 834 504 117 763 424 387 683 3,717 Slowbrow 24 975 8 342 715 362 788 793 4,007 Lickitung 101 651 200 993 562 614 691 595 4,407 Chansley 198 517 960 788 441 844 836 438 5,022 Tangela 79 990 756 868 210 944 509 233 4,589 Ditto 69 587 96 365 182 634 373 419 2,725 Phanpy 138 969 971 890 586 764 585 361 5,264 \\[ \\textbf{Tabla 2: } \\text{Número de veces que un determinado pokemón fue mostrado a un jugador.} \\] Hay dos parámetros relevantes para entender el grado de interacción entre jugadores y personajes. El primer parámetro corresponde a \\(q_{k}\\) que corresponde a la probabilidad de atrapar a un personaje, condicional de que un jugador intente atraparlo. Aunque est probabilidad es relevante para saber en qué medida los usuarios aumentan su mazo, el parámestro es ajusatado internamente en la plataforma y por tanto no hay incertidumbre desde el punto de vista de los usuarios. El segundo parámetro que denominamos como \\(p_k\\), mide la probabilidad que un usuario intente atrapar un personaje \\(k\\) si este le aparee disponible en la aplicación móvil. Desde el punto de vista de la jugabilidad es importante disponibilizar personajes que los usuarios quieran atrapar. Para entender el comportamiento de esta intención de atrapar personajes, la Tabla despliega el número de intentos para los personajes y comunas que forman parte del estudio piloto: Pokemon Melipilla Talagante Pirque Colina Alhue Paine Lampa Buin Total Wigglytuff 0 218 98 39 31 63 26 43 518 Slowbrow 8 186 4 110 393 79 240 113 1,133 Lickitung 8 47 13 98 183 180 219 60 808 Chansley 49 31 274 24 48 91 205 42 764 Tangela 14 294 71 35 59 304 116 2 895 Ditto 14 180 14 110 33 84 0 10 445 Phanpy 4 19 66 189 9 37 92 33 449 \\[ \\textbf{Tabla 3: } \\text{Número de veces que un jugador intentó atrapar a un determinado pokemón.} \\] A partir de los datos presentados: Use el método de los momentos para estimar un modelo binomial sin heterogeneidad que caracterice la probabilidad que un usuario intente atrapar a wigglytuff. Escriba ahora un modelo que incorpore heterogeneidad para caracterizar la probabilidad que un número de usuarios intente atrapar a un pokemón \\(k\\) en una comuna \\(c\\). Escriba la log-verosimilitud del modelo anterior, para entender la popularidad de cada uno de los personajes del estudio. Solución Use el método de los momentos para estimar un modelo binomial sin heterogeneidad que caracterice la probabilidad que un usuario intente atrapar a wigglytuff. Definimos una variable aleatoria que signifique lo buscado \\[ X_{w} := \\text{# de usuarios que intentan atrapar a wigglytuf} \\] Tenemos un número de experimentos Bernoulli (# de personas a las que se les muestra wigglytuf) y un número de “éxitos” entre estos experimentos (# de personas que intentan atrapar a wigglytuf cuando se les muestra) que ocurren con alguna probabilidad desconocidad \\(p_w\\) fija, ya que nos piden el caso homogéneo (único valor). Por lo tanto, tenemosq ue la probabilidad que queremos caracterizar sería de la forma: \\[ P(X_w = x_w) = {n_w \\choose x_w} p_{w}^{x_w} (1-p_w)^{n_w - x_w} \\] Donde \\(n_w\\) es la cantidad de personas alas que se les mostró el pokemón (dato en la primera Tabla). Esdecir, \\(X_w \\thicksim Bin(n_w,p_w)\\). Sabemos que el primer momento de una distribución es su media y que la media de una binomial es \\(n_w p_W\\). Por otro lado, estimamos el valor de la media con algún promedio muestras (con muestras del mismo tamaño) de número de personas que intentaron atrapar a wigglytuf, pero en este caso este númer es único, por lo que usamos este valor (total de personas que intentaron atrapar a wigglytuf de la Tabla 5), en este caso 518. Por lo tanto, odemos obtener la probabilidad \\(p_w\\) con la igualdad del primer momento: \\[ 518 = n_w p_w \\\\ 518 = 3717 p_w \\\\ p_w \\approx 0,1393 \\] Esto tiene mucho sentido, ya que estamos obteniendo la probabilidad de manera empírica con la fracción de personas que intentaron atraparlo y el número de personas a las que se les mostró. Escriba ahora un modelo que incorpore heterogeneidad para caracterizar la probabilidad que un número de usuarios intente atrapar a un pokemón \\(k\\) en una comuna \\(c\\). Como debemos considerar heterogeneidad, ahora el parámetro de la distribución que nos intersa, \\(p_k\\), n lo asumimos com único, sino que sigue una distribución. Como el parámetro es una probabilidad (\\(p_k \\in [0,1]\\)), utilizamos la distribución a priori \\(Beta(\\alpha_k,\\beta_k)\\), con \\(\\alpha_k\\) y \\(\\beta_k\\) parámetros a estimar (\\(p_k \\thicksim Beta(\\alpha_k , \\beta_k)\\), por eso el sub \\(k\\), ya que cada pokemón tiene un probabilidad \\(p_k\\) asociada, y no tienen por qué seguir la misma distribución). Luego, tenemos que cada comuna nos va a estar aportando en realidad datos sobre la heterogeneidad existente para cada pokemón (sería el equivalente a tener distintas observaciones para distintos individuos). Así, la probabilidad quedaría, para cada pokemón y comuna, con la v.a. anterior, pero segmentando por comuna: \\[ P(X_{k,c} = x_{k,c}) = \\int_0^1 P(X_{k,c} = x_{k,c} | p_k)Beta(p_k|\\alpha_k, \\beta_k) dp_k \\\\ = \\int_0^1 \\left( {n_{k,c} \\choose x_{k,c}} p_{k}^{x_{k,c}} (1-p_{k})^{n_{k,c} - x_{k,c}}\\right) \\left(\\frac{p_k^{\\alpha_k -1} (1-p_k)^{\\beta_k -1}}{B(\\alpha_k,\\beta_k)} \\right) dp_k\\\\ ={n_{k,c} \\choose x_{k,c}} \\frac{B(\\alpha_k + x_{k,c},\\beta_k + n_{k,c}- x_{k,c})}{B(\\alpha_k,\\beta_k)} \\] Escriba la log-verosimilitud del modelo anterior, para entender la popularidad de cada uno de los personajes del estudio. Nos interesa analizar cada personaje por separado, por lo tanto vamos a tener una expresión de la log-verosimilitud del parámetro \\(p_k\\) para cada pokemón. Luego, la muestra que tenemos de la v.a. en cuestión para cada pokemón \\(k\\) es de la forma \\(\\{ x_{k,1},x_{k,2},...,x_{k,7} \\}\\), donde el segundo índice es para cada una de las comunas. Sigue que la log-verosimilitud es el logaritmo de la función de verosimilitud con esta muestra para cada pokemón: \\[ \\ell (p_k | x_{k,1}, ..., x_{k,8}) = \\ln (\\mathcal{L}(p_k | x_{k,1}, ..., x_{k,8})) \\\\ = \\ln(P(X_{k,1}=x_{k,1}, ...,X_{k,8}=x_{k,8} |p_k)) \\\\ = \\ln \\left( \\prod_{c=1}^8 P(X_{x,c} = x_{x,c}|p_k) \\right) \\\\ = \\sum_{c=1}^8 \\ln(P(X_{k,c}=x_{k,c}|p_k)) \\\\ = \\sum_{c=1}^8 \\ln \\left( {n_{k,c} \\choose x_{k,c}}\\frac{B(\\alpha_k + x_{k,c},\\beta_k + n_{k,c}- x_{k,c})}{B(\\alpha_k,\\beta_k)} \\right) \\] Esta es la expresión pedida de la log-verosimilitud para cada pokemón k. En el tercer paso asumimos indepndencia de las v.a. entre columnas y en el último paso reemplazamos por la expresión encontrada en la parte anterior. 3.4.1 Problema 4 Inmersos en la era digital, los consumidores están cada vez conectados en distintos dispositivos los cuales pueden ser usados como canales durante el proceso de compra. En este contexto, algunas empresas han decidido lanzar aplicaciones móviles que funcionan en base a información georreferenciada de los dispositivos de sus clientes, y que permiten enviarles promociones personalizadas cuando identifica que este se encuentra cercano a un punto de venta. La aplicación que más éxito ha tenido en el mercado, quiere evaluar la efectividad de las campañas que envían a sus usuarios, y así poder ofrecer un mejor servicio a las empresas que lo contratan. Para esto, cuenta con información de los \\(m_{i}\\) mensajes promocionales que envía al cliente \\(i\\), y el número \\(x_{i}\\) de esos que son efectivamente utilizados por el cliente. Plantee un modelo de elección para determinar la probabilidad de respuesta de cada cliente, en cada ocasión de compra. En particular, Escriba la log-verosimilitud del problema. Sea \\(N\\) el número de clientes. Si se observa el comportamiento por \\(T\\) períodos y en promedio se envían \\(M\\) promociones por cliente, ¿cuántos parámetros deben estimarse? Sea \\(X_{i}\\) el número de veces que la persona \\(i\\) hace efectivo un cupón. La probabilidad de respuesta es: \\[\\mathbb{P}(X_{i}=x_{i}|p_{i})=\\binom{m_{i}}{x_{i}}p_{i}^{x_{i}}(1-p_{i})^{m_{i}-x_{i}}\\] donde log-verosimilitud viene dada por: \\[LL(p)=\\sum_{i}ln(\\binom{m_{i}}{x_{i}}p_{i}^{x_{i}}(1-p_{i})^{m_{i}-x_{i}})\\] Se deben estimar \\(N\\) parámmetros. Uno por cada cliente (esto por supuesto sugiere que es necesario un mecanismo alternativo para describir las probabilidades de respuesta en la población, como en la siguiente pregunta). Considere que se cuenta con información demográfica de los usuarios de la aplicación móvil, como edad, Ingreso y frecuencia de uso de la app. Reformule el modelo anterior incorporando variables explicativas considerando además que existe un segmento de clientes que realiza pocos canjes y otro que realiza muchos (es decir, un segmento canjeador C y otro no-canjeador N). Hint: Recuerde que si \\(x\\in\\mathbb{R}\\), entonces \\(\\frac{exp(x)}{1+exp(x)}\\in(0,1)\\). Se necesita un modelo de elección con dos segmentos. Sea \\(p_{iC}\\) la probabilidad de canje del individuo \\(i\\) si pertenece al segmento canjeador y \\(p_{iN}\\) si pertenece al segmento no-canjeador. Entonces, si \\(\\pi\\) es la fracción de clientes canjeadores, el modelo con dos segmentos puede escribirse como: \\[\\mathbb{P}(X_{i}=x_{i}|\\beta,\\pi)=\\pi[\\binom{m_{i}}{x_{i}}p_{iC}^{x_{i}}(1-p_{iC})^{m_{i}-x_{i}}]+(1-\\pi)[\\binom{m_{i}}{x_{i}}p_{iN}^{x_{i}}(1-p_{iN})^{m_{i}-x_{i}}]\\] donde \\[\\begin{align} p_{iC}&amp;=\\frac{exp(\\beta&#39;_{C}z_{i})}{1+exp(\\beta&#39;_{C}z_{i})}\\\\ p_{iN}&amp;=\\frac{exp(\\beta&#39;_{N}z_{i})}{1+exp(\\beta&#39;_{N}z_{i})} \\end{align}\\] por lo que finalmente se tiene \\[LL=\\sum_{i}ln(\\pi[\\binom{m_{i}}{x_{i}}p_{iC}^{x_{i}}(1-p_{iC})^{m_{i}-x_{i}}]+(1-\\pi)[\\binom{m_{i}}{x_{i}}p_{iN}^{x_{i}}(1-p_{iN})^{m_{i}-x_{i}}])\\] Suponga que se ha estimado el modelo anterior y se encuentra que los segmento canjeadores y no-canjeadores tienen el mismo tamaño y que los parámetros asociados a las variables explicativas son tales que para un usuario \\(i\\) con un vector de variables explicativas \\(z_{i}\\), \\(\\beta&#39;_{C}x_{i}=ln(2)\\) y \\(\\beta&#39;_{N}x_{i}=ln(1/2)\\). Si al usuario le han enviado dos promociones y ha canjeado las dos, ¿cuál es la probabilidad que este usuario pertenezca al segmento de canjeadores? Para ello, aplicamos probabilidades condicionales \\[\\mathbb{P}(C|X_{i}=2)=\\frac{\\mathbb{P}(X_{i}=2|C)\\mathbb{P}(C)}{\\mathbb{P}(X_{i}=2|C)\\mathbb{P}(C)+\\mathbb{P}(X_{i}=2|N)\\mathbb{P}(N)}\\] donde \\[\\begin{align} \\mathbb{P}(X_{i}=2|C)&amp;=\\binom{2}{2}[\\frac{exp(\\beta&#39;_{C}z_{i})}{1+exp(\\beta&#39;_{C}z_{i})}]^{2}[\\frac{1}{1+exp(\\beta&#39;_{C}z_{i})}]^{2-2}=\\frac{4}{9}\\\\ \\mathbb{P}(X_{i}=2|N)&amp;=\\binom{2}{2}[\\frac{exp(\\beta&#39;_{N}z_{i})}{1+exp(\\beta&#39;_{N}z_{i})}]^{2}[\\frac{1}{1+exp(\\beta&#39;_{N}z_{i})}]^{2-2}=\\frac{1}{9} \\end{align}\\] Finalmente, considerando que \\(\\mathbb{P}(C)=\\mathbb{P}(N)=1/2\\), tenemos que: \\[\\mathbb{P}(C|X_{i}=2)=\\frac{4/9\\cdot1/2}{4/9\\cdot1/2+1/9\\cdot1/2}=\\frac{4}{5}\\] Suponga ahora que del total de \\(m_{i}\\) mensajes que recibe un usuario este lee \\(n_{i}\\) de ellos. De los \\(n_{i}\\) mensajes que efectivamente lee, decide canjear \\(x_{i}\\) de ellos. Modele el comportamiento anteriormente descrito como un modelo integrado elección-elección. Plantee explícitamente la probabilidad de canje y la log-verosimilitud del problema. La probabilidad de leer un mensaje queda descrita por un modelo binomial: \\[\\mathbb{P}(N_{it}=n_{it}|p_{leer})=\\binom{m_{i}}{n_{i}}p_{leer}^{n_{i}}(1-p_{leer})^{m_{i}-n_{i}}\\] Para la probabilidad de canje, usando probabilidades totales: \\[\\begin{align} \\mathbb{P}(X_{i}=x_{i}|p_{canjear})&amp;=\\sum_{n_{i}=x_{i}}^{m_{i}}\\mathbb{P}(X_{i}=x_{i}|p_{canjear},n_{i})\\mathbb{P}(N_{i}=n_{i}|p_{leer})\\\\ &amp;=\\binom{n_{i}}{x_{i}}p_{canjear}^{x_{i}}(1-p_{canjear})^{n_{i}-x_{i}}\\binom{m_{i}}{n_{i}}p_{leer}^{n_{i}}(1-p_{leer})^{m_{i}-n_{i}} \\end{align}\\] Finalmente, la log-verosimilitud del problema está dada por: \\[LL=\\sum_{i}\\sum_{t}ln(\\mathbb{P}(X_{i}=x_{i}|p_{canjear}))\\] "],["modelos-estructurales.html", "Capítulo 4 Modelos Estructurales 4.1 Introducción 4.2 Problemas 4.3 Soluciones", " Capítulo 4 Modelos Estructurales 4.1 Introducción 4.2 Problemas 4.3 Soluciones "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
