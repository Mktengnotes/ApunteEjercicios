<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 2 Modelos de Regresión | Apunte Problemas Resueltos</title>
  <meta name="description" content="Apunte de ejercicios realizados durante el curso de Marketing II" />
  <meta name="generator" content="bookdown 0.44 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 2 Modelos de Regresión | Apunte Problemas Resueltos" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Apunte de ejercicios realizados durante el curso de Marketing II" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 2 Modelos de Regresión | Apunte Problemas Resueltos" />
  
  <meta name="twitter:description" content="Apunte de ejercicios realizados durante el curso de Marketing II" />
  

<meta name="author" content="Marcel Goic" />


<meta name="date" content="2025-09-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="formulas-utiles.html"/>
<link rel="next" href="modelos-probabilísticos.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Apunte de Problemas Resueltos</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prologo</a></li>
<li class="chapter" data-level="1" data-path="formulas-utiles.html"><a href="formulas-utiles.html"><i class="fa fa-check"></i><b>1</b> Formulas utiles</a></li>
<li class="chapter" data-level="2" data-path="02-regresion.html"><a href="#modelos-de-regresi%C3%B3n"><i class="fa fa-check"></i><b>2</b> Modelos de Regresión</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-regresion.html"><a href="#introducci%C3%B3n"><i class="fa fa-check"></i><b>2.1</b> Introducción</a></li>
<li class="chapter" data-level="2.2" data-path="02-regresion.html"><a href="#metodolog%C3%ADa"><i class="fa fa-check"></i><b>2.2</b> Metodología</a></li>
<li class="chapter" data-level="2.3" data-path="02-regresion.html"><a href="#problemas-te%C3%B3ricos"><i class="fa fa-check"></i><b>2.3</b> Problemas Teóricos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html"><i class="fa fa-check"></i><b>2.3.1</b> E1: Signo esperado y significancia</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-regresion.html"><a href="#e2-regresi%C3%B3n-lineal-vs-de-poisson"><i class="fa fa-check"></i><b>2.3.2</b> E2: Regresión Lineal vs de Poisson</a></li>
<li class="chapter" data-level="2.3.3" data-path="02-regresion.html"><a href="#e3-selecci%C3%B3n-autom%C3%A1tica-de-variables"><i class="fa fa-check"></i><b>2.3.3</b> E3: Selección automática de variables</a></li>
<li class="chapter" data-level="2.3.4" data-path="02-regresion.html"><a href="#e4-regresi%C3%B3n-log-nivel-y-log-log"><i class="fa fa-check"></i><b>2.3.4</b> E4: Regresión Log-Nivel y Log-Log</a></li>
<li class="chapter" data-level="2.3.5" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#e5-capturar-efectos"><i class="fa fa-check"></i><b>2.3.5</b> E5: Capturar efectos</a></li>
<li class="chapter" data-level="2.3.6" data-path="02-regresion.html"><a href="#e6-coeficientes-y-par%C3%A1metros"><i class="fa fa-check"></i><b>2.3.6</b> E6: Coeficientes y Parámetros</a></li>
<li class="chapter" data-level="2.3.7" data-path="02-regresion.html"><a href="#e7-qu%C3%A9-es-un-modelo-de-regresi%C3%B3n"><i class="fa fa-check"></i><b>2.3.7</b> E7: ¿Qué es un modelo de Regresión?</a></li>
<li class="chapter" data-level="2.3.8" data-path="02-regresion.html"><a href="#soluci%C3%B3n-problemas-te%C3%B3ricos"><i class="fa fa-check"></i><b>2.3.8</b> Solución problemas teóricos</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problemas-aplicados"><i class="fa fa-check"></i><b>2.4</b> Problemas Aplicados</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problema-1"><i class="fa fa-check"></i><b>2.4.1</b> Problema 1</a></li>
<li class="chapter" data-level="2.4.2" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problema-2"><i class="fa fa-check"></i><b>2.4.2</b> Problema 2</a></li>
<li class="chapter" data-level="2.4.3" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problema-3"><i class="fa fa-check"></i><b>2.4.3</b> Problema 3</a></li>
<li class="chapter" data-level="2.4.4" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problema-4---p1-control-1-primavera-2025"><i class="fa fa-check"></i><b>2.4.4</b> Problema 4 - P1 Control 1 Primavera 2025</a></li>
<li class="chapter" data-level="2.4.5" data-path="02-regresion.html"><a href="#problema-5---p1-control-oto%C3%B1o-2025"><i class="fa fa-check"></i><b>2.4.5</b> Problema 5 - P1 Control Otoño 2025</a></li>
<li class="chapter" data-level="2.4.6" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problema-6---p1-control-primavera-2024"><i class="fa fa-check"></i><b>2.4.6</b> Problema 6 - P1 Control Primavera 2024</a></li>
<li class="chapter" data-level="2.4.7" data-path="02-regresion.html"><a href="#problema-7---p1-control-1-oto%C3%B1o-2024"><i class="fa fa-check"></i><b>2.4.7</b> Problema 7 - P1 Control 1 Otoño 2024</a></li>
<li class="chapter" data-level="2.4.8" data-path="modelos-de-regresión.html"><a href="modelos-de-regresión.html#problema-8---p1-control-primavera-2023"><i class="fa fa-check"></i><b>2.4.8</b> Problema 8 - P1 Control Primavera 2023</a></li>
<li class="chapter" data-level="2.4.9" data-path="02-regresion.html"><a href="#problema-9---p1-control-oto%C3%B1o-2023"><i class="fa fa-check"></i><b>2.4.9</b> Problema 9 - P1 Control Otoño 2023</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="02-regresion.html"><a href="#modelos-probabil%C3%ADsticos"><i class="fa fa-check"></i><b>3</b> Modelos Probabilísticos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="02-regresion.html"><a href="#introducci%C3%B3n-1"><i class="fa fa-check"></i><b>3.1</b> Introducción</a></li>
<li class="chapter" data-level="3.2" data-path="02-regresion.html"><a href="#metodolog%C3%ADa-1"><i class="fa fa-check"></i><b>3.2</b> Metodología</a></li>
<li class="chapter" data-level="3.3" data-path="02-regresion.html"><a href="#problemas-te%C3%B3ricos-1"><i class="fa fa-check"></i><b>3.3</b> Problemas Teóricos</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html"><i class="fa fa-check"></i><b>3.3.1</b> E1: Tasa de respuesta</a></li>
<li class="chapter" data-level="3.3.2" data-path="02-regresion.html"><a href="#e2-distribuci%C3%B3n-weibull"><i class="fa fa-check"></i><b>3.3.2</b> E2: Distribución Weibull</a></li>
<li class="chapter" data-level="3.3.3" data-path="02-regresion.html"><a href="#e3-distribuci%C3%B3n-gamma-y-heterogeneidad"><i class="fa fa-check"></i><b>3.3.3</b> E3: Distribución Gamma y Heterogeneidad</a></li>
<li class="chapter" data-level="3.3.4" data-path="02-regresion.html"><a href="#e4-modelos-de-duraci%C3%B3n"><i class="fa fa-check"></i><b>3.3.4</b> E4: Modelos de Duración</a></li>
<li class="chapter" data-level="3.3.5" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#e5-modelo-nbd"><i class="fa fa-check"></i><b>3.3.5</b> E5: Modelo NBD</a></li>
<li class="chapter" data-level="3.3.6" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#e6-modelos-de-conteo"><i class="fa fa-check"></i><b>3.3.6</b> E6: Modelos de Conteo</a></li>
<li class="chapter" data-level="3.3.7" data-path="02-regresion.html"><a href="#e7-tiempo-discreto-en-modelos-de-duraci%C3%B3n"><i class="fa fa-check"></i><b>3.3.7</b> E7: Tiempo discreto en Modelos de Duración</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#problemas-aplicados-1"><i class="fa fa-check"></i><b>3.4</b> Problemas Aplicados</a>
<ul>
<li class="chapter" data-level="" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#problema-1-1"><i class="fa fa-check"></i>Problema 1</a></li>
<li class="chapter" data-level="" data-path=""><a href="#soluci%C3%B3n"><i class="fa fa-check"></i>Solución</a></li>
<li class="chapter" data-level="" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#problema-2-1"><i class="fa fa-check"></i>Problema 2</a></li>
<li class="chapter" data-level="" data-path=""><a href="#soluci%C3%B3n-1"><i class="fa fa-check"></i>Solución</a></li>
<li class="chapter" data-level="" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#problema-3-1"><i class="fa fa-check"></i>Problema 3</a></li>
<li class="chapter" data-level="" data-path=""><a href="#soluci%C3%B3n-2"><i class="fa fa-check"></i>Solución</a></li>
<li class="chapter" data-level="3.4.1" data-path="modelos-probabilísticos.html"><a href="modelos-probabilísticos.html#problema-4"><i class="fa fa-check"></i><b>3.4.1</b> Problema 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modelos-estructurales.html"><a href="modelos-estructurales.html"><i class="fa fa-check"></i><b>4</b> Modelos Estructurales</a>
<ul>
<li class="chapter" data-level="4.1" data-path="02-regresion.html"><a href="#introducci%C3%B3n-2"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="modelos-estructurales.html"><a href="modelos-estructurales.html#problemas"><i class="fa fa-check"></i><b>4.2</b> Problemas</a></li>
<li class="chapter" data-level="4.3" data-path="modelos-estructurales.html"><a href="modelos-estructurales.html#soluciones"><i class="fa fa-check"></i><b>4.3</b> Soluciones</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Apunte Problemas Resueltos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modelos-de-regresión" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Capítulo 2</span> Modelos de Regresión<a href="#modelos-de-regresi%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introducción" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Introducción<a href="#introducci%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En este capítulo se abarcarán problemas relacionados a modelos de
regresión; es decir, aquellos modelos donde la variable dependiente <span class="math inline">\(y\)</span>
se escribe como:</p>
<p><span class="math display">\[
y = f(\textbf{X})= \beta^´X + \varepsilon
\]</span>donde <span class="math inline">\(\textbf{X}\)</span> corresponde a las variables explicativas, <span class="math inline">\(\beta^´\)</span>
son los parámetros que buscamos para estudiar la influencia de las
vairables explicativas en la variable dependiente; o mejor dicho, la
influencia de las variaciones en las variables explicativas en las
variaciones de la variable depndiente, y <span class="math inline">\(\varepsilon\)</span> es el error
aleatorio.</p>
<p>Los modelos de regresión tienen la ventaja de ser fáciles de implementar
e interpretar, pero se debe tener cuidado al momento de construir,
evaluar e interpretar estos modelos. A partir de los datos que uno
observa, existen infinitos modelos de regresión para explicar una
variable <span class="math inline">\(y\)</span>. Un buen modelo encuentra el balance entre su complejidad y
poder explicativo.</p>
</div>
<div id="metodología" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Metodología<a href="#metodolog%C3%ADa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Como mencionabámos anteriormente, para poder crear y utilizar los
modelos de regresión que nos permite responder de la manera más
informada las preguntas de:</p>
<ol style="list-style-type: decimal">
<li><p>Definir el nivel de agregación de las variables apropiado para el
problema en cuestión, ya sea una agregación temporal (datos diarios,
semanales, mensuales, anuales) o lógicos (agregación por producto,
categoría, marca, tienda), como también definir los índices de los
parámetros del modelo</p></li>
<li><p>Elegir las variables explicativas a considerar para el modelo,
realizar las transformaciones según lo solicitado por el problema de
gestión.</p></li>
<li><p>Decidir si se incluirán interacciones entre las variables
explicativas, como también si posee un efecto fijo (como también
definir los índices de estos efectos).</p></li>
<li><p>Evaluar los modelos a partir de distintas métricas, ya sean
genéricas (<span class="math inline">\(R^2\)</span>, <span class="math inline">\(MAE\)</span>, <span class="math inline">\(MAPE\)</span>, <span class="math inline">\(RMS\)</span>) o de verosimilitud
(<span class="math inline">\(\text{Likelihood Ratio}\)</span>, <span class="math inline">\(AIC\)</span>, <span class="math inline">\(BIC\)</span>), escogiendo aquél que, a
partir de las métricas mencionadas, tengan una buena calibración y
una alta capacidad de predicción.</p></li>
<li><p>Interpretar los coeficientes más significativas de un modelo, para
responder la pregunta de gestión original.</p></li>
</ol>
</div>
<div id="problemas-teóricos" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Problemas Teóricos<a href="#problemas-te%C3%B3ricos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="e1-signo-esperado-y-significancia" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> E1: Signo esperado y significancia<a href="modelos-de-regresión.html#e1-signo-esperado-y-significancia" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Al evaluar la inclusión de una variable en base a su signo esperado y
significancia estadística, ¿cuál de los siguientes casos NO es una buena
recomendación para un modelo de pronóstico?</p>
<ol style="list-style-type: lower-alpha">
<li>Si el parámetro tiene el signo esperado y no es significativo:
mantener.</li>
<li>Si el parámetro no tiene el signo esperado y no es significativo:
eliminar.</li>
<li>Si el parámetro no tiene el signo esperado y es significativo:
tratar de hacer ajustes al modelo o juntar más datos y variables.</li>
<li>El parámetro tiene el signo esperado y es significativo: mantener.</li>
<li>Ninguna de las anteriores.</li>
</ol>
</div>
<div id="e2-regresión-lineal-vs-de-poisson" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> E2: Regresión Lineal vs de Poisson<a href="#e2-regresi%C3%B3n-lineal-vs-de-poisson" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>¿Qué diferencia un modelo de regresión simple de un modelo de regresión
de Poisson? (Puede seleccionar más de una opción).</p>
<ol style="list-style-type: lower-roman">
<li>La especificación de la distribución del término de error.</li>
<li>Los métodos disponibles para estimar el modelo.</li>
<li>La naturaleza de la variable dependiente.</li>
<li>La posibilidad de realizar t-tests.</li>
</ol>
</div>
<div id="e3-selección-automática-de-variables" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> E3: Selección automática de variables<a href="#e3-selecci%C3%B3n-autom%C3%A1tica-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cuál de las siguientes afirmaciones caracterizan adecuadamente a la
selección automática de variables para un modelo de regresión lineal
(Puede seleccionar más de una opción):</p>
<ol style="list-style-type: lower-roman">
<li>Vienen predefinidas en planillas de cálculo.</li>
<li>Son siempre peores que selección manual.</li>
<li>Sólo pueden aplicarse sobre el subconjunto de variables continuas.</li>
<li>No consideran todos los modelos posibles.</li>
</ol>
</div>
<div id="e4-regresión-log-nivel-y-log-log" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> E4: Regresión Log-Nivel y Log-Log<a href="#e4-regresi%C3%B3n-log-nivel-y-log-log" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Dado el modelo <span class="math inline">\(ln(y)=\beta_{0}+\beta_{1}x_{1}+b_{2}ln(x_{2})\)</span>, se puede
asegurar que:</p>
<ol style="list-style-type: lower-alpha">
<li>Un aumento de una unidad en <span class="math inline">\(x_{1}\)</span> causa un aumento de <span class="math inline">\(\beta_{0}\)</span>
unidades en <span class="math inline">\(y\)</span>.</li>
<li>Un aumento de una unidad en <span class="math inline">\(x_{2}\)</span> causa un aumento de <span class="math inline">\(\beta_{2}\)</span>%
unidades en <span class="math inline">\(y\)</span>.</li>
<li>Un aumento de un 1% en <span class="math inline">\(x_{2}\)</span> causa un aumento de <span class="math inline">\(\beta_{2}\)</span>
unidades en <span class="math inline">\(y\)</span>.</li>
<li>Un aumento de un 1% en <span class="math inline">\(x_{2}\)</span> causa un aumento de <span class="math inline">\(\beta_{2}\)</span>%
unidades en <span class="math inline">\(y\)</span>.</li>
<li>Ninguna de las anteriores.</li>
</ol>
</div>
<div id="e5-capturar-efectos" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> E5: Capturar efectos<a href="modelos-de-regresión.html#e5-capturar-efectos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>¿Cuál de las siguientes especificaciones NO permite capturar que las
diferencias en el comportamiento <span class="math inline">\(y\)</span> se van incrementando a medida que
aumenta la edad de los sujetos?</p>
<ol style="list-style-type: lower-alpha">
<li><span class="math inline">\(y=\beta_{0}+\sum_{i}\beta_{i}Dummy_{i},\quad i=\{\text{niños, jóvenes, adultos, ancianos}\}\)</span></li>
<li><span class="math inline">\(y=\beta_{0}+\beta_{1}ln(edad)\)</span></li>
<li><span class="math inline">\(y=\beta_{0}+\beta_{1}edad+\beta_{2}edad^{2}\)</span></li>
<li><span class="math inline">\(y=\beta_{0}+\beta_{1}\exp(edad)\)</span></li>
<li>Ninguna de las anteriores.</li>
</ol>
</div>
<div id="e6-coeficientes-y-parámetros" class="section level3 hasAnchor" number="2.3.6">
<h3><span class="header-section-number">2.3.6</span> E6: Coeficientes y Parámetros<a href="#e6-coeficientes-y-par%C3%A1metros" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se tiene el siguiente modelo lineal de venta de productos</p>
<p><span class="math display">\[Q_{ist}=\theta_{s}+\mu_{is}P_{ist}+\gamma t+\epsilon_{ist}\]</span> Donde
<span class="math inline">\(Q_{ist}\)</span> es la cantidad vendida del producto <span class="math inline">\(i\)</span> en la tienda <span class="math inline">\(s\)</span> en el
año <span class="math inline">\(t\)</span> y <span class="math inline">\(P_{ist}\)</span> el precio. El set de datos contiene registros para 5
productos y 5 tiendas entre 1960 y 2015. A partir de esto, se puede
afirmar que (puede elegir más de una opción):</p>
<ol style="list-style-type: lower-roman">
<li>Transformar <span class="math inline">\(\gamma t\)</span> en <span class="math inline">\(\gamma_{t}\)</span> no influye en el modelo ya
que son equivalentes.</li>
<li>Transformar los coeficientes <span class="math inline">\(\mu_{is}\)</span> a <span class="math inline">\(\mu_{i}+\mu_{s}\)</span> implica
calcular menos parámetros.</li>
<li>El modelo no permite capturar comportamiento cíclico de la demanda.</li>
<li>Los parámetros <span class="math inline">\(\theta_{s}\)</span> y <span class="math inline">\(\mu_{is}\)</span> no pueden estimarse
simultáneamente.</li>
</ol>
</div>
<div id="e7-qué-es-un-modelo-de-regresión" class="section level3 hasAnchor" number="2.3.7">
<h3><span class="header-section-number">2.3.7</span> E7: ¿Qué es un modelo de Regresión?<a href="#e7-qu%C3%A9-es-un-modelo-de-regresi%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>¿Cuál(es) es(son) la utilidad de un modelo de regresión?</p>
<ol style="list-style-type: lower-roman">
<li>Permite medir correlación entre variables.</li>
<li>Permite medir la magnitud de una relación causal.</li>
<li>Permite determinar causalidad entre variables.</li>
<li>Dependiendo de la especificación puede determinar causalidad o
correlación, pero no ambas simultáneamente.</li>
</ol>
</div>
<div id="solución-problemas-teóricos" class="section level3 hasAnchor" number="2.3.8">
<h3><span class="header-section-number">2.3.8</span> Solución problemas teóricos<a href="#soluci%C3%B3n-problemas-te%C3%B3ricos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>E1: Signo esperado y Significancia</strong><br />
Respuesta correcta: e.<br />
{ Ninguna de las anteriores. Por ejemplo: no tiene signo esperado y no
es significativo: Mantener}</p>
<p><strong>E2: Regresión Lineal vs de Poisson</strong><br />
Respuestas correctas: i., ii. y iii.<br />
{ La especificación de la distribución del término de error; Los métodos
disponibles para estimar el modelo; La naturaleza de la variable
dependiente }</p>
<p><strong>E3: Selección automática de variables</strong><br />
Respuesta correcta: iv.<br />
{ No consideran todos los modelos posibles }</p>
<p><strong>E4: Regresión Log-Nivel y Log-Log</strong><br />
Respuesta correcta: e.<br />
{ Ninguna de las anteriores. Un 1% de aumento en <span class="math inline">\(x_2\)</span> causa un cambio
en <span class="math inline">\(\beta_2/100\)</span> en y.}</p>
<p><strong>E5: Capturar efectos</strong><br />
Respuesta correcta: b.<br />
{ <span class="math inline">\(y=\beta_{0}+\beta_{1}\ln(edad)\)</span> }</p>
<p><strong>E6: Coeficientes y Parámetros</strong><br />
Respuestas correctas: ii. y iii.<br />
{ Transformar los coeficientes <span class="math inline">\(\mu_{is}\)</span> a <span class="math inline">\(\mu_{i}+\mu_{s}\)</span> implica
calcular menos parámetros; El modelo no permite capturar comportamiento
cíclico de la demanda }</p>
<p><strong>E7: ¿Qué es un modelo de Regresión?</strong><br />
Respuestas correctas: i. y ii.<br />
{ Permite medir correlación entre variables; Permite medir la magnitud
de una relación causal }</p>
</div>
</div>
<div id="problemas-aplicados" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Problemas Aplicados<a href="modelos-de-regresión.html#problemas-aplicados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problema-1" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Problema 1<a href="modelos-de-regresión.html#problema-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Un reconocido grupo empresarial que manufactura productos de aseo y
limpieza de diversa índole le pide a usted evaluar el impacto de la
pandemia en sus ventas a partir del registro obtenido por distintas
tiendas distribuidas a lo largo del país.</p>
<p>El foco del análisis se en la variable <span class="math inline">\(q_{ist}\)</span>, la cual corresponde al
número de unidades vendidas del producto <span class="math inline">\(i\)</span> en la tienda <span class="math inline">\(s\)</span> en el día
<span class="math inline">\(t\)</span>. Junto a las ventas se cuenta con un vector de características
<span class="math inline">\(z_{t}\)</span> que describe cada día <span class="math inline">\(t\)</span>, entre ellas <span class="math inline">\(FDS_t\)</span> que indica si es
un fin de semana y <span class="math inline">\(FER_t\)</span> que indica si el día fue feriado. También, se
tiene el vector <span class="math inline">\(x_{ist}\)</span> con características que varían según producto,
tienda y día, entre ellas <span class="math inline">\(PRECIO_{ist}\)</span> (precio del producto),
<span class="math inline">\(QUAR_{st}\)</span> (si la comunda donde se encuentra la tienda estaba en
caurentena o no).</p>
<ol style="list-style-type: decimal">
<li><p>Formule un modelo de regresión lineal que capture los siguientes
factores:</p>
<ol style="list-style-type: lower-alpha">
<li>Existe un efecto fijo por producto y por tienda, es decir, la
linea base de las ventas es distinto para cada producto
dependiendo de la tienda.</li>
<li>Si un producto no se vende en una tienda en un día dado es
probable que aya un quiebre de stock y si un día hay quiebre, es
probable que el día siguiente el producto siga quebrado.</li>
<li>El conjunto <span class="math inline">\(\mathcal{PN}\)</span> registra todos los productos de la
firma que son de primera necesidad. Las cuarentenass no tienen
efecto en os productos de primera necesidad.</li>
<li>El efecto de las cuarentenas puede ser distinto para las ventas
de un día de semana con respecto a un fin de semana.</li>
<li>El nivel de progresión de las infecciones (<span class="math inline">\(InfMV_{st}\)</span>) afecta
el nivel de ventas.</li>
<li>El nivel de progresión de las infecciones afecta el nivel de
ventas a través de cuñanto han variado las infecciones con
respecto a una semana. Por ejemplo, si hoy hay 100 casos nuevos
y hace una semana había solo 800, entonces ese aumento de 200
casos capturarían una fracción relevante de la relación entre la
progresión de la pandemia y als ventas de los productos de la
firma.</li>
</ol></li>
<li><p>Considere los siguientes dos modelos, los cuales contienen variables
mencionadas anteriormente, junto con otras que no vale la pena
nombrar:</p>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">M1</th>
<th align="center">M2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">…</td>
<td align="center">…</td>
<td align="center">…</td>
</tr>
<tr class="even">
<td align="center">Quar</td>
<td align="center">-0.06 (0.02)</td>
<td align="center">-0.07 (0.01)</td>
</tr>
<tr class="odd">
<td align="center">FER</td>
<td align="center">0.11 (0.03)</td>
<td align="center">0.12 (0.02)</td>
</tr>
<tr class="even">
<td align="center">FDS</td>
<td align="center">0.14 (0.02)</td>
<td align="center">0.13 (0.02)</td>
</tr>
<tr class="odd">
<td align="center">Quar x FER</td>
<td align="center">0.07 (0.02)</td>
<td align="center">0.06 (0.03)</td>
</tr>
<tr class="even">
<td align="center">Quar x FDS</td>
<td align="center">0.06 (0.03)</td>
<td align="center">0.08 (0.01)</td>
</tr>
<tr class="odd">
<td align="center">Npar</td>
<td align="center">23</td>
<td align="center">27</td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R^2\)</span></td>
<td align="center">0.63</td>
<td align="center">0.69</td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(R_{adj.}^2\)</span></td>
<td align="center">0.62</td>
<td align="center">0.61</td>
</tr>
<tr class="even">
<td align="center">RMSE train</td>
<td align="center">0.34</td>
<td align="center">0.33</td>
</tr>
<tr class="odd">
<td align="center">RMSE test</td>
<td align="center">0.34</td>
<td align="center">0.38</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
\textbf{Tabla 1: } \text{Fragmento de parámetros y métricas de ajuste para dos modelos alternativos.} \\
\text{Para los parámetros se reporta el estimador de mínimos cuadrados y en paréntesis el error estándar.} \\
\text{En la tabla, tanto } R^2 \text{ como } Adj. R^2 \text{ han sido calculados sobre la base de entrenamiento.}
\]</span></p>
<p>Además de incluir el valor de los coeficientes, se entrega para cada
modelo 4 métricas de ajuste. ¿Cuál de los dos modelos recomendaría
usar para ver el efecto de las cuarentenas en las ventas?</p></li>
<li><p>Inspeccionando los resultados del modelo de regresión lineal que
consideró en la parte anterior, ¿cómo describiría el rol que han
jugado las cuarentenas en las ventas de la firma?</p></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>Agregamos progresivamente un término adicional a la regresión:</p>
<p><span class="math display">\[
q_{ist} = \alpha_{is} + \beta_1 \cdot \textbf{1}_{[q_{ist-1}= 0]} + \beta_2 \cdot QUAR_{st} \times \textbf{1}_{[i \notin \mathcal{PN}]} + \beta_3 \cdot QUAR_{st} \times FDS_t \\
+ \beta_4 \cdot InfMV_{st}
+ \beta_5 \cdot (InfMV_{st} - InfMV_{st-7})
\]</span></p>
<p><span class="math inline">\(\textbf{Observación:}\)</span> El modelo anterior puede permitir algunas
variantes. Por ejemplo, aunque la condición (a) indique que existe
un factor fijo por tienda y producto, una variante (no tan correcta)
es considerar por separador los factores. Esto es, en vez de tomar
<span class="math inline">\(\alpha_{is}\)</span> se elige <span class="math inline">\((\alpha_{i}+\alpha_{s})\)</span>.</p>
<p>También, al considerar la condición (c) al momento de abordar el
factor en (d), se puede decir que el efecto de las cuarentenas en
los fines de semana no afecta a los productos de primera necesidad
(como lo dice la condición (c)). De este modo, este factor se puede
considerar como
<span class="math inline">\(\beta_3 \cdot QUAR_{st} \times FDS_t \times \textbf{1}_{[i \notin \mathcal{PN}]}\)</span>.</p></li>
<li><p>El modelo 1 es mejor que el modelo 2 en casi todas las métricas
relevantes, excepto en la métrica de <span class="math inline">\(R^2\)</span>. Esto se explica porque
tiene más parámetros y queda corregido al mirar el coeficiente
<span class="math inline">\(R_{adj.}^2\)</span>.</p></li>
<li><p>Para el modelo preferido (1) todos los coeficientes asociados a las
cuarentenas y sus interacciones son significativos y por lo tanto
mirar los estimadores nos dan una razonable primera aproximación.
Acá vemos que las cuarentenas tienen un efecto negativo
siginificativo en reducir las ventas. Sin embargo, este efecto solo
se da en los días de semana. Tanto para feriados como fines de
semana el efecto se va a cero los fines de semana y (marginalmente)
positivo para feriados.</p></li>
</ol>
<hr />
</div>
<div id="problema-2" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Problema 2<a href="modelos-de-regresión.html#problema-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Un cine pequeño quiere impulsar la venta de entradas para este verano.
Para atraer de manera eficiente a los clientes deciden ser selectivos en
las películas que tendrán en cartelera. Para ello, desean determinar las
características de las películas que provocan un mayor ingreso. El
equipo de ventas dispone de un panel de datos con el historial de las
3,800 funciones del año de las 1,250 películas presentadas con los
siguientes datos:</p>
<table style="width:99%;">
<colgroup>
<col width="15%" />
<col width="68%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Descripción</th>
<th align="center">Media</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">I
dFunción</td>
<td align="center">Identificador de la función</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">Fecha</td>
<td align="center">Fecha de la función</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Hora</td>
<td align="center">Hora de la función</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">Película</td>
<td align="center">Nombre de la película a proyectar</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Duración</td>
<td align="center">Duración de la película presentada [en
Minutos]</td>
<td align="center">103.32</td>
</tr>
<tr class="even">
<td align="center">Tipo</td>
<td align="center">Tipo de película presentada {Acción, Comedia,
Romance, Drama, Terror}</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Edad</td>
<td align="center">Restricción de edad de la película {TE, TE+7,
MA+14, MA+18}</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">Estudio</td>
<td align="center">Estudio que produjo la película {Dis, WB,
Para, Uni}</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Pre
supuesto</td>
<td align="center">Presupuesto de la película [en CLP]</td>
<td align="center">160
,200,000</td>
</tr>
<tr class="even">
<td align="center">Ingreso</td>
<td align="center">Ingreso recibido por las entradas vendidas en
la función [en CLP]</td>
<td align="center">714,500</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
\textbf{Tabla 2: } \text{Resumen de ventas para cada función.}
\]</span> Para tener una mejor idea de cómo se ven los datos, se pueden
observar estos 6 registros:</p>
<div style="overflow-x:auto;">
<table>
<thead>
<tr>
<th>
<p>
IdFunción<sub>i</sub>
</p>
</th>
<th>
<p>
Fecha<sub>i</sub>
</p>
</th>
<th>
<p>
Hora<sub>i</sub>
</p>
</th>
<th>
<p>
Película<sub>i</sub>
</p>
</th>
<th>
<p>
Duración<sub>i</sub>
</p>
</th>
<th>
<p>
Tipo<sub>i</sub>
</p>
</th>
<th>
<p>
Edad<sub>i</sub>
</p>
</th>
<th>
<p>
Estudio<sub>i</sub>
</p>
</th>
<th>
<p>
Presupuesto<sub>i</sub>
</p>
</th>
<th>
<p>
Ingreso<sub>i</sub>
</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<p>
14156
</p>
</td>
<td>
<p>
23/07/2022
</p>
</td>
<td>
<p>
19:00
</p>
</td>
<td>
<p>
Odín 4
</p>
</td>
<td>
<p>
105
</p>
</td>
<td>
<p>
Acción
</p>
</td>
<td>
<p>
TE+7
</p>
</td>
<td>
<p>
Dis
</p>
</td>
<td>
<p>
354,970,000
</p>
</td>
<td>
<p>
948,640
</p>
</td>
</tr>
<tr>
<td>
<p>
14157
</p>
</td>
<td>
<p>
23/07/2022
</p>
</td>
<td>
<p>
22:00
</p>
</td>
<td>
<p>
Chillido 5
</p>
</td>
<td>
<p>
132
</p>
</td>
<td>
<p>
Terror
</p>
</td>
<td>
<p>
MA+18
</p>
</td>
<td>
<p>
Para
</p>
</td>
<td>
<p>
135,600,000
</p>
</td>
<td>
<p>
804,300
</p>
</td>
</tr>
<tr>
<td>
<p>
14158
</p>
</td>
<td>
<p>
24/07/2022
</p>
</td>
<td>
<p>
11:00
</p>
</td>
<td>
<p>
Odín 4
</p>
</td>
<td>
<p>
105
</p>
</td>
<td>
<p>
Acción
</p>
</td>
<td>
<p>
TE+7
</p>
</td>
<td>
<p>
Dis
</p>
</td>
<td>
<p>
354,970,000
</p>
</td>
<td>
<p>
893,000
</p>
</td>
</tr>
<tr>
<td>
<p>
14159
</p>
</td>
<td>
<p>
24/07/2022
</p>
</td>
<td>
<p>
15:30
</p>
</td>
<td>
<p>
Desafiar Barreras
</p>
</td>
<td>
<p>
158
</p>
</td>
<td>
<p>
Romance
</p>
</td>
<td>
<p>
MA+14
</p>
</td>
<td>
<p>
WB
</p>
</td>
<td>
<p>
94,500,000
</p>
</td>
<td>
<p>
569,200
</p>
</td>
</tr>
<tr>
<td>
<p>
14160
</p>
</td>
<td>
<p>
24/07/2022
</p>
</td>
<td>
<p>
20:15
</p>
</td>
<td>
<p>
Odín 4
</p>
</td>
<td>
<p>
105
</p>
</td>
<td>
<p>
Acción
</p>
</td>
<td>
<p>
TE+7
</p>
</td>
<td>
<p>
Dis
</p>
</td>
<td>
<p>
354,970,000
</p>
</td>
<td>
<p>
832,150
</p>
</td>
</tr>
<tr>
<td>
<p>
14161
</p>
</td>
<td>
<p>
25/07/2022
</p>
</td>
<td>
<p>
11:00
</p>
</td>
<td>
<p>
Desafiar Barreras
</p>
</td>
<td>
<p>
158
</p>
</td>
<td>
<p>
Romance
</p>
</td>
<td>
<p>
MA+14
</p>
</td>
<td>
<p>
WB
</p>
</td>
<td>
<p>
94,500,000
</p>
</td>
<td>
<p>
452,900
</p>
</td>
</tr>
</tbody>
</table>
</div>
<p><span class="math display">\[
\textbf{Tabla 3: } \text{Ejemplo de 6 registro en Tabla de Ventas.}
\]</span></p>
<ol style="list-style-type: decimal">
<li><p>Nótese que una película puede tener varias funciones y que, debido a
la naturaleza de las variables, el rango de valores y el tipo de
variables son distintos. Debido a esto, elija un nivel de agregación
y transforme las variables de forma que puedan modelar el éxito
total en ventas para cada película.</p></li>
<li><p>El equipo escogió como variable dependiente el logaritmo de la suma
de los ingresos de las funciones para cada película y generó dos
modelos distintos, entregando los siguientes resultados:</p>
<table style="width:96%;">
<colgroup>
<col width="19%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">Modelo 1
Coeficiente</th>
<th align="center">Modelo 1
p-valor</th>
<th align="center">Modelo 2
Coeficiente</th>
<th align="center">Modelo 2
p-valor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Intercepto</td>
<td align="center">-15.2</td>
<td align="center">0.704</td>
<td align="center">3.1</td>
<td align="center">0.161</td>
</tr>
<tr class="even">
<td align="center">Duración</td>
<td align="center">-1.04</td>
<td align="center">0.452</td>
<td align="center">-0.23</td>
<td align="center">0.004</td>
</tr>
<tr class="odd">
<td align="center">log(P
resupuesto)</td>
<td align="center">0.62</td>
<td align="center">0.005</td>
<td align="center">1.15</td>
<td align="center">0.001</td>
</tr>
<tr class="even">
<td align="center">Edad.TE</td>
<td align="center">4.5</td>
<td align="center">0.058</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Edad.TE+7</td>
<td align="center">6.71</td>
<td align="center">0.020</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">Edad.MA+14</td>
<td align="center">5.16</td>
<td align="center">0.017</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Edad.MA+18</td>
<td align="center">4.04</td>
<td align="center">0.009</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">Tipo.Acción</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">4.05</td>
<td align="center">0.520</td>
</tr>
<tr class="odd">
<td align="center">T
ipo.Comedia</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">1.63</td>
<td align="center">0.017</td>
</tr>
<tr class="even">
<td align="center">T
ipo.Romance</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">2.11</td>
<td align="center">0.110</td>
</tr>
<tr class="odd">
<td align="center">Tipo.Drama</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-1.52</td>
<td align="center">0.025</td>
</tr>
<tr class="even">
<td align="center">Tipo.Terror</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">6.72</td>
<td align="center">0.001</td>
</tr>
<tr class="odd">
<td align="center">Estudio.Dis</td>
<td align="center">5.12</td>
<td align="center">0.004</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">Estudio.WB</td>
<td align="center">4.09</td>
<td align="center">0.240</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">Estudio.Uni</td>
<td align="center">3.14</td>
<td align="center">0.104</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">E
studio.Para</td>
<td align="center">-0.63</td>
<td align="center">0.186</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">LL</td>
<td align="center"></td>
<td align="center">-644</td>
<td align="center"></td>
<td align="center">-650</td>
</tr>
<tr class="even">
<td align="center">AIC</td>
<td align="center"></td>
<td align="center">1,304</td>
<td align="center"></td>
<td align="center">1,295</td>
</tr>
<tr class="odd">
<td align="center">BIC</td>
<td align="center"></td>
<td align="center">1,366</td>
<td align="center"></td>
<td align="center">1,350</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
\textbf{Tabla 3: } \text{Parámetros y métricas de ajuste para dos modelos alternativos.}
\]</span></p>
<p>A partir de los datos entregados elija cuál modelo es mejor para
predecir el número de entradas vendidas para una película y entregue
3 argumentos de porqué lo considera mejor.</p></li>
<li><p>Interprete los coeficientes de cada modelo. Según cada modelo, ¿qué
tipo de películas debería presentar el cine para tener mayores
ingresos?</p></li>
<li><p>Suponga que en su base de datos posee también la variable
independiente <span class="math inline">\(NFun\)</span> que representa el número de funciones que
recibió la película en el cine. Proponga un modelo de regresión
lineal que considere siguientes condiciones:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Se debe considerar el efecto marginal por parte de las variables
Presupuesto, Duración, Edad, Tipo, Estudio y <span class="math inline">\(NFun\)</span>.</p></li>
<li><p>Existe un efecto en las ventas que depende simultáneamente del
estudio y el Tipo de película (Por ejemplo, el estudio WB puede
tener más exito con películas de terror, mientras que Dis lo
puede tener con aquellas de acción).</p></li>
<li><p>El éxito de la películas apropiadas para niños (Edad <span class="math inline">\(\in\)</span> {TE,
TE+7}) depende de su duración.</p></li>
</ol></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>Nótese que una película puede tener varias funciones y que, debido a
la naturaleza de las variables, el rango de valores y el tipo de
variables son distintos. Para evaluar el ingreso total en ventas
obtenido por una película, se deben considerar los ingresos a nível
película. De modo que se define el ingreso para la película <span class="math inline">\(j\)</span> como
la suma del éxito de todas sus funciones <span class="math inline">\(i\)</span>:</p>
<p><span class="math display">\[
Ingreso_{j} = \sum_i Ingreso_i \cdot \textbf{1}_{[Nombre_i = j]}
\]</span>Cabe notar que las características de la película
(<span class="math inline">\(Presupuesto_i ,Duración_i ,Tipo_i ,Edad_i ,Estudio_i\)</span>) se
mantienen para cada función <span class="math inline">\(i\)</span> de la película <span class="math inline">\(j\)</span> de modo que
<span class="math inline">\(Presupuesto_j = Presupuesto_i\)</span> para toda función de la película <span class="math inline">\(j\)</span>
(lo mismo para las demás características). De este modo, tenemos un
vector de características por película
(<span class="math inline">\(Presupuesto_j ,Duración_j ,Tipo_j ,Edad_j ,Estudio_j\)</span>).</p>
<p>Finalmente, notemos que los valores de <span class="math inline">\(Ingreso_j\)</span> y <span class="math inline">\(Presupuesto_j\)</span>
son muy elevados en comparación con la variable <span class="math inline">\(Duración_j\)</span>.
Similarmente, el rango no se compara con el valor de las variables
dummy generadas por las categorías <span class="math inline">\(Tipo_j\)</span>, <span class="math inline">\(Edad_j\)</span> y <span class="math inline">\(Estudio_j\)</span>.
Debido a esto, decidimos estudiar el comportamiento del logaritmo de
estos montos: <span class="math inline">\(\log(Ingreso)\)</span> y <span class="math inline">\(\log(Presupuesto_j)\)</span>.</p>
<p>Para ser más claros, la tabla con las transformaciones apropiadas
tendría los 6 registros mostrados anteriormente de la siguiente
manera:</p>
<table style="width:93%;">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"><span class="math inline">\(Pelí
cula_j\)</span></th>
<th align="center"><span class="math inline">\(Dura
ción_j\)</span></th>
<th align="center">$
Tipo_j$</th>
<th align="center">$
Edad_j$</th>
<th align="center"><span class="math inline">\(Est
udio_j\)</span></th>
<th align="center"><span class="math inline">\(log(
Pre_j)\)</span></th>
<th align="center"><span class="math inline">\(log(
Ing_j)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Odín 4</td>
<td align="center">105</td>
<td align="center">Acción</td>
<td align="center">TE+7</td>
<td align="center">Dis</td>
<td align="center">8.55</td>
<td align="center">6.43</td>
</tr>
<tr class="even">
<td align="center">C
hillido
5</td>
<td align="center">132</td>
<td align="center">Terror</td>
<td align="center">MA+18</td>
<td align="center">Para</td>
<td align="center">8.13</td>
<td align="center">5.91</td>
</tr>
<tr class="odd">
<td align="center">D
esafiar
B
arreras</td>
<td align="center">158</td>
<td align="center">Romance</td>
<td align="center">MA+14</td>
<td align="center">WB</td>
<td align="center">7.97</td>
<td align="center">6.01</td>
</tr>
</tbody>
</table></li>
</ol>
<!-- -->
<ol start="2" style="list-style-type: decimal">
<li>El modelo que explica de manera más efectiva el comportamiento es el
modelo 2. Se pueden considerara varias razones para esto, algunas de
estas razones son:
<ol style="list-style-type: lower-alpha">
<li>A pesar del modelo 1 tener una mejor log-verosimilitud, el BIC
del modelo 2 es mejor que el modelo 1.</li>
<li>La cantidad de parámetros del modelo 1 es mayor (11 vs 8), por
lo que podríamos argumentar que preferimos el modelo 2 por su
parsimonia (argumento se refuerza mirando la métrica BIC).</li>
<li>Una gran parte de los coeficientes del modelo 1 son no
significativos a un 5% de confianza, mientras que los
coeficientes del modelo 2 tienden a ser &lt;5%</li>
<li>La significancia de las variables que ambos modelos comparten
poseen un p-valor menor en el modelo 2, de modo que sus
intervalos de confianza deberían ser más acotados. Lo anterior,
a pesar de algunas variables no ser significativas al 5%, es un
hecho positivo respecto al modelo 2.<br />
</li>
<li>Pensando en la interpretación, el modelo 1 posee algunos
comportamientos discutibles: esperaríamos, por ejemplo, que la
duración tenga un efecto negativo y significativo en los
ingresos. Sin embargo, el modelo la considera no significativa.</li>
<li>Los valores de intercepto en el modelo 1 está demasiado
desviados en magnitud respecto al resto de coeficientes. Lo
anterior podría dar indicios de algún error en cuánto al
escalamiento de las variables al momento de calibrar el modelo.</li>
</ol></li>
<li>Incluye:
<ul>
<li>Primero, observamos aquellos coeficientes con mayor
significancia estadística. Para eso consideramos aquellos cuyo
p-valor sea menor a 0.01.</li>
<li>Para el modelo 1 se tienen las variables <span class="math inline">\(\log(Presupuesto)\)</span>,
<span class="math inline">\(Edad.MA+18\)</span> y <span class="math inline">\(Estudio.Dis\)</span>. De acuerdo al signo de los
coeficientes, podemos concluir que las películas que generan un
mayor ingreso son aquellas con un mayor presupuesto, para
mayores de 18 años producidas por Dis.</li>
<li>En cambio, para el modelo 2, las variables a considerar son
<span class="math inline">\(Duración\)</span>, <span class="math inline">\(\log(Presupuesto)\)</span> y <span class="math inline">\(Tipo.Terror\)</span>. Por el signo de
los coeficientes, se deben proyectar películas de terror cortas
con un alto presupuesto.</li>
<li><strong>Observación</strong>: En el modelo 1, sería deseable considerar la
variable <span class="math inline">\(Duración\)</span>. Sin embargo, su p-valor alto refleja que no
es una variable significativa en este modelo.</li>
</ul></li>
<li>Incluye:
<ol style="list-style-type: lower-alpha">
<li><p>La condición (a) muestra que se deben incluir las variables
Presupuesto, Duración, Edad, Género, Estudio y Nfun en el
modelo, con sus propios coeficientes.</p></li>
<li><p>La condición (b) nos dice que se debe agregar además, las
variables de estudio condicionada al género.</p></li>
<li><p>Finalmente, la condición (c) dice que queremos conocer el
impacto de la duración en las películas cuya variable Edad es TE
y TE+7.</p>
<p>Recordemos que, para variables categóricas, se deben generar
variables <span class="math inline">\(dummy\)</span> para cada categoría. Sea
<span class="math inline">\(E = \{TE, TE+7, MA+14, MA+18 \}\)</span>, $T = {Acción, Comedia,
Romance, Drama, Terror} $ y <span class="math inline">\(S = \{Dis, WB, Uni, Para \}\)</span>. A
partir de estos conjuntos, podemos definir las variables
<span class="math inline">\(dummy\)</span>:</p>
<ul>
<li><span class="math inline">\(Edad_{j,e} = 1\)</span> si para la película <span class="math inline">\(j\)</span>, <span class="math inline">\(Edad_j=e\)</span> para
<span class="math inline">\(e \in E\)</span>.</li>
<li><span class="math inline">\(Tipo_{j,t} = 1\)</span> si para la película <span class="math inline">\(j\)</span>, <span class="math inline">\(Tipo_j=t\)</span> para
<span class="math inline">\(t \in T\)</span>.</li>
<li><span class="math inline">\(Tipo_{j,s} = 1\)</span> si para la película <span class="math inline">\(j\)</span>, <span class="math inline">\(Estudio_j=s\)</span> para
<span class="math inline">\(s \in S\)</span>.</li>
</ul>
<p>De este modo, el modelo que cumple las condiciones mencionadas
sería:</p>
<p><span class="math display">\[
\begin{aligned}
\log(Ingreso_j) \; &amp;= \; \beta_1 \log(Presupuesto_j) + \beta_2 Duración_j + \sum_{e \in E} \beta_e Edad_{j,e} \\
&amp;\quad + \sum_{t \in T} \beta_t Tipo_{j,t} + \sum_{s \in S} \beta_s Estudio_{j,S} + \beta_3 Nfun_j \\
&amp;\quad + \sum_{t \in T} \sum_{s \in S} \gamma_{t,s} \, (Tipo_{j,t} \times Estudio_{j,s}) \\
&amp;\quad + \sum_{e \in \{TE,TE+7\}} \delta_e \, (Edad_{j,e} \times Duración_j)
\end{aligned}
\]</span></p>
<p>Se puede realizar una notación vectorial de los coeficientes
para tener una notación más concisa, pero se debe tener en
cuenta los índices de estos coeficientes, de modo que el largo
del vector sea la cantidad de coeficientes a buscar.</p></li>
</ol></li>
</ol>
<hr />
</div>
<div id="problema-3" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Problema 3<a href="modelos-de-regresión.html#problema-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Debido a la gran variedad de alternativas que tiene el consumidor para
satisfacer sus necesidades, empresas de distintos sectores han buscado
formas de fidelizar a sus clientes mediante programas de recompensas.
Estos programas proponen premiar al consumidor con relación a su nivel
de actividad, con el fin de que estos sean más leales a la firma. A
continuación, nos proponemos estudiar el comportamiento de los
consumidores que están inmersos en un programa de recompensas en el cual
se acumulan puntos al comprar en alguna de las tiendas de la cadena, al
comprar en alguna alianza comercial asociada, o utilizando la tarjeta
del banco aliado a la cadena. Cuando el consumidor tiene una cantidad
suficiente de puntos acumulados puede canjear algún producto que se
ofrece en un catálogo, o puede hacer uso de sus puntos como medio de
pago al momento de comprar cualquier producto disponible en tienda.</p>
<p>Para modelar los comportamientos anteriores, se cuenta con información
demográfica de cada consumidor que es actualmente parte del programa, y
cada una de las transacciones que ha realizado desde su inicio, como se
observa en las Tablas 1 y 2:</p>
<table>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">IDCliente</td>
<td align="center">Identificador del cliente</td>
</tr>
<tr class="even">
<td align="center">Ingreso</td>
<td align="center">Ingreso del cliente</td>
</tr>
<tr class="odd">
<td align="center">AñoInicio</td>
<td align="center">Año en el que el cliente se une al programa</td>
</tr>
<tr class="even">
<td align="center">TamañoHogar</td>
<td align="center">Número de personas que componen el hogar del cliente</td>
</tr>
<tr class="odd">
<td align="center">Género</td>
<td align="center">1 si el cliente es hombre</td>
</tr>
<tr class="even">
<td align="center">Edad</td>
<td align="center">Edad del cliente</td>
</tr>
<tr class="odd">
<td align="center">Categoría</td>
<td align="center">Silver, Gold o Premium</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[\text{Tabla 1: Variables Demográficas}\]</span></p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">IDCliente</td>
<td align="center">Identificador del cliente</td>
</tr>
<tr class="even">
<td align="center">Año</td>
<td align="center">Año de la observación</td>
</tr>
<tr class="odd">
<td align="center">Mes</td>
<td align="center">Mes de la observación</td>
</tr>
<tr class="even">
<td align="center">Acreditación</td>
<td align="center">Cantidad de puntos acreditados
por el cliente en el mes <span class="math inline">\(t\)</span></td>
</tr>
<tr class="odd">
<td align="center">Canje</td>
<td align="center">Cantidad de productos canjeados
por el cliente en el mes <span class="math inline">\(t\)</span></td>
</tr>
<tr class="even">
<td align="center">TipoAcreditación</td>
<td align="center">Tiendas Propias, Comercios
Asociados o Tarjeta Bancaria</td>
</tr>
<tr class="odd">
<td align="center">TipoCanje</td>
<td align="center">Producto o Descuento</td>
</tr>
<tr class="even">
<td align="center">Promoción</td>
<td align="center">1 si hubo promo o descuentos
adicionales en el mes <span class="math inline">\(t\)</span></td>
</tr>
<tr class="odd">
<td align="center">Mail</td>
<td align="center">1 si se avisó estado de cuenta al
cliente via mail en el mes <span class="math inline">\(t\)</span></td>
</tr>
</tbody>
</table>
<p><span class="math display">\[\text{Tabla 2: Variables Transaccionales}\]</span></p>
<ol style="list-style-type: decimal">
<li><p>Como primera aproximación, se propone modelar la acreditación
(<span class="math inline">\(A_{it}\)</span>) y canje (<span class="math inline">\(C_{it}\)</span>) de cada cliente <span class="math inline">\(i\)</span> en el mes <span class="math inline">\(t\)</span>
como:</p>
<p><span class="math display">\[
\begin{align}
  A_{it}&amp;=\alpha+\alpha_{i}+\alpha_{t}+\beta X_{it}+\dots+\epsilon_{it}\\
  C_{it}&amp;=\gamma+\gamma_{i}+\gamma_{t}+\rho Z_{it}+\dots+\xi_{it}
\end{align}
\]</span></p>
<p>Donde <span class="math inline">\(X_{it}\)</span> y <span class="math inline">\(Z_{it}\)</span> son covariables construidas a partir de la
información disponible.</p>
<ol style="list-style-type: lower-alpha">
<li>¿Cuál es la interpretación de los parámetros <span class="math inline">\(\alpha_{i}\)</span>,
<span class="math inline">\(\alpha_{t}\)</span>, <span class="math inline">\(\gamma_{i}\)</span> y <span class="math inline">\(\gamma_{t}\)</span>?</li>
<li>¿Son los modelos anteriores identificables? En caso de ser su
respuesta negativa, ¿cómo se corrige el problema?</li>
</ol></li>
</ol>
<!-- -->
<ol start="2" style="list-style-type: decimal">
<li><p>Suponga que se han identificado los modelos anteriores (de
requerirlo, con las restricciones necesarias para alcanzar
identificación). Derive una expresión que permita calcular el número
esperado del saldo de punto de un cliente <span class="math inline">\(i\)</span> en cualquier período
de tiempo <span class="math inline">\(t\)</span>.</p></li>
<li><p>Proponga especificaciones de los modelos de regresión que permitan
capturar que:</p>
<ol style="list-style-type: lower-alpha">
<li>El impacto que tiene informar el estado de cuenta de los puntos
depende del género.</li>
<li>Los niveles de actividad (acreditación y canje) de un cliente
varían significativamente de acuerdo a su categoría.</li>
<li>El nivel de actividad (acreditación y canje) depende de la
antiguedad de los clientes en el programa, pero aquellos que
llevan más años tienden a tener un comportamiento similar.</li>
</ol></li>
<li><p>Suponga ahora que se han estimado tres especificaciones para
entender el comportamiento de acreditación (<span class="math inline">\(A_{it}\)</span>), donde <span class="math inline">\(f\)</span>
representa alguna transformación o función de la información
disponible, y cuyos resultados se encuentra en la tabla siguiente:</p>
<table style="width:96%;">
<colgroup>
<col width="29%" />
<col width="22%" />
<col width="22%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Modelo 1</th>
<th align="center">Modelo 2</th>
<th align="center">Modelo 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><span class="math inline">\(\alpha_{0}\)</span></td>
<td align="center"><span class="math inline">\(35.9\)</span>
<span class="math inline">\((12.8)\)</span></td>
<td align="center"><span class="math inline">\(37.1\)</span>
<span class="math inline">\((8.6)\)</span></td>
<td align="center"><span class="math inline">\(32.7\)</span>
<span class="math inline">\((11.5)\)</span></td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(f\)</span>(Ingreso)</td>
<td align="center"><span class="math inline">\(12.7\)</span>
<span class="math inline">\((5.1)\)</span></td>
<td align="center"><span class="math inline">\(-\)</span></td>
<td align="center"><span class="math inline">\(10.7\)</span>
<span class="math inline">\((2.9)\)</span></td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(f\)</span>(Edad)</td>
<td align="center"><span class="math inline">\(-1.5\)</span>
<span class="math inline">\((0.6)\)</span></td>
<td align="center"><span class="math inline">\(-1.2\)</span>
<span class="math inline">\((2.3)\)</span></td>
<td align="center"><span class="math inline">\(-0.6\)</span>
<span class="math inline">\((0.3)\)</span></td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(f\)</span>(Mail)</td>
<td align="center"><span class="math inline">\(-\)</span></td>
<td align="center"><span class="math inline">\(-0.3\)</span>
<span class="math inline">\((0.2)\)</span></td>
<td align="center"><span class="math inline">\(-1.9\)</span>
<span class="math inline">\((5.1)\)</span></td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(f\)</span>(Promoción)</td>
<td align="center"><span class="math inline">\(-\)</span></td>
<td align="center"><span class="math inline">\(15.1\)</span>
<span class="math inline">\((6.7)\)</span></td>
<td align="center"><span class="math inline">\(10.9\)</span>
<span class="math inline">\((4.2)\)</span></td>
</tr>
<tr class="even">
<td align="center">$
f$(TiendasPropias)</td>
<td align="center"><span class="math inline">\(-\)</span></td>
<td align="center"><span class="math inline">\(10.1\)</span>
<span class="math inline">\((3.7)\)</span></td>
<td align="center"><span class="math inline">\(8.9\)</span> <span class="math inline">\((2.1)\)</span></td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(f\)</span>(C
omerciosAsociados)</td>
<td align="center"><span class="math inline">\(-\)</span></td>
<td align="center"><span class="math inline">\(3.6\)</span> <span class="math inline">\((2.5)\)</span></td>
<td align="center"><span class="math inline">\(2.9\)</span> <span class="math inline">\((2.3)\)</span></td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R^{2}\)</span> Ajustado</td>
<td align="center"><span class="math inline">\(0.34\)</span></td>
<td align="center"><span class="math inline">\(0.53\)</span></td>
<td align="center"><span class="math inline">\(0.55\)</span></td>
</tr>
<tr class="odd">
<td align="center">MAPE</td>
<td align="center"><span class="math inline">\(45.5\%\)</span></td>
<td align="center"><span class="math inline">\(20.9\%\)</span></td>
<td align="center"><span class="math inline">\(23.4\%\)</span></td>
</tr>
</tbody>
</table>
<p><span class="math display">\[\text{Tabla 3: Resultados Modelos Regresión}\]</span></p>
<ol style="list-style-type: lower-alpha">
<li>¿Qué variables ayudan a explicar el comportamiento de
acreditación de los consumidores?</li>
<li>¿Cuál es el medio en que se acreditan o acumulan, en promedio,
menos puntos?</li>
<li>Justifique cuál de los modelos anteriores es mejor.</li>
</ol></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>Incluye:</p>
<ol style="list-style-type: lower-alpha">
<li>Los parámetros <span class="math inline">\(\alpha_{i}\)</span> y <span class="math inline">\(\gamma_{i}\)</span> representan el efecto
fijo de cada consumidor, o el nivel promedio de actividad en
creditación y canje, respectivamente, independiente de las demás
covariables. Los parámetros <span class="math inline">\(\alpha_{t}\)</span> y <span class="math inline">\(\gamma_{t}\)</span>
representan un efecto fijo temporal en los niveles de
acreditación y canje, respectivamente, cuya interpretación
dependerá de la definición de las variable que acompañe (si las
covariables son meses representaría estacionalidad, mientras que
si es fecha o año representaría alguna tendencia en los nvieles
anteriores).</li>
<li>Al estar las constantes <span class="math inline">\(\alpha\)</span> y <span class="math inline">\(\gamma\)</span>, junto con los
parámetros anteriores, se produce un problema de colinealidad y
por lo tanto los parámetros no son identificables. Para
corregirlo, se debe omitir <span class="math inline">\(\alpha\)</span> y <span class="math inline">\(\gamma\)</span>, u omitir
<span class="math inline">\(\alpha_{i}\)</span> y <span class="math inline">\(\gamma_{i}\)</span> para un individuo y especificar
dummies desde <span class="math inline">\(i=1\)</span> hasta <span class="math inline">\(i=I-1\)</span>.</li>
</ol></li>
<li><p>Sabemos que <span class="math inline">\(\mathbb{E}(Y|X)=X&#39;\hat{\beta}_{OLS}\)</span>. Luego, el balance
promedio se obtiene como:
<span class="math display">\[\mathbb{E}(\sum_{\tau=1}^{t}A_{\tau}-\sum_{\tau=1}^{t}C_{\tau}|X,Z)=\sum_{\tau=1}^{t}(\alpha_{i}+\alpha_{t}+X&#39;\beta)-\sum_{\tau=1}^{t}(\gamma_{i}+\gamma_{t}+Z&#39;\rho) + \epsilon_{i}\]</span></p></li>
<li><p>Incluye:</p>
<ol style="list-style-type: lower-alpha">
<li>Se debe incorporar una interacción entre las variables de <em>Mail</em>
y <em>Género</em>.</li>
<li>Se debe transformar la variable categórica en dummies y omitir
uno de los niveles para no tener variables colineales.</li>
<li>Se debe construir la variable logaritmo de antigüedad como
<span class="math inline">\(ln(Año_{t}-AñoIngreso_{t})\)</span><span class="math display">\[ X&#39;\beta = \beta_1 Mail_i Genero_i + \beta_2 1_{[categoria_i = Gold]} + \beta_3 1_{[categoria_i = Premium]} \\
+ \beta_4 ln(Año_t - AñoIngreso_t) + \epsilon&#39;_i\]</span></li>
</ol></li>
<li><p>Detalle:</p>
<ol style="list-style-type: lower-alpha">
<li>Las variables que son significativas independiente del modelo en
el que fueron estimadas, y que permiten explicar el
comportamiento de interés, es decir, <em>Ingreso</em>, <em>Promoción</em>, y
<em>TiendasPropias</em>.</li>
<li>El parámetro asociado al medio <em>TarjetaBancaria</em> fue fijado en
cero (para evitar problemas de colinealidad), y como el resto de
los parámetros son positivos, es aquel en que menos puntos se
acreditan.</li>
<li>La respuesta dependerá del criterio de evaluación. Si se quiere
evaluar en cuanto a la capacidad de ajuste, el mejor es aquel
con mayor <span class="math inline">\(R^{2}\)</span> Ajustado (M3), pero si se evalúa en cuanto a
la capacidad de pronóstico, se prefiere aquel con menor MAPE
(M2).</li>
</ol></li>
</ol>
<hr />
</div>
<div id="problema-4---p1-control-1-primavera-2025" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Problema 4 - P1 Control 1 Primavera 2025<a href="modelos-de-regresión.html#problema-4---p1-control-1-primavera-2025" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En un contexto de globalización, movilidad laboral y teletrabajo,
comparar el costo de vida entre países se ha vuelto una preocupación
frecuente para profesionales y estudiantes. Aunque la fracción de
ciudadanos chilenos que deciden estudiar en el extranjero son aún
limitadas, hoy en día existen amplias posibilidades tanto desarrollo
académico como laboral más allá de nuestras fronteras. Ciertamente, la
decisión de emigrar es de alto envolvimiento y requiere evaluar una
multitud de factores. A continuación, nos concentraremos en describir el
costo del precio de arriendo de propiedades inmobiliarias en distintas
ciudades del mundo.</p>
<p>Para estudiar las diferencias de precio de arriendos, un grupo de
investigadores construyó una base de datos internacional de precios de
propiedades en más de 50 ciudades de América Latina, Norteamérica y
Europa. La información fue recolectada haciendo un barrido histórico en
un conjunto amplio de portales especializados de corretaje. La base
considera los siguientes campos.</p>
<ul>
<li><strong>ID:</strong> Identificador de la propiedad.</li>
<li><strong>Ciudad</strong>: ciudad.</li>
<li><strong>Pais</strong>: país.</li>
<li><strong>Año</strong>: Año en la que se regista el precio de la propiedad.</li>
<li><strong>PrecioUSD</strong>: precio publicado de la propiedad en USD.</li>
<li><span class="math inline">\(M^2\)</span>: superficie en metros cuadrados.</li>
<li><strong>Dorms</strong>: número de dormitorios.</li>
<li><strong>Baths</strong>: número de baños.</li>
<li><strong>Centro</strong>: distancia (km) al centro de la ciudad.</li>
<li><strong>Residencial</strong>: 1 si la propiedad es residencial (0 si es
comercial).</li>
<li><strong>AñoConstrucción</strong>: año de construcción de la propiedad.</li>
<li><strong>CiudadIPC</strong>: ingreso per cápita promedio de la ciudad (USD PPP).</li>
<li><strong>CiudadPob</strong>: Población total de la ciudad.</li>
<li><strong>CiudadSup</strong>: Superficie total de la ciudad.</li>
</ul>
<p>El objetivo es comparar precios de propiedades entre países y explorar
diferencias sistemáticas entre países, mientras controlamos por factores
estructurales de las ciudades y características de las propiedades.</p>
<ol style="list-style-type: decimal">
<li><p>(1.0 puntos) Formule un modelo de regresión para describir el
log-precio (en USD) de una propiedad en una ciudad dada, en un
instante del tiempo y con una lista de característica definida.</p>
<p>Para esto considere que:</p>
<ol style="list-style-type: lower-alpha">
<li>Existe un efecto fijo por país-año, que permite establecer si,
condicional en las características de la propiedad y la ciudad
dónde está emplazada, ciertos países tienen niveles de precios
mayores que otros en un año dado.</li>
<li>La superficie, la antigüedad, el número de dormitorios y el
número de baños afectan linealmente en el log-precio, pero la
magnitud en que aumenta el precio al variar estas
características es distinta dependiendo de si la propiedad es
residencial o comercial.</li>
</ol></li>
</ol>
<!-- -->
<ol start="2" style="list-style-type: decimal">
<li><p>(1.0 puntos) Adicional a lo ya expuesto, se considera que la
magnitud en que el precio por metro cuadrado aumenta es mayor para
ciudades más densamente pobladas. ¿Cómo modificaría el modelo ya
propuesto para considerar esta descripción?</p></li>
<li><p>(1.0 puntos) Considere ahora que las expectativas de variación de
precio importan. Indique cómo modificaría el modelo anterior para
considerar que el log-precio se ve afectado linealmente por la
variación del precio en los dos años anteriores en esa ciudad. Si
necesita crear variables adicionales, explicite cómo se calcularían
a partir de la base de datos.</p></li>
<li><p>(1.0 puntos) En todos los modelos anteriores se ha usado como
variable dependiente el log-precio en USD. Discuta qué limitaciones
tiene esa variable para comparar qué tan abordable es la vivienda
entre distintos países y proponga al menos una métrica alternativa
que pudiera usarse para la comparación.</p></li>
<li><p>(1 punto) Considerando que los precios pueden variar año a año,
interesa considerar estimadores agregados de varios años. Sea
<span class="math inline">\(InP_{kt}\)</span> es el log-precio esperado para una propiedad en el país k
en el año t (que se obtiene a través del producto punto entre
estimadores máximo-verosímiles y las características promedio de las
propiedades del país i en el año t). Explique cómo testearía que los
precios de Chile son distintos a los de Argentina considerando los
últimos 3 años.</p></li>
<li><p>(1 punto) Disconformes con la capacidad de pronóstico de los modelos
lineales, se postula que algunos modelos sencillos de aprendizaje de
máquina podrían generar mejores resultados. Para ello se considera
usar un modelo de k-vecinos más cercanos. Defina una métrica de
distancia y determine qué si la propiedad B o la propiedad C es más
cercana a la propiedad A.</p>
<table style="width:96%;">
<colgroup>
<col width="19%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Propiedad</th>
<th align="center">Tiene
Piscina</th>
<th align="center">Tiene
Calefacción
Central</th>
<th align="center">Tiene
Esta
cionamiento</th>
<th align="center">Ciudad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">A</td>
<td align="center">Sí</td>
<td align="center">Sí</td>
<td align="center">Sí</td>
<td align="center">Santiago</td>
</tr>
<tr class="even">
<td align="center">B</td>
<td align="center">No</td>
<td align="center">No</td>
<td align="center">Sí</td>
<td align="center">Concepción</td>
</tr>
<tr class="odd">
<td align="center">C</td>
<td align="center">Sí</td>
<td align="center">Sí</td>
<td align="center">No</td>
<td align="center">Antofagasta</td>
</tr>
</tbody>
</table></li>
</ol>
<p><span class="math display">\[\text{Tabla 1: Muestra de datos de 3 propiedades de arriendo en Chile, 2025}\]</span></p>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li>(1 punto) Indexemos cada precio como <span class="math inline">\(P_{ijkt}\)</span> representando la
observación i del país j en la ciudad k en el año t.
<ul>
<li><p>Para el efecto fijo basta incluir un coeficiente <span class="math inline">\(α_{ij}\)</span>
asociado a cada combinación país-año. Aunque no es lo que dice
el enunciado, se puede dar 0.4 puntos a quienes incluyan un par
de coeficientes aditivos <span class="math inline">\(α_i + \alpha_j.\)</span></p></li>
<li><p>Para las otras variables agregamos términos lineales, más la
interacción con el tipo de propiedad.</p></li>
</ul></li>
</ol>
<p><span class="math display">\[
\begin{aligned}
\ln(P_{ijkt}) \; &amp;= \; \alpha_{it}    + \beta_1 M2_{ijkt}    + \beta_2 Dorms_{ijkt}    + \beta_3 Bath_{ijkt} \\&amp;\quad + \beta_4 M2_{ijkt} \cdot Residencial_{ijkt}    + \beta_5 Dorms_{ijkt} \cdot Residencial_{ijkt} \\&amp;\quad + \beta_6 Bath_{ijkt} \cdot Residencial_{ijkt}    + \varepsilon_{ijkt}
\end{aligned}
\]</span></p>
<ol start="2" style="list-style-type: decimal">
<li>(1 punto) Tenemos que redefinir los índices <span class="math inline">\(\beta_1\)</span> y <span class="math inline">\(\beta_4\)</span>
para que dependan de la densidad poblacional.</li>
</ol>
<p><span class="math display">\[
\beta_1 \;\to\; \gamma_1 + \gamma_2 \cdot \frac{CiudadPop_{ijkt}}{CiudadSup_{ijkt}}
\qquad\text{y}\qquad
\beta_4 \;\to\; \gamma_3 + \gamma_4 \cdot \frac{CiudadPop_{ijkt}}{CiudadSup_{ijkt}}
\]</span></p>
<ol start="3" style="list-style-type: decimal">
<li><p>(1 punto) Para poder ingresar al modelo tenemos que calcular el
precio de la ciudad de cada año.<br />
Definimos<br />
<span class="math display">\[
AVGP_{kt} = \sum_{h=k} P_{ijht},
\]</span><br />
como el precio promedio de la ciudad k en el año t. Con esto, el
modelo puede expandirse agregando un término adicional. <span class="math display">\[
\beta_7 \cdot (AVGP_{kt-1} - AVGP_{kt-2})
\]</span>También se considera correcto considerar la diferencia de los dos
precios en <span class="math inline">\(t\)</span> y <span class="math inline">\(t-1\)</span> respectivamente.</p></li>
<li><p>(1 punto) Hay al menos dos consideraciones a tener en cuenta, aunque
con nombrar cualquiera es suficiente:</p>
<ul>
<li>Los precios pueden estar explicadas por variaciones en el tipo
de cambio y no en cambios del costo en las monedas corrientes.
En este caso, se podría normalizar por un promedio de tipo de
cambio en un horizonte más largo.</li>
<li>Los precios pueden ser altos en valores absolutos, pero no serlo
relativos a los ingresos. En este caso se podría normalizar por
los ingresos, i.e usar:<br />
<span class="math display">\[
\frac{P_{ijkt}}{Ciudad_{ijkt}}.
\]</span></li>
</ul></li>
</ol>
<!-- -->
<ol start="5" style="list-style-type: decimal">
<li><p>(1 punto) Por definición <span class="math inline">\(ln P_{kt} = \theta&#39; \bar{x}_{kt}\)</span>, en que
<span class="math inline">\(\bar{x}_{it}\)</span> son las características promedio de las propiedades
del país k en el año t. De acá se infiere que <span class="math inline">\(\ln P_{kt}\)</span> es una
función lineal de los parámetros y por tanto podemos testear
directamente si
<span class="math inline">\(\theta&#39; \bar{x}_{k=Chile,t} - \theta&#39; \bar{x}_{k=Argentina,t} = 0\)</span>
a través de un test F.</p></li>
<li><p>(1 punto) La clave de la pregunta es notar que las variables
categóricas siempre pueden transformarse a numéricas a través de la
generación de variables dummies (e.g. <span class="math inline">\(Piscina_{ijkt} = 1\)</span>, si la
propiedad tiene piscina, 0 en caso contrario). Con esto se puede
utilizar cualquier medida de distancia (incluyendo euclidiana),
aunque la más simple es una distancia de Manhattan o de Hamming que
simplemente cuenta en cuantas dimensiones los puntos tienen distinto
valor.</p>
<p>En este caso:<br />
</p>
<ul>
<li><span class="math inline">\(d(A,B) = 3\)</span> (A y B difieren en tres atributos)<br />
</li>
<li><span class="math inline">\(d(A,C) = 1\)</span> (A y C difieren en un atributo)</li>
</ul>
<p>por lo que C sería el vecino más cercano a A.</p></li>
</ol>
<hr />
</div>
<div id="problema-5---p1-control-otoño-2025" class="section level3 hasAnchor" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Problema 5 - P1 Control Otoño 2025<a href="#problema-5---p1-control-oto%C3%B1o-2025" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Las tecnologías tradicionales de búsqueda basadas en texto han sido
durante mucho tiempo uno de los pilares del comercio electrónico,
permitiendo a los usuarios ingresar palabras clave para encontrar
productos. Sin embargo, en un entorno de comercio digital en rápida
evolución, donde el comportamiento del consumidor se orienta hacia
experiencias más interactivas y multimedia, están ganando terreno
tecnologías de búsqueda más avanzadas. En particular, la búsqueda visual
representa un avance innovador, que permite a los consumidores iniciar
búsquedas utilizando imágenes en lugar de texto. Al cargar una imagen en
la herramienta de búsqueda, los algoritmos más avanzados de aprendizaje
profundo analizan sus características visuales para identificar y
recuperar productos relevantes. Estos mecanismos sofisticados generan
sugerencias amplias, que incluyen productos similares y ofertas
relacionadas de otras marcas.</p>
<p>Las plataformas líderes han sido fundamentales en el desarrollo y
perfeccionamiento de la búsqueda visual. Pinterest fue pionera en esta
tecnología en 2014, permitiendo a los usuarios seleccionar segmentos de
una imagen para encontrar contenido visualmente similar. Otros actores
relevantes, como Google (con Google Lens) y Bing (con Bing Visual
Search), han desarrollado tecnologías similares. Grandes minoristas como
Amazon y Aliexpress también han adoptado esta funcionalidad para mejorar
la precisión del emparejamiento. La reducción en los costos tecnológicos
han facilitado su acceso, permitiendo que proveedores emergentes como
<a href="https://impresee.com/">Impresee</a> y <a href="https://visidea.ai/">Visidea</a>
ofrezcan soluciones de búsqueda visual fácilmente integrables en sitios
de comercio electrónico.</p>
<p>En este problema buscaremos comparar la búsqueda visual con la búsqueda
tradicional basada en texto, en términos de comportamiento de clics y
conversiones. El análisis empírico se basa en un conjunto de datos que
abarca más de 2 millones de búsquedas realizadas por cerca de 50.000
usuarios. Complementamos esta base con etiquetas y métricas de similitud
derivadas de avances recientes en visión computacional, lo que nos
permite controlar por la complejidad de las imágenes y la similitud
entre la imagen de entradas y los productos resultantes. Estadísticas
preliminares indican que, en comparación con las búsquedas por texto,
las búsquedas por imagen presentan una mayor tasa de clics (CTR), y que
los clics se concentran más en los resultados mejor posicionados. Este
patrón podría sugerir que quienes buscan por imagen estarían en etapas
más avanzadas del proceso de compra, con menor necesidad de explorar
alternativas. Sin embargo, al analizar las conversiones, el mayor CTR no
parece traducirse en un aumento de ventas, de modo que las búsquedas por
texto están asociadas con tasas de conversión más altas.</p>
<ol style="list-style-type: decimal">
<li><p>Plantee un modelo de regresión para describir el número de clics del
usuario <em>i</em> en el producto <em>j</em> en la instancia de búsqueda <em>k</em>, que
permita entender las diferencias dependiendo de si la búsqueda se
realiza usando imágenes o texto. Para eso considere que:</p>
<ul>
<li><p>El <em>ranking</em> o posición en el listado de búsqueda afecta en los
clics de modo que los productos listados primero tienen muchos
más clics que aquellos listados después. Notar que la tasa a la
que se degradan los clics con el <em>ranking</em> es distinta
dependiendo de que la búsqueda sea por imágenes o texto.</p></li>
<li><p>La complejidad de la búsqueda importa en los clics generados.
Para las búsquedas por texto, la complejidad se puede capturar a
partir del largo del texto. Para las imágenes se puede medir por
el tamaño de la imagen.</p></li>
<li><p>Cada producto tiene una propensión a clics base distinta. Hay
algunos productos populares que tienen a recibir más clics que
otros menos populares, independientemente de los inputs de la
búsqueda.</p></li>
</ul></li>
<li><p>A partir de sus resultados de regresión, ¿Cómo determinaría
(explique con sus palabras) si el número total de clics generado por
un producto en la quinta posición en una búsqueda por imágenes es
mayor que los generados por el producto en la quinta posición de una
búsqueda por texto?</p></li>
<li><p>Considere que los modelos de regresión confirman que, aunque haya un
efecto en clics, este no se traduce en más conversiones. A la luz de
este resultado, parece interesante estudiar si las búsquedas de
imágenes quizás generan búsquedas adicionales que generen más
conversiones. Esto es, que las imágenes sean usadas en una etapa
temprana del embudo de compras, ayudando a encontrar la categoría de
productos, las que después se refinarían haciendo búsquedas
tradicionales de texto. Formule un modelo de regresión que permita
identificar si una búsqueda de imagen aumenta o no el número de
búsquedas siguientes. Para esto, suponga que para cada instancia de
búsqueda <em>k</em> del usuario <em>i</em>, se puede calcular <span class="math inline">\(NNextSearch_{ik}\)</span>,
que cuenta el número total de búsquedas hechas por el mismo usuario,
dentro de la misma categoría, durante el mismo día de la búsqueda
<em>k</em>. Para su modelo de regresión considere que, junto con el tipo de
búsqueda, debe controlar por:</p>
<ul>
<li><p>La categoría de productos, considerando que cada búsqueda se
asocia principalmente a una única categoría, y cada categoría de
productos tiene una mayor o menor propensión a ser buscadas. Por
ejemplo, la categoría <em>juguetes</em> en general tiene más búsquedas
que la categoría <em>colchones</em>.</p></li>
<li><p>El número de resultados reportados en la búsqueda <em>NumResult</em> y
el número de categorías distintas reportadas en la búsqueda
<em>NumProdCat</em>. Considere que tanto <em>NumResult</em> como <em>NumProdCat</em>
ya están calculados en la base de trabajo.</p></li>
<li><p>El número de búsquedas diarias que en promedio hace el cliente
<em>AvgNumSearch</em> (que puede suponer conocido).</p></li>
</ul></li>
</ol>
<!-- -->
<ol start="4" style="list-style-type: decimal">
<li><p>Suponga que, después de un par de iteraciones, se ha determinado que
existen dos especificaciones de modelos lineales que funcionan
relativamente bien, como indican los resultados de la <a href="#tabla-1">Tabla
1</a>.</p>
<ol style="list-style-type: lower-alpha">
<li><p>¿Cómo interpreta los resultados de la variable <em>NumResult</em> en el
contexto de esta aplicación?<br />
</p></li>
<li><p>¿Cómo interpreta el dramático aumento en el valor de <span class="math inline">\(R^2_{adj}\)</span>
entre las especificaciones (1) y (2)?</p>
<p><span class="math display">\[\text{Variable dependiente: } ln(\text{NumSubsequentSearch}+1)\]</span></p>
<table>
<thead>
<tr class="header">
<th align="center"><strong>Coefficient</strong></th>
<th align="center"><strong>(1)</strong></th>
<th align="center"><strong>(2)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">IMAGE</td>
<td align="center">-4.595*** (0.012)</td>
<td align="center">-0.375*** (0.007)</td>
</tr>
<tr class="even">
<td align="center">NumResult</td>
<td align="center">-0.081*** (0.000)</td>
<td align="center">-0.003*** (0.000)</td>
</tr>
<tr class="odd">
<td align="center">NumProdCategory</td>
<td align="center">0.031*** (0.001)</td>
<td align="center">0.00138** (0.000588)</td>
</tr>
<tr class="even">
<td align="center">LogImageSize</td>
<td align="center">-0.075*** (0.018)</td>
<td align="center">0.001 (0.010)</td>
</tr>
<tr class="odd">
<td align="center">NumImageObject</td>
<td align="center">0.023* (0.011)</td>
<td align="center">-0.003 (0.007)</td>
</tr>
<tr class="even">
<td align="center">NumImageLabel</td>
<td align="center">0.055*** (0.017)</td>
<td align="center">0.003 (0.010)</td>
</tr>
<tr class="odd">
<td align="center">KeywordLength</td>
<td align="center">-0.018*** (0.000)</td>
<td align="center">-0.001*** (0.000)</td>
</tr>
<tr class="even">
<td align="center">AvgNumSearch</td>
<td align="center">1.85E-6*** (6.86E-8)</td>
<td align="center">-1.03E-7** (3.28E-8)</td>
</tr>
<tr class="odd">
<td align="center">Efecto fijo: User</td>
<td align="center">No</td>
<td align="center">Yes</td>
</tr>
<tr class="even">
<td align="center">Efecto fijo: Product Category</td>
<td align="center">No</td>
<td align="center">Yes</td>
</tr>
<tr class="odd">
<td align="center">Observations</td>
<td align="center">1,715,495</td>
<td align="center">1,715,495</td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R_{adj.}^2\)</span></td>
<td align="center">0.19</td>
<td align="center">0.825</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[\text{Tabla 1: Resultados de modelos de regresión próximas búsquedas}\]</span></p></li>
</ol></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>Detalles de variables:</p>
<ul>
<li>Incluimos una variable con <span class="math inline">\(Ranking_{ijk}\)</span> y su interacción con
el tipo de búsqueda. Notar que hay dos tipos de búsqueda de
carácter dummy. Para modelarlo, se debe incorporar un
coeficiente para cada tipo (Imagen y texto).</li>
<li>Hay que incluir el tamaño de la imagen <span class="math inline">\(ImageSize_{ik}\)</span> y el
largo del texto <span class="math inline">\(TextLength_{ijk}\)</span>.</li>
<li>Hay que incluir un efecto fijo por producto <span class="math inline">\(\alpha_k\)</span>.</li>
</ul>
<p>Así, si <span class="math inline">\(C_{ijk}\)</span> es el númeroe de clics que recibe el producto j en
la búsqueda k del cliente i, el modelo queda descrito como:</p>
<p><span class="math display">\[
\begin{aligned}
C_{ijk} \; &amp;= \; \alpha_k
  + \beta_1\, \mathrm{Image}_{ik}
  + \beta_2\, \mathrm{Rank}_{ijk}
  + \beta_3\, \mathrm{Image}_{ik}\!\cdot\!\mathrm{Rank}_{ijk} \\
&amp;\quad
  + \beta_4\, \mathrm{Image}_{ik}\!\cdot\!\mathrm{ImageSize}_{ik}
  + \beta_5\, (1-\mathrm{Image}_{ik})\!\cdot\!\mathrm{TextLength}_{ik}
  + \varepsilon_{ijk}
\end{aligned}
\]</span></p></li>
<li><p>Se puede utilizar un test F para evaluar que el grupo de variables
de <span class="math inline">\(Image\)</span>, <span class="math inline">\(Ranking\)</span> y <span class="math inline">\((1-Image)\)</span> sean distintos en su conjunto.</p></li>
<li><p>Si llamamos a <span class="math inline">\(CAT_{ihk}\)</span> a las dummy que toman el valor 1 si la
búsqueda k del usuario i está asociada a la categoría h, entonces el
modelo de regresión puede escribirse como:</p></li>
</ol>
<p><span class="math display">\[
NNextSearch_{ik} = (\sum_h \alpha_h CAT_{ihk}) + \beta_1 Image_{ik} + \beta_2 NumResult_{ik} + \beta_3 NumProdCat_{ik} \\ + \beta_4 AvgNumSearch_i + \epsilon_{ik}
\]</span></p>
<ol start="4" style="list-style-type: decimal">
<li><p>Detalle:</p>
<ol style="list-style-type: lower-alpha">
<li>Los coeficientes son significativamente negativos en ambas
especificaciones. En el contexto de la aplicación, esto sugiere
que aquellas búsquedas que generan más resultados, están
relacionadas a un menor número de búsquedas posteriores.</li>
<li>La diferencia entre las especificaciones (1) y (2) es que la
segunda tiene efectos fijos, tanto por usuario como por
categoría de producto. Como esta segunda especificación tiene un
<span class="math inline">\(R^2_{adj}\)</span> mucho mayor, concluimos que la categoría y el
usuario explican gran parte de la variabilidad en el número de
búsquedas posteriores.</li>
</ol></li>
</ol>
<hr />
</div>
<div id="problema-6---p1-control-primavera-2024" class="section level3 hasAnchor" number="2.4.6">
<h3><span class="header-section-number">2.4.6</span> Problema 6 - P1 Control Primavera 2024<a href="modelos-de-regresión.html#problema-6---p1-control-primavera-2024" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Una de las características más relevantes de los ambientes de negocio
contemporáneos, es la disponibilidad de grandes cantidades de
información respecto al comportamiento de clientes. Es así como día a
día aparecen nuevas fuentes de información que las compañías están
constantemente incorporando a sus plataformas de analítica avanzada.
<em>Whileus</em> es un conglomerado que tiene la representación de varias
marcas internacionales con un centenar de tiendas en el país y está
interesado en investigar si los datos derivados del uso de dispositivos
móviles pueden ayudar a entender el volumen de ventas de las distintas
tiendas. Para eso ha firmado un acuerdo de colaboración con una
importante compañía de telecomunicaciones que posee datos de tráfico,
posición y uso de aplicaciones de varios de millones de clientes en todo
el territorio nacional, que podría ser informativa respecto la demanda
de las marcas de <em>Whileus</em>. El propósito del acuerdo es evaluar, en el
plazo de un mes y a través de un prototipo a cargo de la empresa de
telecomunicaciones, si la incorporación de estas nuevas variables
permite generar aprendizajes valiosos para el estudio de la demanda de
las tiendas de <em>Whileus</em>.</p>
<p>En la primera semana del piloto y después de una reunión técnica entre
los equipos de <em>Whileus</em> con la empresa de telecomunicaciones se acuerda
extraer los datos de los data lakes de las respectivas compañías a nivel
de zona censal. Esto se fundamenta porque la provisión de datos de
movilidad de individuos específicos podría poner en entredicho el uso de
información privada de los usuarios. Así, luego de consolidar las bases
de datos, se han propuesto los siguientes modelos de regresión para
describir el número de visitas a la tienda k desde la zona censal i en
la semana t <span class="math inline">\(q_{ikt}\)</span>.</p>
<p><span class="math display">\[ q_{ikt} = \alpha_i^1 + \beta_t^1 + \gamma^1 d_{ik} + \theta^1 z_k + \varepsilon_{ikt}^1 \tag{1} \]</span></p>
<p><span class="math display">\[ q_{ikt} = \alpha_k^2 + \beta_t^2 + \gamma^2 d_{ik} + \theta^2 w_i + \varepsilon_{ikt}^2 \tag{2} \]</span></p>
<p>En estas especificaciones, <span class="math inline">\(d_{ik}\)</span> corresponde al logaritmo de la
distancia entre la tienda k y el centroide de la zona censal i, mientras
que <span class="math inline">\(z_k\)</span> y <span class="math inline">\(w_i\)</span> son un conjunto de características de la tienda k y la
zona censal i respectivamente. Para esta primera iteración se ha
considerado que <span class="math inline">\(z_k\)</span> incluye la superficie de la tienda, un conjunto de
variables binarias para denotar la marca y una última variable binaria
para indicar si la tienda se encuentra dentro de un centro comercial o
no. Para las variables de la zona censal, se ha considerado que <span class="math inline">\(w_i\)</span>
incluye el número de habitantes, la comuna en la que habita la zona
censal, la fracción de usuarios que tienen instalada una app de las
marcas y una variable binaria para indicar si la zona censal está a
menos de 250 metros de alguna estación de metro.</p>
<ol style="list-style-type: decimal">
<li><p>Comente las ventajas teóricas de cada una de las formulaciones. Si
prefiere, puede responder la pregunta argumentando en qué escenarios
prefería una formulación y en cuales preferiría la otra.</p></li>
<li><p>En la Tabla 1 se despliegan los resultados de un primer ejercicio de
regresión para los dos modelos anteriormente planteados. Por
simplicidad, se ha considerado solo una muestra de tiendas y zonas
censales. Como el modelo se ha estimado usando una técnica de
descentrado, los efectos fijos no se reportan en la Tabla 1.</p>
<ol style="list-style-type: lower-alpha">
<li><p>¿Cómo es posible que, usando los mismos datos, las ecuaciones 1
y 2 nos reporten distintos estimadores del efecto de la
distancia en la demanda de cada zona censal por cada marca?</p></li>
<li><p>¿Qué información necesita para cnstruir un intervalo de
confianza para el efecto que tiene la superficie de la tienda en
su demanda? Si fuera posible, reporte el valor numérico de este
intervalo de confianza usando los datos de la tabla.</p></li>
<li><p>Si el objetivo del análisis sería tener el pronóstico más
preciso de la demanda en cada tienda, ¿cómo elegiría entre estos
dos modelos?</p></li>
<li><p>¿Cómo testearía si hay diferencias significativas en la demanda
por marca?</p>
<p><span class="math display">\[\text{Tabla 1: Resultados modelos alternativos de regresión}\]</span></p>
<table>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Ecuación 1</th>
<th align="center">Ecuación 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Log-Distancia</td>
<td align="center">-2.123 ***</td>
<td align="center">-2.817 ***</td>
</tr>
<tr class="even">
<td align="center">Superficie</td>
<td align="center">0.234 *</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">Marca A</td>
<td align="center">0.245 .</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">Marca B</td>
<td align="center">1.567 **</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">Marca C</td>
<td align="center">0.453 .</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">Mall</td>
<td align="center">2.145 ***</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">Nhabitantes</td>
<td align="center"></td>
<td align="center">3.234 ***</td>
</tr>
<tr class="even">
<td align="center">Fracusuarios</td>
<td align="center"></td>
<td align="center">0.881 **</td>
</tr>
<tr class="odd">
<td align="center">Providencia</td>
<td align="center"></td>
<td align="center">1.233 **</td>
</tr>
<tr class="even">
<td align="center">Santiago</td>
<td align="center"></td>
<td align="center">0.029</td>
</tr>
<tr class="odd">
<td align="center">Macul</td>
<td align="center"></td>
<td align="center">-0.913 *</td>
</tr>
<tr class="even">
<td align="center">La Florida</td>
<td align="center"></td>
<td align="center">-0.372 .</td>
</tr>
<tr class="odd">
<td align="center">Estación Central</td>
<td align="center"></td>
<td align="center">-1.409 *</td>
</tr>
<tr class="even">
<td align="center">Metro</td>
<td align="center"></td>
<td align="center">1.199 ***</td>
</tr>
<tr class="odd">
<td align="center">Efectos fijos: Zona censal</td>
<td align="center">Yes</td>
<td align="center">No</td>
</tr>
<tr class="even">
<td align="center">Efectos fijos: Tienda</td>
<td align="center">No</td>
<td align="center">Yes</td>
</tr>
<tr class="odd">
<td align="center">N. Obs</td>
<td align="center">34,207</td>
<td align="center">34,207</td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R^2\)</span></td>
<td align="center">0.234</td>
<td align="center">0.489</td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(R_{adj.}^2\)</span></td>
<td align="center">0.233</td>
<td align="center">0.482</td>
</tr>
</tbody>
</table></li>
</ol></li>
<li><p>Para evaluar la capacidad de los modelos para apoyar la gestión del
negocio, el equipo de desarrollo quiere generar algunos pronósticos
con la demanda para la próxima semana para cuatro tiendas
seleccionadas. Para esto, necesita ajustar la propuesta inicial de
modo que los efectos temporales sean controlados por una lista de
variables temporales <span class="math inline">\(z_t\)</span> que incluyen un pronóstico del clima,
tendencia, estacionalidad mensual, la intensidad de la actividad
promocional de la marca, así como la intensidad de la actividad
promocional de otras marcas competidoras. Considerando que variables
como el clima y la actividad promocional son inciertas, se ha
generado un reporte con tres escenarios: uno pesimista, uno neutro y
otro optimista. Mientras en el escenario neutro se considera que las
variables independientes toman valores típicamente observados, los
escenarios pesimistas y optimistas se evalúan en combinaciones más
extremas que favorecen y desfavorecen la demanda respectivamente.
Los pronósticos generados se despliegan en la Tabla 2.</p>
<p><span class="math display">\[\text{Tabla 2: Pronóstico de demanda para cuatro tiendas seleccionadas}\]</span></p>
<table style="width:93%;">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Tienda</th>
<th align="center"></th>
<th align="center">E
cuación
1</th>
<th align="center"></th>
<th align="center"></th>
<th align="center">E
cuación
2</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"></td>
<td align="center"><strong>Pesi
mista</strong></td>
<td align="center"><strong>N
eutro</strong></td>
<td align="center"><strong>Opti
mista</strong></td>
<td align="center"><strong>Pesi
mista</strong></td>
<td align="center"><strong>N
eutro</strong></td>
<td align="center"><strong>Opti
mista</strong></td>
</tr>
<tr class="even">
<td align="center">Tienda
A01</td>
<td align="center">316,6
(11,8)</td>
<td align="center">345,1
(7,2)</td>
<td align="center">392,1
(12,1)</td>
<td align="center">318,5
(12,2)</td>
<td align="center">352,1
(6,7)</td>
<td align="center">387,7
(10,9)</td>
</tr>
<tr class="odd">
<td align="center">Tienda
A12</td>
<td align="center">555,8
(12,2)</td>
<td align="center">578,8
(8,1)</td>
<td align="center">602,2
(11,8)</td>
<td align="center">547,6
(11,0)</td>
<td align="center">566,3
(9,1)</td>
<td align="center">607,7
(11,6)</td>
</tr>
<tr class="even">
<td align="center">Tienda
B09</td>
<td align="center">834,4
(14,3)</td>
<td align="center">888,9
(9,2)</td>
<td align="center">965,4
(13,3)</td>
<td align="center">811,4
(15,9)</td>
<td align="center">874,9
(8,9)</td>
<td align="center">954,7
(13,8)</td>
</tr>
<tr class="odd">
<td align="center">Tienda
B14</td>
<td align="center">733,9
(13,6)</td>
<td align="center">786,6
(8,4)</td>
<td align="center">822,3
(12,8)</td>
<td align="center">728,6
(11,5)</td>
<td align="center">791,9
(8,7)</td>
<td align="center">817,8
(12,6)</td>
</tr>
</tbody>
</table>
<p>En la tabla anterior, junto con los pronósticos se despliegan los
errores estándar de pronóstico (<em>sef</em>). Explique por qué los <em>sef</em>
son en general menores en los escenarios neutros.</p></li>
<li><p>Habiendo revisado la primera ronda de resultados, el equipo de
desarrollo se inclina por concentrarse en el modelo dado por la
ecuación 1. Sin embargo, a partir de la retroalimentación de los
gerentes de tienda, se reconoce que hay varios elementos adicionales
que deben incorporarse. Formule un modelo de regresión lineal que
expanda la ecuación (1) pero que considere los siguientes factores:</p>
<ul>
<li>Las tiendas en los centros comerciales suelen ser más grandes,
por lo que es esperable que la superficie de la tienda tenga una
influencia distinta dependiendo si la tienda está o no en un
mall.</li>
<li>Para zonas censales relativamente cercanas, la distancia es un
buen indicador del costo de acceder. Sin embargo, si la
distancia es mayor que <span class="math inline">\(d*\)</span>, entonces es mejor considerar el
tiempo de viaje <span class="math inline">\(v_{ik}\)</span>.</li>
<li>El efecto de la cercanía al metro es distinto si la tienda está
en un mall o no.</li>
<li>En la muestra hay marcas que son de destino u otras de
conveniencia. Una marca de destino se caracteriza por clientes
muy leales dispuestos a viajar con el propósito principal de
visitar la tienda de esa marca. Por su parte, las marcas de
conveniencia son visitadas principalmente por clientes que se
encuentran con la tienda al paso. Considere que, en el modelo,
el efecto del tiempo de viaje depende de si la marca es de
destino o conveniencia.</li>
<li>La variable <span class="math inline">\(Fracusuarios_i\)</span> se define como la fracción de
habitantes de la zona censal i que tiene instalada alguna app de
cualquiera de las marcas de <em>Whileus</em> al momento de hacer el
pronóstico. Los resultados de la Tabla 2 indican que, entre
mayor es el número de usuarios de las aplicaciones móviles,
mayor es la demanda de esa zona censal. Sin embargo, es
esperable que esta variable sea endógena. Es decir, que no sea
el uso de las aplicaciones las que empujan la demanda, sino que
es la demanda la que impulsa el uso de las aplicaciones. Sugiera
alguna modificación al modelo para aminorar la endogeneidad del
uso de las aplicaciones.</li>
</ul></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>La diferencia principal es que uno describe el efecto de
características de las tiendas (Ecuación 1), mientras que la otra
describe el efecto de las características de la zona censal
(Ecuación 2). Es preferible (1) si el foco está en entender qué
características de la tienda inciden en el tráfico, y (2) si el foco
está en entender qué características de las zonas censales son las
que generan más tráfico.</p></li>
<li><p>Cada pregunta tiene respuestas bastante directas:</p>
<ol style="list-style-type: lower-alpha">
<li>Los estimadores dan cuenta del valor esperado de la variable
dependiente <strong>condicional</strong> en la realización de las otras
variables. Cada vez que cambiamos el conjunto de las variables
sobre las que se condiciona, es esperable que cambien los
estimadores.</li>
<li>Necesitamos (una estimación de) los errores estándares. Como no
están reportados en la tabla, no podemos calcular su valor
numérico.</li>
<li>Si el objetivo es pronóstico, habría que calibrar el modelo en
una muestra de calibración y evaluarlo en una muestra retenida
de validación. La evaluación típicamente consideraría métricas
como MAE o MAPE.</li>
<li>Por medio de una prueba F. Por ejemplo, si queremos evaluar si
hay diferencia entre las marcas A y C, podemos testear la
hipótesis lineal <span class="math inline">\(\beta_A - \beta_C = 0\)</span>.</li>
</ol></li>
<li><p>Los errores estándares de pronóstico dependen de las variables
explicativas. Técnicamente el error de pronóstico considera tanto un
error residual como uno de sampleo. Este último crece al alejarse de
los valores típicos de sampleo.</p></li>
<li><p>La ecuación 1, por extensión puede escribirse como:</p>
<p><span class="math display">\[ q_{ikt} = \alpha_k^1 + \beta_t^1 + \gamma^1 d_{ik} + \theta^{1&#39;}(\text{Superficie}_k, B_k, C_k, Mall_k) + \varepsilon_{ikt}^1 \]</span></p>
<p>Donde el 1 es un superíndice para indicar que provienen del primer
modelo, <span class="math inline">\(B_k\)</span> y <span class="math inline">\(C_k\)</span> son variables binarias que indican la marca de
cada tienda (para que sea identificable, tenemos que eliminar una
marca). Sobre este modelo debemos:</p>
<ul>
<li>Agregar <span class="math inline">\(\text{Superficie}_k \cdot Mall_k\)</span> en la función que
integra <span class="math inline">\(\theta^{1&#39;}\)</span>.</li>
<li>Reemplazar el término de la distancia por
<span class="math inline">\(\gamma_1^1 d_{ik} 1_{[d_{ik}&lt;d^*]} + \gamma_2^1 v_{ik} 1_{[d_{ik}&gt;d^*]}\)</span>.</li>
<li>Agregar <span class="math inline">\(Metro_i \cdot Mall_k\)</span>.</li>
<li>Agregar <span class="math inline">\(v_{ik} \cdot Conveniencia_k \cdot 1_{[d_{ik}&gt;d^*]}\)</span>
(donde <span class="math inline">\(Conveniencia_k = 1\)</span> si marca es de conveniencia) y
<span class="math inline">\(v_{ik} \cdot (1-Conveniencia_k) \cdot 1_{[d_{ik} \leq d*]}\)</span>.</li>
</ul></li>
<li><p>Aunque hay otras ideas admisibles, el fraseo de la pregunta parece
sugerir la solución más directa que es agregar la dinámica de
adopción. Esto es, agregar un índice temporal a la variable
<span class="math inline">\(Fracusuarios_{it}\)</span> de modo de representar como varía en el tiempo.
Así, podemos ver cómo cambia la demanda en periodos de mayor o menor
uso de las aplicaciones. Observaciones:</p>
<ol style="list-style-type: lower-alpha">
<li>Un nivel mayor de sofisticación podría sugerir usar
<span class="math inline">\(Fracusuarios_{it-1}\)</span> y/o <span class="math inline">\(Fracusuarios_{it-2}\)</span>. La inclusión de
rezagos presupone que la adopción antecede las compras.</li>
<li>Esta especificación puede ayudar a aminorar los problemas de
endogeneidad, pero no los soluciona del todo. Si hay un momento
específico en que se lanza la app, o si hay algunas campañas
específicas que solo se promocionan a través de las apps,
podrían dar elementos adicionales para reducir la endogeneidad
del constructo.</li>
</ol></li>
</ol>
<hr />
</div>
<div id="problema-7---p1-control-1-otoño-2024" class="section level3 hasAnchor" number="2.4.7">
<h3><span class="header-section-number">2.4.7</span> Problema 7 - P1 Control 1 Otoño 2024<a href="#problema-7---p1-control-1-oto%C3%B1o-2024" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Uno de los cambios más relevantes de los últimos años, en ambientes de
negocio y en la sociedad en su conjunto, ha sido la irrupción de las
inteligencias artificiales (IA) generativas¹. En simple, las
inteligencias artificiales generativas son un tipo de inteligencia
artificial que puede crear contenidos nuevos, incluyendo conversaciones,
historias, imágenes, videos e incluso música. Entre las ventajas de
estas tecnologías es su capacidad de comprender matices del lenguaje no
estructurado que les permite dar respuestas a entornos complejos. A
continuación, exploraremos el potencial uso de estas tecnologías para
generar sistemas automatizados de atención de clientes en la industria
bancaria.</p>
<p>Muchas de las aplicaciones de estas tecnologías de IA generativas se
basan en modelos fundacionales² que son modelos de machine learning
entrenados en un amplio espectro de datos generalizados y por tanto son
capaces de realizar una amplia variedad de tareas generales. Los modelos
de generative pre-trained transformer (GPT) de OpenAI son precisamente
un ejemplo de un modelo fundacional. Aunque los modelos fundacionales
tienen capacidades generales de lenguaje, en general no logran el nivel
de especificidad requeridos para dar servicio a los clientes. Por
ejemplo, un modelo de GPT no sabrá cuáles son las políticas internas de
cada banco para resolver cada tipo de requerimiento de sus clientes.
Para dotar a las IA generativas de este conocimiento contextual, se
puede hacer una etapa liviana de entrenamiento o de <em>fine tuning</em>³.</p>
<p>En este proyecto, investigamos el rendimiento de diferentes estrategias
de entrenamiento sobre el desempeño de un asistente virtual basado en IA
generativas en el contexto de la industria bancaria, donde tener el
control de las respuestas es especialmente sensible para las empresas.
En específico se consideraron tres estrategias de entrenamiento:</p>
<ul>
<li><strong>Prompt 1</strong>: Se instruye al agente con una lista breve y resumida
de cómo debe reaccionar a los requerimientos de los usuarios.</li>
<li><strong>Prompt 2</strong>: Se instruye al agente con una lista detallada de cómo
debe reaccionar a los requerimientos de los usuarios.</li>
<li><strong>Prompt 3</strong>: Se instruye al agente con una lista detallada de cómo
debe reaccionar a los requerimientos de los usuarios y se le indica
que solo puede responder desde un conjunto acotado de respuestas.</li>
</ul>
<p>Para entender el desempeño de distintas estrategias de entrenamiento se
diseñó un experimento en que se le pidió a un grupo de usuarios de
tarjetas de crédito que, en una serie de escenarios, interactuara
libremente con un agente basado en IA generativas para resolver
preguntas asociada a un desconocimiento de transacción. Un
desconocimiento de transacción ocurre cuando un cliente revisa su
cartola de cuentas e identifica una transacción que no reconoce como
propia. Al terminar cada interacción se les preguntó a los participantes
una serie de preguntas para entender cómo evaluaban la interacción con
el agente digital.</p>
<p>Como resultado de estas interacciones se generó una base de datos con
las siguientes columnas:</p>
<ul>
<li><strong>customer_id</strong>: Identificador del participante dentro del
experimento.</li>
<li><strong>task_id</strong>: Identificador del escenario.</li>
<li><strong>age</strong>: Edad del participante.</li>
<li><strong>sex</strong>: Sexo del participante.</li>
<li><strong>NSE</strong>: Nivel socioeconómico del participante.</li>
<li><strong>prompt_type</strong>: Tipo de prompt asignado en el experimento.</li>
<li><strong>resolutivity</strong>: Resolutividad percibida por el participante.</li>
<li><strong>confidence</strong>: Confianza percibida por el participante en la
correctitud de la información.</li>
<li><strong>experience</strong>: Satisfacción percibida por el participante.</li>
<li><strong>efficacy_input</strong>: Eficacia de comprensión de mensajes percibida
por el participante.</li>
<li><strong>efficacy_output</strong>: Eficacia de generación de respuestas percibida
por el participante.</li>
<li><strong>interaction_time</strong>: Duración total de la interacción del
participante con el agente.</li>
<li><strong>cus_res_time</strong>: Tiempo promedio que tarda en responder el
participante en la interacción.</li>
<li><strong>agt_res_time</strong>: Tiempo promedio que tarda en responder el agente
en la interacción.</li>
<li><strong>n_messages</strong>: Número de mensajes en la interacción.</li>
<li><strong>n_words</strong>: Número de palabras promedio por mensaje.</li>
</ul>
<p>Adicionalmente, considerando las normativas del banco, cada interacción
fue examinada para determinar el porcentaje de errores cometido por el
agente. El experimento consideró la participación de 643 clientes a cada
uno de los cuales se les pidió interactuar con el agente digital en tres
escenarios distintos con lo que se tiene un total de 1,929 filas en la
base de datos.</p>
<ol style="list-style-type: decimal">
<li>(1 punto) La compañía está considerando usar un(os) modelo(s) de
regresión para medir el impacto de distintas estrategias de
entrenamiento. Considerando que el sistema está diseñado para dar
servicio de atención a los clientes del banco, ¿cuál cree usted que
debieran ser las variables dependientes para analizar en un modelo
de regresión?</li>
<li>(2 puntos) Sea <span class="math inline">\(y_{ik}\)</span> la variable de desempeño que usted considera
relevante para el participante i (<span class="math inline">\(i \in
\{1,\ldots,643\}\)</span>) en el escenario k (<span class="math inline">\(k \in \{1,2,3\}\)</span>). Formule un
modelo de regresión que permita evaluar el desempeño de las
distintas estrategias y que considere las siguientes componentes:
<ul>
<li>Algunos escenarios podrían ser más fáciles o más difíciles por
lo que el agente podría tener desempeños sistemáticamente
diferentes por tareas.</li>
<li>Los usuarios de mayor edad tienden a tener una peor actitud
hacia este tipo de tecnología y por tanto hacer peores
evaluaciones de desempeño.</li>
<li>Si la interacción con el agente virtual es muy corta,
probablemente los usuarios evalúen el desempeño como
insuficiente. Del mismo modo, si la interacción es muy larga los
usuarios en general tenderán a tener malas evaluaciones de
desempeño.</li>
<li>Aunque no hay diferencias en los niveles generales de la
evaluación de desempeño entre género, en general los hombres
tienden a preferir interacciones más cortas que el resto de los
géneros.</li>
</ul></li>
</ol>
<!-- -->
<ol start="3" style="list-style-type: decimal">
<li><p>(1 punto) ¿Qué limitaciones tiene el modelo anteriormente planteado
para el entendimiento de la pregunta de investigación? ¿Como
recomendaría corregir estas limitaciones?</p></li>
<li><p>Para una parte del análisis, se consideraron tres modelos de
regresión que se reportan en la Tabla 1.</p>
<ol style="list-style-type: lower-alpha">
<li><p>(1 punto) De acuerdo a los resultados de estos modelos de
regresión, ¿qué rol juega las distintas estrategias de
entrenamiento en el desempeño del agente virtual?</p></li>
<li><p>(1 punto) ¿Cómo podríamos determinar el impacto de la
introducción de restricciones en la estrategia de entrenamiento?</p></li>
</ol>
<table style="width:97%;">
<colgroup>
<col width="22%" />
<col width="22%" />
<col width="25%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Experiencia
(Coeficiente)</th>
<th align="center">Resolutividad
(Coeficiente)</th>
<th align="center">Porcentaje
Errores
(Coeficiente)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Intercepto</td>
<td align="center">0.025</td>
<td align="center">0.146</td>
<td align="center">4.675</td>
</tr>
<tr class="even">
<td align="center">Prompt 2</td>
<td align="center">-0.079 **</td>
<td align="center">-0.157 ***</td>
<td align="center">-4.965 **</td>
</tr>
<tr class="odd">
<td align="center">Prompt 3</td>
<td align="center">-0.005</td>
<td align="center">0.109 **</td>
<td align="center">-0.262</td>
</tr>
<tr class="even">
<td align="center">Eficacia
entrada</td>
<td align="center">0.174 ***</td>
<td align="center">0.155 ***</td>
<td align="center">0.541</td>
</tr>
<tr class="odd">
<td align="center">Eficacia
salida</td>
<td align="center">0.100 ***</td>
<td align="center">-0.030</td>
<td align="center">1.400</td>
</tr>
<tr class="even">
<td align="center">Confianza</td>
<td align="center">0.720 ***</td>
<td align="center">0.786 ***</td>
<td align="center">0.508</td>
</tr>
<tr class="odd">
<td align="center">Tiempo
Interacción</td>
<td align="center">-0.006</td>
<td align="center">-0.024 ***</td>
<td align="center">0.094</td>
</tr>
<tr class="even">
<td align="center">Num Mensajes</td>
<td align="center">0.007 **</td>
<td align="center">0.020 ***</td>
<td align="center">0.224</td>
</tr>
<tr class="odd">
<td align="center">Edad</td>
<td align="center">-0.002</td>
<td align="center">-0.003 **</td>
<td align="center">0.044</td>
</tr>
<tr class="even">
<td align="center">Mujer</td>
<td align="center">0.027</td>
<td align="center">-0.038</td>
<td align="center">0.030</td>
</tr>
<tr class="odd">
<td align="center">N. obs</td>
<td align="center">1,929</td>
<td align="center">1,929</td>
<td align="center">126</td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R^2\)</span></td>
<td align="center">0.798</td>
<td align="center">0.709</td>
<td align="center">0.220</td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(R_{adj.}^2\)</span></td>
<td align="center">0.796</td>
<td align="center">0.707</td>
<td align="center">0.105</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
\text{Tabla 1: Resultados modelos alternativos de regresión.} \\
\text{Fuente: Hernández, F. (2024): &quot;Agentes inteligentes basados en Large Language Models} \\
\text{para la atención automatizada en canal conversacional online de servicio al cliente en una} \\
\text{empresa financiera&quot;. Memoria para optar al título de Ingeniero Civil Industrial.}
\]</span></p></li>
</ol>
<hr />
<p>¹ <a href="https://aws.amazon.com/es/what-is/generative-ai/" class="uri">https://aws.amazon.com/es/what-is/generative-ai/</a><br />
² <a href="https://aws.amazon.com/es/what-is/foundation-models/" class="uri">https://aws.amazon.com/es/what-is/foundation-models/</a><br />
³ <a href="https://platform.openai.com/docs/guides/fine-tuning" class="uri">https://platform.openai.com/docs/guides/fine-tuning</a></p>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>La respuesta más clara es la satisfacción de los usuarios
(Experience). Sin embargo, resulta a todas luces insuficiente. Es
necesario tener un acercamiento hacia la reflexión de los siguientes
puntos:</p>
<ol style="list-style-type: lower-alpha">
<li>El agente debe seguir un conjunto de procedimientos definidos
institucionalmente y por tanto es necesario mirar los errores
cometidos. Los agentes de IA son conocidos por alucinar y
podrían dejar satisfecho al usuario entregándole respuestas que
son inconvenientes por la firma.</li>
<li>Uno de los motivos de la automatización es que el agente pueda
resolver sin la necesidad de derivar los casos a un agente
humano. Desde el punto de vista de la costo-efectividad, también
es importante mirar su resolutividad.</li>
</ol></li>
<li><p>El modelo de regresión puede expresarse como:</p>
<p><span class="math display">\[
y_{ik} = \sum_{e \in \{2,3\}} \theta_e 1_{ei} + \alpha_k + \beta_{1} Age_i
       + \beta_{2} NW_{ik} + \beta_{3} NW_{ik}^2 + \beta_{4} Sex_i
       + \beta_{5} NW_{ik} Sex_i + \varepsilon_{ik}
\]</span></p>
<p>Donde</p>
<ol style="list-style-type: lower-alpha">
<li>La variable <span class="math inline">\(1_{ei}\)</span> toma el valor 1 si el usuario i es asignado
a la estrategia de entrenamiento e y por tanto <span class="math inline">\(\theta_e\)</span>
captura el efecto que tiene la estrategia de entrenamiento e.
Notar que, para que el modelo sea identificable necesitamos
excluir una estrategia.</li>
<li>El efecto fijo <span class="math inline">\(\alpha_k\)</span> controla por diferencias entre tipos
de escenarios.</li>
<li>El término <span class="math inline">\(\beta_{1}\)</span> permite controlar que la evaluación
dependa de la edad.</li>
<li>Los términos <span class="math inline">\(\beta_{2}\)</span> y <span class="math inline">\(\beta_{3}\)</span> permiten capturar el
efecto no lineal del largo de la interacción. En esta
especificación usamos el número de palabras (<span class="math inline">\(NW_{ik}\)</span>), pero el
número de mensajes es una alternativa posible.</li>
<li>El término <span class="math inline">\(\beta_4\)</span> captura el efecto de ser hombre, sumando al
efecto de <span class="math inline">\(\beta_5\)</span> que captura la interacción entre el largo de
la interacción y el sexo hombre.</li>
</ol></li>
<li><p>Hay varias limitaciones, pero probablemente se puedan agrupar en las
dos siguientes líneas:</p>
<ol style="list-style-type: lower-alpha">
<li>Respecto al diseño de investigación. Por ejemplo, el diseño solo
compara tres estrategias específicas, pero no sabemos cuál sería
el desempeño de una nueva estrategia de entrenamiento.</li>
<li>Respecto al modelo de regresión. Por ejemplo, hay factores que
no controlamos como el NSE o, si se considera más de una
variable de desempeño, cuál es la relación entre estos factores.</li>
</ol></li>
</ol>
<!-- -->
<ol start="4" style="list-style-type: decimal">
<li>Las respuestas se derivan directo de las tablas.
<ol style="list-style-type: lower-alpha">
<li>Los coeficientes del Prompt 2 es significativo en las tres
variables de desempeño consideradas y por tanto esa estrategia
de entrenamiento tiene peor resolutividad y satisfacción, pero
también un menor número de errores procedurales. Similarmente,
el Prompt 3 tiene una mayor resolutividad que la estrategia de
entrenamiento base, pero las diferencias no son significativas
en la satisfacción ni en los errores procedurales.</li>
<li>Habría que testear si <span class="math inline">\(\theta_2 = \theta_3\)</span> (por ejemplo, si
<span class="math inline">\(\theta_2 &gt; \theta_3\)</span> en la ecuación de satisfacción usuaria,
implicaría que incluir restricciones en la estrategia de
entrenamiento empeora la evaluación. Como el objeto a testear
son restricciones lineales, entonces puede hacerse con una
prueba F.</li>
</ol></li>
</ol>
<p><strong>Nota:</strong> Para los curiosos, los p-valores de los test para las tres
ecuaciones son (0.066, 0.000 y 0.016) por lo que si consideramos un 95%
las restricciones solo tendrían un impacto en la resolutividad.</p>
<hr />
</div>
<div id="problema-8---p1-control-primavera-2023" class="section level3 hasAnchor" number="2.4.8">
<h3><span class="header-section-number">2.4.8</span> Problema 8 - P1 Control Primavera 2023<a href="modelos-de-regresión.html#problema-8---p1-control-primavera-2023" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Con el desarrollo de los canales digitales, muchas industrias han
<em>desintermediarizado</em> la distribución de productos y servicios. Este es
precisamente el caso de la industria musical en que tanto artistas
consagrados<a href="https://open.spotify.com/intl-es/artist/06Hl4z0CvFAxyc27GXpf02">¹</a>
como
independientes<a href="https://open.spotify.com/intl-es/artist/5eFvIKbhmaxjVEfsOCros">²</a>
pueden subir directamente su música a plataformas como Spotify, Deezer o
Youtube Music. Junto con el cambio en la estructura de distribución, las
plataformas digitales proveen información detallada para entender los
factores que afectan la popularidad de cada canción y artista. En esta
pregunta usaremos un enfoque de regresión para cuantificar la relación
entre distintos factores en la audiencia de cada pieza. Para ello, se
cuenta con los registros históricos de una muestra de 123.456 canciones
en una plataforma de distribución musical, en la que se observan las
siguientes variables:</p>
<ul>
<li><strong>IdSong</strong>: Identificador único para cada canción.</li>
<li><strong>Date</strong>: Fecha del registro.</li>
<li><strong>Title</strong>: Título de la canción.</li>
<li><strong>Artist</strong>: Intérprete de la canción.</li>
<li><strong>Genre</strong>: Género musical al que pertenece la canción (e.g. Rock,
Pop, Indie, etc.)</li>
<li><strong>Length</strong>: Duración de la canción (medido en segundos).</li>
<li><strong>LaunchDate</strong>: Fecha en la que fue lanzada la canción.</li>
<li><strong>Nplay</strong>: Número de veces que ha sido escuchada la canción.</li>
<li><strong>Tprom</strong>: Tiempo de escucha promedio cada vez que es escuchada una
canción.</li>
<li><strong>Danceability</strong>: Puntaje [0-1] de qué tan bailable es una canción
(basada en tiempo y regularidad).</li>
<li><strong>Energy</strong>: Puntaje [0-1] de qué tan energética es una canción
(basada en timbre y volumen).</li>
<li><strong>PromoExpend</strong>: Monto del gasto en promoción dentro de la
plataforma para esa fecha.</li>
<li><strong>Nfollow</strong>: Seguidores en redes sociales de artista.</li>
<li><strong>Top50</strong>: 1 si el artista ha tenido alguna vez una canción en el
Top 50 del Billboard.</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Considere un modelo de regresión lineal genérico</p>
<p><span class="math display">\[
y_i = \beta&#39; x_i + \varepsilon_i
\]</span></p>
<p>que cuantifica la relación de una medida de la popularidad de una
canción <span class="math inline">\(i\)</span> (<span class="math inline">\(y_i\)</span>), con un conjunto de variables observables de esa
canción (<span class="math inline">\(x_i\)</span>). Proponga dos métricas de popularidad. Para cada una
de ellas indique una limitación de usar esa variable como indicador
del éxito de audiencia de una canción.</p>
<p><strong>Observación:</strong> Notar que la base está indexada por la canción y el
tiempo, mientras la métrica pedida depende solo de la canción.</p></li>
<li><p>Describa un modelo de regresión lineal para estimar la popularidad
de una canción. Para la construcción de este modelo de regresión
considere que:</p>
<ol style="list-style-type: lower-alpha">
<li>Es importante controlar por la popularidad que típicamente tiene
cada artista y que las canciones lanzadas más recientemente
tienen acceso a un mayor número de usuarios activos en la
plataforma.</li>
<li>Las promociones aumentan la popularidad de las canciones, pero
este efecto es acumulativo en el tiempo.</li>
<li>El efecto de la <em>danceability</em> de una canción puede ser positivo
para unos géneros, pero negativo para otros.</li>
<li>El efecto del largo de una canción es no lineal en la
popularidad: mientras temas muy cortos raramente son muy
populares, los temas demasiado largos también tienen
dificultades en generar audiencias.</li>
</ol>
<p>Defina cuidadosamente las variables e indique cómo se obtienen a
partir de los registros disponible</p></li>
<li><p>Suponga que se estiman tres modelos simples de regresión lineal para
describir la popularidad de las canciones dentro de la plataforma.
Los resultados de estos dos modelos se reportan en la Tabla 1</p>
<p><span class="math display">\[\text{Tabla 1: Resultados modelos alternativos de regresión}\]</span></p>
<table style="width:93%;">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">V
ariable</th>
<th align="center">Modelo
1
Coef
iciente</th>
<th align="center">Modelo
1 SE</th>
<th align="center">Modelo
2
Coef
iciente</th>
<th align="center">Modelo
2 SE</th>
<th align="center">Modelo
3
Coef
iciente</th>
<th align="center">Modelo
3 SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><span class="math inline">\(\ln(\
text{le
ngth})\)</span></td>
<td align="center">-0.453</td>
<td align="center">0.001</td>
<td align="center">-0.462</td>
<td align="center">0.023</td>
<td align="center">-0.3983</td>
<td align="center">0.024</td>
</tr>
<tr class="even">
<td align="center">Promo</td>
<td align="center">5.341</td>
<td align="center">0.562</td>
<td align="center">4.341</td>
<td align="center">0.011</td>
<td align="center">5.101</td>
<td align="center">0.012</td>
</tr>
<tr class="odd">
<td align="center">Energy</td>
<td align="center">0.138</td>
<td align="center">0.453</td>
<td align="center">3.453</td>
<td align="center">0.003</td>
<td align="center">3.238</td>
<td align="center">0.001</td>
</tr>
<tr class="even">
<td align="center">Dance
ability</td>
<td align="center">2.345</td>
<td align="center">0.002</td>
<td align="center">0.091</td>
<td align="center">0.645</td>
<td align="center">0.192</td>
<td align="center">0.345</td>
</tr>
<tr class="odd">
<td align="center">NFollow</td>
<td align="center">2.323</td>
<td align="center">0.011</td>
<td align="center">2.421</td>
<td align="center">0.016</td>
<td align="center">1.933</td>
<td align="center">0.008</td>
</tr>
<tr class="even">
<td align="center">Top50</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">1.498</td>
<td align="center">0.011</td>
</tr>
</tbody>
</table>
<p><strong>Fixed Effects</strong></p>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">Modelo 1</th>
<th align="center">Modelo 2</th>
<th align="center">Modelo 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Artist</td>
<td align="center">Yes</td>
<td align="center">Yes</td>
<td align="center">Yes</td>
</tr>
<tr class="even">
<td align="center">Year</td>
<td align="center">Yes</td>
<td align="center">Yes</td>
<td align="center">Yes</td>
</tr>
<tr class="odd">
<td align="center">Genre</td>
<td align="center">No</td>
<td align="center">Yes</td>
<td align="center">Yes</td>
</tr>
</tbody>
</table>
<p><strong>Métricas</strong></p>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">Modelo 1</th>
<th align="center">Modelo 2</th>
<th align="center">Modelo 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Std. Error</td>
<td align="center">5.355</td>
<td align="center">4.307</td>
<td align="center">4.278</td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R^2\)</span></td>
<td align="center">0.296</td>
<td align="center">0.445</td>
<td align="center">0.455</td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(R^2_{adj}\)</span></td>
<td align="center">0.286</td>
<td align="center">0.398</td>
<td align="center">0.401</td>
</tr>
</tbody>
</table>
<p>A partir de los resultados anteriores:</p>
<ol style="list-style-type: lower-alpha">
<li><p>¿Qué aprendizaje puede derivar a partir de observar los <span class="math inline">\(R^2\)</span>?</p></li>
<li><p>¿Cuál es el intervalo de confianza del 95% para el coeficiente
<span class="math inline">\(NFollow\)</span> en el modelo 2?</p></li>
<li><p>¿Qué puede explicar el cambio de significancia de <span class="math inline">\(Energy\)</span> y
<span class="math inline">\(Danceability\)</span> en Modelos 1 y 2?</p></li>
<li><p>¿Cómo se puede testear que <span class="math inline">\(Danceability\)</span> y <span class="math inline">\(Energy\)</span>, de manera
conjunta tienen un efecto nulo?</p></li>
</ol></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li>Algunas posibilidades:
<ul>
<li><p><span class="math inline">\(y_i^0 = \max\{NPlay_{it}\}_t\)</span>, que corresponde al máximo de
veces que ha sido escuchada una canción.<br />
Una limitación de esta métrica es que las canciones se lanzan en
instantes distintos del tiempo y las canciones más antiguas
tendrán más escuchas, aunque no sean tan populares.</p></li>
<li><p><span class="math inline">\(y_i^1 = \max\{NPlay_{it}\}_t/(LaunchDate_i)\)</span>. Acá, el
denominador corresponde al tiempo transcurrido desde el
lanzamiento y, por lo tanto, la métrica mide el número de
reproducciones por unidad de tiempo. Una limitación de esta
métrica es que no considera el ciclo de vida del producto (ciclo
de reproducción de las canciones). Las canciones recién lanzadas
suelen ser muy escuchadas, pero algunas pasan rápidamente de
moda.</p></li>
<li><p><span class="math inline">\(y_i^2 = NPlay_{i, LaunchDate_i + 365}\)</span>, que corresponde al
número de reproducciones un año después de haber sido lanzado la
canción. Una limitación de esta métrica es que las plataformas
aumentan sus audiencias y, por tanto, favorece a canciones que
han sido lanzadas más recientemente.</p>
<p>Hay varias otras posibilidades. Por ejemplo, usar el <em>share</em> de
reproducciones dentro de la categoría, la desviación de
reproducciones con respecto a la canción anterior del artista,
etc. Notar que hay algunas métricas que no capturan precisamente
popularidad. Por ejemplo:</p></li>
<li><p><span class="math inline">\(y_i^3 = \max\{NPlay_{it}\}/\sum_t Promo_{it}\)</span>, que mide
eficiencia promocional y se indeﬁne para canciones que no han
sido promocionadas.</p></li>
<li><p><span class="math inline">\(y_i^4 = \sum\{TProm_{it}\}/\text{mean}\{Length_i\}\)</span>, que mide
el <em>envolvimiento o lealtad</em> con la canción . Una canción podría
ser escuchada una vez completa y aunque no diríamos que es
popular, tendría el máximo en esta métrica.</p></li>
</ul></li>
</ol>
<!-- -->
<ol start="2" style="list-style-type: decimal">
<li><p>Todas las componentes se agregan más o menos directo en la ecuación</p>
<ul>
<li>Hay que agregar controles de artista (<span class="math inline">\(Artist_i\)</span>) y tiempo de
lanzamiento (<span class="math inline">\(LaunchDate_i\)</span>).</li>
<li>Hay que agregar el gasto acumulado en promoción
(<span class="math inline">\(\sum_t Promo_{it}\)</span>).</li>
<li>Hay que agregar las interacciones entre danzabilidad y género
(<span class="math inline">\(Danceability_i\, Genero_i\)</span>).</li>
<li>Hay que agregar tanto efectos lineales como cuadráticos
(<span class="math inline">\(Danceability_i + Danceability_i^2\)</span>).</li>
</ul>
<p>Con esto el modelo puede expresarse como:</p></li>
</ol>
<p><span class="math display">\[
\begin{aligned}
y_i \;=\;&amp; \alpha_{Artist_i}^1 + \alpha_{LaunchDate_i}^2
+ \beta_1 \left( \sum_t PromoExpend_{it} \right) \\
&amp;+ \beta_2\, Danceability_i + \beta_3\, Genre_i\\
&amp;+ \sum_{g \in genero} \alpha_{g}\, Danceability_i\, Genre_{i}
+ \beta_4\, Length_i + \beta_5\, Length_i^2
\end{aligned}
\]</span></p>
<ol start="3" style="list-style-type: decimal">
<li>Cada una de las partes tiene respuestas bastante directas:
<ol style="list-style-type: lower-alpha">
<li>Al comparar el Modelo 1 con el Modelo 2, vemos que el género
explica bastante variabilidad en la popularidad. Al comparar el
Modelo 2 con el Modelo 3, vemos que la distinción de <span class="math inline">\(Top50\)</span>
ayuda a explicar una fracción muy menor de la varianza en
popularidad.</li>
<li>El intervalo de confianza viene dado por:<br />
<span class="math display">\[
(2.421 - 1.96 \cdot 0.016,\; 2.421 + 1.96 \cdot 0.016)
\]</span></li>
<li>En ambos casos una de las variables es significativa, pero la
otra no. Aunque hay otras explicaciones posibles, la más directa
es que estas dos variables estén altamente correlacionadas y,
por tanto, el efecto conjunto es identificable. Es difícil
separar el efecto de una con respecto a la otra.</li>
<li>Queremos testear que <span class="math inline">\(\beta_{dance} = 0\)</span> y <span class="math inline">\(\beta_{Energy} = 0\)</span>.
Este es un sistema de restricciones lineales que puede testearse
directamente a través de una prueba F.</li>
</ol></li>
</ol>
<hr />
</div>
<div id="problema-9---p1-control-otoño-2023" class="section level3 hasAnchor" number="2.4.9">
<h3><span class="header-section-number">2.4.9</span> Problema 9 - P1 Control Otoño 2023<a href="#problema-9---p1-control-oto%C3%B1o-2023" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>KornerK</em> introdujo hace un par de años un modelo de negocio innovador
en que, a través de una aplicación móvil, los clientes de la industria
supermercadista podían hacer sus compras remotamente. Para llevar a cabo
sus compras, los clientes listan el conjunto de productos que desean
adquirir y ponen una orden a la plataforma, la que contacta a alguno de
los numerosos <em>shoppers</em> que tiene afiliados, los que se encargan de
recoger los productos desde la sala de supermercado y transportarlo
hasta el domicilio del cliente. La asignación de <em>shoppers</em> se hace
considerando la cercanía al domicilio del usuario, por lo que la
compañía se ha preocupado de tener suficientes afiliados disponibles
para cubrir la demanda en cada geografía y bloque horario.</p>
<p>Después de un par de años de un crecimiento constante, lo que incluye un
período de crecimiento explosivo durante los confinamientos de la
pandemia, en los últimos meses se ha visto afectado por importantes
cambios tanto regulatorios como de los patrones de la demanda. A partir
de esta coyuntura, <em>KornerK</em> se ha visto obligado a rediseñar su
dotación y ha considerado hacer una reducción de hasta un 20% de los
<em>shoppers</em> en aquellas zonas con mayor caída en la demanda. Con este
propósito, se han propuesto analizar los patrones de demanda históricos
para hacer un pronóstico de la demanda.</p>
<p>Para sostener el análisis, se ha preparado un set de datos con las
ventas agregadas por bloque horario en cada una de las zonas en que
opera <em>KornerK</em>. En esta base, cada fila se compone de las siguientes
variables:</p>
<ul>
<li><strong>IdZip</strong>: Identificador de la zona geográfica.</li>
<li><strong>Date</strong>: Fecha en formato dd/mm/yyyy.</li>
<li><strong>Hour</strong>: Un entero que representa la hora que define el bloque
horario (8, 9, 10, …, 22).</li>
<li><strong>NOrdersC</strong>: Número de órdenes por servicio que fueron exitosamente
completadas.</li>
<li><strong>NOrdersN</strong>: Número de órdenes por servicio que no pudieron ser
completadas por falta de <em>shoppers</em>.</li>
<li><strong>Day</strong>: Día de la semana que se registra la discrepancia (con
lunes=1, hasta domingo=7).</li>
<li><strong>Mes</strong>: Correlativo del número de meses desde inicio de operación
(1, 2, 3, …).</li>
<li><strong>Rain</strong>: 1 si llovió en el bloque horario.</li>
<li><strong>IMACEC</strong>: Variación del índice mensual de actividad económica.</li>
</ul>
<p>Como ilustración, se muestran las primeras seis entradas se presentan en
la Tabla 1.</p>
<p><span class="math display">\[\text{Tabla 1: Muestra de los primeros 6 registros de la base de discrepancias}\]</span></p>
<table style="width:88%;">
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">I
dZip</th>
<th align="center">Date</th>
<th align="center">Hour</th>
<th align="center">NOrd
ersC</th>
<th align="center">NOrd
ersN</th>
<th align="center">Day</th>
<th align="center">Mes</th>
<th align="center">Rain</th>
<th align="center">IM
ACEC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1
5217</td>
<td align="center">02
/01/
2018</td>
<td align="center">8</td>
<td align="center">248</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0.02</td>
</tr>
<tr class="even">
<td align="center">1
5217</td>
<td align="center">02
/01/
2018</td>
<td align="center">9</td>
<td align="center">325</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0.02</td>
</tr>
<tr class="odd">
<td align="center">1
5217</td>
<td align="center">02
/01/
2018</td>
<td align="center">10</td>
<td align="center">331</td>
<td align="center">13</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0.02</td>
</tr>
<tr class="even">
<td align="center">2
3156</td>
<td align="center">03
/01/
2018</td>
<td align="center">8</td>
<td align="center">1345</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0.02</td>
</tr>
<tr class="odd">
<td align="center">2
3156</td>
<td align="center">03
/01/
2018</td>
<td align="center">9</td>
<td align="center">1221</td>
<td align="center">0</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0.02</td>
</tr>
<tr class="even">
<td align="center">2
3156</td>
<td align="center">03
/01/
2018</td>
<td align="center">10</td>
<td align="center">1436</td>
<td align="center">54</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0.02</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li><p>Describa un modelo de regresión lineal para estimar la <strong>demanda
total</strong> por servicios en cada zona y bloque horario que considere
<strong>al menos cuatro</strong> de los siguientes elementos:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Efectos fijos geográficos para capturar que gran parte de la
variabilidad de la demanda se explica por diferencias en los
patrones de consumo de las distintas zonas.</p></li>
<li><p>El patrón de demanda a lo largo de día es altamente estacional,
por lo que es esperable que la inclusión de efectos fijos por
hora sea relevante.</p></li>
<li><p>Aunque hay alguna variación de la demanda dependiendo del día de
semana, es despreciable en relación con la diferencia que hay
entre días de semana y fin de semana, la que es muy relevante.</p></li>
<li><p>El nivel de actividad económica parece estar positivamente
correlacionado con la demanda. Sin embargo, este efecto parece
estar rezagado, por lo que parece razonable considerar los
valores de actividad económica de los últimos 3 meses.</p></li>
<li><p>La demanda ha ido creciendo sostenidamente a lo largo del
tiempo, por lo que se necesita incluir un factor que capture una
tendencia de crecimiento lineal de la demanda como función del
tiempo.</p></li>
<li><p>La demanda tiende a crecer en los bloques en que llueve. Sin
embargo, la magnitud del crecimiento es distinta dependiendo de
que si es un día de semana o un fin de semana.</p>
<p>Defina cuidadosamente las variables dependientes e
independientes e indique cómo se obtienen a partir de los
registros disponibles en la base de datos.</p></li>
</ol></li>
<li><p>Suponga que se estiman dos modelos simples de regresión lineal para
describir la demanda por servicios de <em>KornerK</em>. Los resultados de
estos dos modelos se reportan en la Tabla 2.</p>
<p><span class="math display">\[\text{Tabla 2: Resultados modelos alternativos de regresión}\]</span></p>
<table style="width:93%;">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">V
ariable</th>
<th align="center">Modelo
1
Coef
iciente</th>
<th align="center">Modelo
1
p-valor</th>
<th align="center">Modelo
2
Coef
iciente</th>
<th align="center">Modelo
2
p-valor</th>
<th align="center">Modelo
3
Coef
iciente</th>
<th align="center">Modelo
3
p-valor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Int
ercepto</td>
<td align="center">589.415</td>
<td align="center">0.000</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">FinD
eSemana</td>
<td align="center">120.732</td>
<td align="center">0.001</td>
<td align="center">89.462</td>
<td align="center">0.023</td>
<td align="center">88.559</td>
<td align="center">0.024</td>
</tr>
<tr class="odd">
<td align="center">Rain</td>
<td align="center">20.341</td>
<td align="center">0.562</td>
<td align="center">14.341</td>
<td align="center">0.011</td>
<td align="center">11.101</td>
<td align="center">0.012</td>
</tr>
<tr class="even">
<td align="center">IMACEC</td>
<td align="center">65.323</td>
<td align="center">0.011</td>
<td align="center">59.021</td>
<td align="center">0.016</td>
<td align="center">62.774</td>
<td align="center">0.019</td>
</tr>
</tbody>
</table>
<p><strong>Fixed Effects</strong></p>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">Modelo 1</th>
<th align="center">Modelo 2</th>
<th align="center">Modelo 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Zip</td>
<td align="center">No</td>
<td align="center">No</td>
<td align="center">Yes</td>
</tr>
<tr class="even">
<td align="center">Hour</td>
<td align="center">No</td>
<td align="center">Yes</td>
<td align="center">Yes</td>
</tr>
</tbody>
</table>
<p><strong>Resumen</strong></p>
<table>
<thead>
<tr class="header">
<th align="center">Métrica</th>
<th align="center">Modelo 1</th>
<th align="center">Modelo 2</th>
<th align="center">Modelo 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Std. Error</td>
<td align="center">5.355</td>
<td align="center">4.307</td>
<td align="center">4.278</td>
</tr>
<tr class="even">
<td align="center"><span class="math inline">\(R^2\)</span></td>
<td align="center">0.196</td>
<td align="center">0.445</td>
<td align="center">0.544</td>
</tr>
<tr class="odd">
<td align="center"><span class="math inline">\(R^2_{adj}\)</span></td>
<td align="center">0.186</td>
<td align="center">0.392</td>
<td align="center">0.417</td>
</tr>
</tbody>
</table>
<p>A partir de los resultados anteriores:</p>
<ol style="list-style-type: lower-alpha">
<li>¿Por qué no se reporta un intercepto para los modelos 2 y 3?</li>
<li>¿Qué modelo explica la mayor varianza de la demanda observada?</li>
<li>¿Qué podemos afirmar con respecto al rol de los efectos fijos
regionales para describir la variabilidad en la demanda?</li>
<li>¿Qué rol juega la actividad económica en la demanda por
servicios de <em>KornerK</em>?</li>
</ol></li>
<li><p>Volviendo al problema de gestión al que se enfrenta la compañía,
<em>KornerK</em> está interesado en evaluar cómo podría impactar la
reducción de <em>shoppers</em> en la capacidad de responder a la demanda.
Para esto, ha elaborado un plan preliminar en que quedarían
<span class="math inline">\(N_{ith}\)</span> <em>shoppers</em> disponibles para trabajar en el bloque horario
<span class="math inline">\(h\)</span> del día <span class="math inline">\(t\)</span> en la zona <span class="math inline">\(i\)</span>.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Usando el modelo 1, calcule el valor esperado de la demanda para
un bloque en un día de semana, en que no llueve y en que hay una
variabilidad en la actividad económica del 10% (<span class="math inline">\(IMACEC = 0.1\)</span>).</p></li>
<li><p>Para el mismo bloque horario de la parte anterior, escriba una
expresión para calcular la probabilidad de que la demanda total
exceda la capacidad disponible expresada para ese bloque
<span class="math inline">\(N_{ith} = 600\)</span>.</p></li>
</ol></li>
</ol>
<p><strong>Solución</strong></p>
<ol style="list-style-type: decimal">
<li><p>Primero que todo, tenemos que clarificar que la variable dependiente
es la demanda
total en una zona i, fecha t y hora h, que corresponde tanto a las
órdenes completadas
como aquellas que excedieron la capacidad:</p>
<p><span class="math display">\[
DT_{iht}=NOrdersC_{iht}+NOrdersN_{iht}
\]</span></p>
<p>En el lado derecho de la regresión se pueden considerar cualquiera
de los siguientes puntos:</p>
<ul>
<li>Efectos fijos geográficos: <span class="math inline">\(\alpha_i^1\)</span></li>
<li>Efectos fijos por hora: <span class="math inline">\(\alpha_h^2\)</span></li>
<li>Diferencia entre día de semana y fin de semana: <span class="math inline">\(\beta_1 FDS_t\)</span>
donde <span class="math inline">\(FDS_t = 1_{\{Day \in \{Sábado,Domingo\}\}}\)</span></li>
<li>El nivel de actividad económica de los últimos 3 meses
<span class="math inline">\(\beta_2 IMACEC_t + \beta_3 IMACEC_{t-1} + \beta_4 IMACEC_{t-2}\)</span>.
Un modelo admisible es suponer que
<span class="math inline">\(\beta_2 = \beta_3 = \beta_4\)</span>. En vez de tener un parámetro por
cada mes, se tiene un único para el promedio de los tres.</li>
<li>La demanda ha ido creciendo sostenidamente: <span class="math inline">\(\beta_5 MES_t\)</span></li>
<li>Lluvia y fin de semana:
<span class="math inline">\(\beta_6 RAIN_{th} + \beta_7 RAIN_{th}\,FDS_t\)</span></li>
</ul>
<p>Así, la ecuación de regresión que considera todos los factores viene
dada por:</p>
<p><span class="math display">\[
\begin{align}DT_{iht} &amp;= \alpha_i^1 + \alpha_h^2 + \beta_1 FDS_t + \beta_2 IMACEC_t + \beta_3 IMACEC_{t-1} \\         &amp;\quad + \beta_4 IMACEC_{t-2} + \beta_5 MES_t + \beta_6 RAIN_{th} + \beta_7 \big(RAIN_{th}\cdot FDS_t\big)\end{align}
\]</span></p></li>
<li><p>Incluye:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Los modelos 2 y 3 tienen efectos fijos y, por tanto, hay un
intercepto distinto para
cada hora (Modelo 2) o para cada (geografía-hora). En general,
los efectos fijos
no se reportan porque suelen ser una secuencia larga de dummies
por las que solo
queremos controlar.</p></li>
<li><p>El <span class="math inline">\(R^2\)</span> captura la varianza explicada. En este caso el modelo
con mayor R2 es el
modelo 3.</p></li>
<li><p>Al agregar efectos fijos por región, el <span class="math inline">\(R^2\)</span> (varianza
explicada) aumenta bastante,
por lo que concluimos que una parte relevante de la variación en
la demanda se
explica porque hay regiones que hay más demanda que en otras.</p></li>
<li><p>En los tres modelos es positiva y significativa p-valor &lt; 0.05,
por lo que pode
mos decir que mayor actividad económica correlaciona
positivamente con mayor
demanda para KornerK.</p></li>
</ol></li>
<li><p>Detalle:</p>
<ol style="list-style-type: lower-alpha">
<li>El valor esperado viene dado por:</li>
</ol>
<pre><code>$$
\mu = 589.4 + 65.3 \cdot 0.1 = 595.9
$$</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li><p>La probabilidad viene dada por:</p>
<p><span class="math display">\[
Pr(DT_{iht} \geq 600)
\]</span></p></li>
</ol>
<p>Donde <span class="math inline">\(DT_{iht}\)</span> se distribuye normal con media <span class="math inline">\(\mu = 595.9\)</span> y
varianza <span class="math inline">\(\sigma^2 = (5.355)^2\)</span>. Este cálculo se puede hacer
directamente en cualquier paquete estadístico. En R:</p>
<p><span class="math display">\[
1 - pnorm(600, mean = 595.9, sd = 5.355)
\]</span></p></li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="formulas-utiles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelos-probabilísticos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/rstudio/bookdown-demo/edit/master/02-regresion.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
